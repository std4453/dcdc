{"version":3,"sources":["steps/SongSelection.jsx","steps/MoodboardCanvas.jsx","steps/Moodboard.jsx","steps/Loading.jsx","steps/Length.jsx","steps/Segmentation.jsx","retex/MyNode.js","retex/sockets.js","components/BeanComponent.js","components/InitiatorComponent.js","components/io.js","components/common.js","components/render/FontComponent.js","components/render/index.js","components/render/CanvasComponent.js","components/render/CharComponent.js","components/generation/SplitComponent.js","components/utils.js","components/generation/BalancedAComponent.js","components/generation/BalancedBComponent.js","components/generation/NeutralComponent.js","components/generation/ActiveAComponent.js","components/generation/ActiveBComponent.js","components/generation/index.js","components/calculation/UniformComponent.js","components/calculation/StepComponent.js","components/calculation/conditional.js","components/calculation/index.js","components/index.js","retex/NodeMap.jsx","steps/params.js","retex/engine.js","retex/exec.js","steps/render.js","steps/Generation.jsx","steps/index.js","steps/Rules.jsx","App.jsx","index.js","assets/logo-colored.svg"],"names":["useStyles","makeStyles","form","height","grid","input","width","SongSelection","next","setId","setStep","classes","useForm","register","handleSubmit","onSubmit","useCallback","id","React","useState","anchorEl","setAnchorEl","divRef","useRef","open","Boolean","undefined","ref","className","Grid","container","justify","spacing","alignItems","direction","item","src","logo","alt","TextField","name","label","variant","size","root","inputRef","required","Button","color","disableElevation","type","Container","maxWidth","Link","aria-describedby","onClick","current","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","fillRoundRect","ctx","x","y","radius","save","translate","beginPath","arc","Math","PI","lineTo","closePath","fill","restore","drawShape","shape","canvaswidth","canvasheight","loc1_x","loc1_y","loc2_x","loc2_y","loc3_x","loc3_y","r1","r2","r3","loc_flag","random","fillRect","drawTriangle","drawPentagon","colorGenerate","dan","ene","val","aco","tem","liv","liv_flag","tinycolor","require","hue","sat","bri","hue_arg","sat_arg","bri_arg","bw","text_flag","graph_flag","rand_flag","hue_flag","sat2","bri2","BG","TX","GR","complement","greyscale","shape_flag","toString","fontGenerate","fontName","backupFont","r","log","pow","round","loc_x","loc_y","moveTo","i","ang","rotate","initCanvas","tempo","energy","danceability","acousticness","valence","song","mb","liveness","letterSpacing","fontSize","fontWeight","c","document","getElementById","getContext","fillStyle","style","font","textAlign","fillText","progress","text","marginTop","marginBottom","backgroundColor","outline","CanvasButton","withStyles","boxShadow","padding","Moodboard","setMoodboard","data","artist","album","al_name","featuress","index","selectCanvas","setMB","items","Array","from","length","useEffect","nextStep","xs","Typography","align","overflow","map","key","Loading","action","a","loadFont","console","LinearProgress","FontFace","load","fonts","add","Length","time","secs","s","m","ss","sm","content","marginLeft","sections","position","section","top","bottom","border","cursor","edge","zIndex","Segmentation","prev","setData","localData","setLocalData","localSections","duration_s","url","prevStep","audio","useMemo","Audio","pause","currentTime","setCurrentTime","playing","setPlaying","onUpdate","onPlay","onPause","addEventListener","removeEventListener","onSeek","_","newVal","play","useDimensions","grey","Slider","value","onChange","max","start","climax","left","right","newData","axis","bounds","onDrag","__","end","duration","onStop","Label","justifyContent","middle","lineHeight","DefaultInput","inputDef","defaultVal","options","controlType","io","props","connections","typeName","path","min","step","Wrapper","children","onPointerMove","MyNode","node","this","initialState","inputDefs","setState","editor","bindSocket","bindControl","state","outputs","controls","inputs","convert","trigger","output","socket","innerRef","control","e","stopPropagation","showControl","Node","sockets","Proxy","any","Rete","Socket","get","obj","prop","combineWith","BeanComponent","outputDefs","Object","keys","displayName","Input","addInput","Output","addOutput","Component","InitiatorComponent","parseFloat","values","expr","parser","Parser","parsed","parse","evaluate","z","textWidth","sizes","background","canvas","scale","parentNode","clientWidth","clientHeight","transform","x0","y0","dir","ignoreWhitespaces","alignBaseline","ch","split","join","bx","by","closed","fontFamily","textBaseline","SplitComponent","parts","randomness","deltas","begin","substring","interp","b","divide","uniform","x1","y1","scatter","opposite","mirrored","n","f","BalancedAComponent","dist","BalancedBComponent","rows","cols","indices","pickRandom","u","v","reduce","count","sort","u1","v1","u2","v2","NeutralComponent","lineSpacing","point","delta","ActiveAComponent","angle","rx","ry","distToLine","x2","y2","abs","sqrt","atan2","sin","shapes","distToShape","p1","p2","newDist","bestCandidate","tries","maxR","minR","polygon","inside","d","push","chosen","debug","chains","chain","splice","candidates","filter","rest","k","dimension","sortAngle","sortScale","shouldSort","sorted","UniformComponent","StepComponent","cond","thres","lt","gt","ind","n0","n1","n2","n3","n4","n5","n6","n7","n8","n9","vals","conditional","common","render","generation","calculation","buttons","NodeMap","defaults","setRoot","NodeEditor","onUpdateRef","use","ConnectionPlugin","ReactRenderPlugin","component","ContextMenuPlugin","components","forEach","fromJSON","on","toJSON","download","JSON","stringify","blob","Blob","saveAs","upload","files","file","readAsText","fileTypes","handleFiles","config","Engine","nodes","graph","inputNodes","nodeInputs","dkey","nid","skey","includes","queue","processed","unprocessed","it","run","newCtx","find","every","iid","Error","findNode","nodeData","inputVals","sid","worker","call","outputVals","engine","process","balancedA","balancedB","neutral","activeA","activeB","patternType","params","t","float","pattern","char","rotation","easing1","BezierEasing","easing2","sides","square","triangle","pentagon","cos","char2","lyric","chi","outEffect","inEffect","inEndTime","inStartTime","outStartTime","outEndTime","opacity","Color","textColor","alpha","string","easing","patch","seed","rng","seedrandom","modes","enabled","mode","indexOf","num","int","splitMax","ceil","minDist","maxDist","minAngle","maxAngle","side","boxSizing","canvasContainer","bottomInner","title","paddingLeft","Generation","steps","FetchData","fetch","resp","json","FetchFont","lrc","moodboard","family","weight","Lrc","lyrics","chs","Set","method","headers","body","glyphs","arrayBuffer","InitialValues","initial","setInitial","initialGraph","initialRef","timestamp","l","ls","le","sd","idx","len","setParams","Promise","all","exec","then","setCanvas","fn","currentSegment","Date","getTime","initTime","setInitTime","renewTime","renderFrame","lyricIdx","valid","requestAnimationFrame","onFrameWrapped","newParams","nextSteps","prevSteps","theme","createMuiTheme","palette","primary","main","secondary","useAutoSave","saveKey","timeout","actualInitial","localStorage","valueRef","setValue","setTimeout","App","error","setError","defaultInitial","defaultGeneration","setGeneration","generationRef","ReactDOM","querySelector","module","exports"],"mappings":"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","file":"static/js/main.0ed06876.chunk.js","sourcesContent":["import React, { useCallback, useRef } from 'react';\nimport { makeStyles, Button, TextField, Grid, Link, Container, Popover } from '@material-ui/core';\nimport { useForm } from 'react-hook-form';\nimport logo from '../assets/logo-colored.svg';\n\nconst useStyles = makeStyles({\n    form: {\n        height: '100%',\n    },\n    grid: {\n        height: '100%',\n    },\n    input: {\n        width: 500,\n    },\n});\n\nfunction SongSelection({ next, setId, setStep }) {\n    const classes = useStyles();\n    const { register, handleSubmit } = useForm();\n    const onSubmit = useCallback(({ id }) => {\n        setId(id);\n        setStep(next);\n    }, [setStep, setId, next]);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const divRef = useRef();\n    const handleClick = () => {\n        setAnchorEl(divRef.current);\n    };\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n    const open = Boolean(anchorEl);\n    const id = open ? \"popover\" : undefined;\n    return (\n        <form ref={divRef} onSubmit={handleSubmit(onSubmit)} className={classes.form}>\n            <Grid\n                container\n                justify=\"center\"\n                spacing={4}\n                className={classes.grid}\n                alignItems=\"center\"\n                direction=\"column\"\n            >\n                <Grid item>\n                    <img src={logo} alt=\"\" height=\"51\" />\n                </Grid>\n                <Grid item container\n                    spacing={1}\n                    justify=\"center\"\n                    alignItems=\"center\"\n                >\n                    <Grid item>\n                        <TextField\n                            name=\"id\"\n                            label=\"网易云音乐ID\"\n                            variant=\"outlined\"\n                            size=\"small\"\n                            classes={{ root: classes.input }}\n                            inputRef={register({ required: true })}\n                        />\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disableElevation\n                            type=\"submit\"\n                        >\n                            开始创建\n                        </Button>\n                    </Grid>\n                </Grid>\n                <Container maxWidth = 'sm'>\n                    <Link\n                        aria-describedby={id}\n                        variant = \"caption\"\n                        color=\"secondary\"\n                        onClick={handleClick}\n                    >\n                        如何获取?\n                    </Link>\n                    <img\n                        src={\"如何获取.jpg\"}\n                        alt=\"如何获取\"\n                        width=\"0\"\n                    />\n                    <Popover\n                        id={id}\n                        open={open}\n                        anchorEl={anchorEl}\n                        onClose={handleClose}\n                        anchorOrigin={{\n                            vertical: \"center\",\n                            horizontal: \"center\"\n                        }}\n                        transformOrigin={{\n                            vertical: 'center',\n                            horizontal: 'center',\n                        }}\n                    >\n                        <img\n                            src={\"如何获取.jpg\"}\n                            alt=\"如何获取\"\n                            width=\"800\"\n                        />\n                    </Popover>\n                </Container>\n            </Grid>\n        </form>\n    )\n}\n\nexport default SongSelection;\n","const initCanvas = (tempo, energy, danceability, acousticness, valence, song, canvaswidth, canvasheight) => {\n    var mb = [];\n    for( var i = 1; i <= 200; i++ ){\n        var [BG,GR,TX,shape,liveness] = colorGenerate(danceability,energy,valence,acousticness,tempo);\n        var [letterSpacing,fontSize,fontWeight,fontName,backupFont] = fontGenerate(danceability,energy,valence,acousticness,tempo);\n        letterSpacing /= 4;\n        fontSize /= 4;\n        let c = document.getElementById(\"littleCanvas\"+i);\n        let ctx = c.getContext(\"2d\");\n        ctx.fillStyle = BG;\n        fillRoundRect(ctx, 0, 0, canvaswidth, canvasheight, 4);\n        ctx.fillStyle = GR;\n        drawShape(ctx, shape, canvaswidth, canvasheight);\n        c.style.letterSpacing = letterSpacing+'px';\n        ctx.font = fontWeight+' '+fontSize+'px '+fontName+'subfont, '+backupFont+'subfont';\n        ctx.fillStyle = TX;\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"动词打次\",(canvaswidth+letterSpacing)*0.5,canvasheight*0.5+fontSize/3);\n        ctx.font = fontWeight+' '+(fontSize*0.5)+'px '+fontName+'subfont, '+backupFont+'subfont';\n        ctx.fillStyle = TX;\n        ctx.textAlign = \"center\";\n        ctx.fillText(fontName,(canvaswidth+letterSpacing)*0.5,canvasheight*0.8);\n        mb[i] = { BG, GR, TX, letterSpacing, fontSize, fontWeight, fontName, backupFont, liveness, shape };\n    }\n    return mb;\n};\n\nconst fillRoundRect = (ctx, x, y, width, height, radius) => {     \n    if (2 * radius > width || 2 * radius > height) { return false; }\n    ctx.save();\n    ctx.translate(x, y); \n    ctx.beginPath(0);\n    ctx.arc(width - radius, height - radius, radius, 0, Math.PI / 2);\n    ctx.lineTo(radius, height);\n    ctx.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);\n    ctx.lineTo(0, radius);\n    ctx.arc(radius, radius, radius, Math.PI, Math.PI * 3 / 2);\n    ctx.lineTo(width - radius, 0);  \n    ctx.arc(width - radius, radius, radius, Math.PI * 3 / 2, Math.PI * 2);  \n    ctx.lineTo(width, height - radius);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n};\n\nconst drawShape = (ctx, shape, canvaswidth, canvasheight) => {\n    var loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y;\n    var r1, r2, r3;\n    var loc_flag = Math.random();\n    if(loc_flag <= 0.2) [loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y] = [0.75, 0.5, 0.5, 0.2, 0.2, 0.8];\n    else if(loc_flag <= 0.4) [loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y] = [0.22, 0.3, 0.75, 0.5, 0.5, 0.8];\n    else if(loc_flag <= 0.6) [loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y] = [0.43, 0.23, 0.8, 0.6, 0.2, 0.85];\n    else if(loc_flag <= 0.8) [loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y] = [0.67, 0.7, 0.25, 0.5, 0.85, 0.2];\n    else if(loc_flag <= 1) [loc1_x, loc1_y, loc2_x, loc2_y, loc3_x, loc3_y] = [0.2, 0.72, 0.53, 0.2, 0.8, 0.7];\n    loc_flag = Math.random()*0.1-0.05;\n    loc1_x += loc_flag;\n    loc1_y += loc_flag;\n    loc2_x += loc_flag;\n    loc2_y += loc_flag;\n    loc3_x += loc_flag;\n    loc3_y += loc_flag;\n\n    if(shape === \"circle\"){\n        [r1,r2,r3] = [0.2,0.15,0.12];\n        ctx.beginPath();\n        ctx.arc(canvaswidth*loc1_x,canvasheight*loc1_y,canvasheight*r1,0,2*Math.PI);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(canvaswidth*loc2_x,canvasheight*loc2_y,canvasheight*r2,0,2*Math.PI);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(canvaswidth*loc3_x,canvasheight*loc3_y,canvasheight*r3,0,2*Math.PI);\n        ctx.fill();\n    }\n    else if(shape === \"square\"){\n        [r1,r2,r3] = [0.2,0.15,0.12];\n        ctx.fillRect(canvaswidth*loc1_x-canvasheight*r1,canvasheight*loc1_y-canvasheight*r1,canvasheight*r1*2,canvasheight*r1*2);\n        ctx.fillRect(canvaswidth*loc2_x-canvasheight*r2,canvasheight*loc2_y-canvasheight*r2,canvasheight*r2*2,canvasheight*r2*2);\n        ctx.fillRect(canvaswidth*loc3_x-canvasheight*r3,canvasheight*loc3_y-canvasheight*r3,canvasheight*r3*2,canvasheight*r3*2);\n    }\n    else if(shape === \"line\"){\n        [r1,r2,r3] = [0.3,0.2,0.15];\n        ctx.fillRect(canvaswidth*loc1_x-canvasheight*r1,canvasheight*loc1_y-canvasheight*0.025,canvasheight*r1*2,canvasheight*0.05);\n        ctx.fillRect(canvaswidth*loc2_x-canvasheight*r2,canvasheight*loc2_y-canvasheight*0.025,canvasheight*r2*2,canvasheight*0.05);\n        ctx.fillRect(canvaswidth*loc3_x-canvasheight*r3,canvasheight*loc3_y-canvasheight*0.025,canvasheight*r3*2,canvasheight*0.05);\n    }\n    else if(shape === \"triangle\"){\n        [r1,r2,r3] = [0.4,0.25,0.2];\n        drawTriangle(ctx,loc1_x,loc1_y,r1,canvaswidth,canvasheight);\n        drawTriangle(ctx,loc2_x,loc2_y,r2,canvaswidth,canvasheight);\n        drawTriangle(ctx,loc3_x,loc3_y,r3,canvaswidth,canvasheight);\n    }\n    else if(shape === \"pentagon\"){\n        [r1,r2,r3] = [0.25,0.16,0.12];\n        drawPentagon(ctx,loc1_x,loc1_y,r1,canvaswidth,canvasheight);\n        drawPentagon(ctx,loc2_x,loc2_y,r2,canvaswidth,canvasheight);\n        drawPentagon(ctx,loc3_x,loc3_y,r3,canvaswidth,canvasheight);\n    }\n}\n\nconst colorGenerate = (dan, ene, val, aco, tem) => {\n    //get liveness\n    var tinycolor = require(\"tinycolor2\");\n    var liv, liv_flag;\n    if(val < 0.4) liv_flag = 0.2 * dan + 0.8 * val;\n    else liv_flag = 0.7 * dan + 0.3 * val;\n    if(aco < 0.2) liv_flag += 0.2;\n\n    if(liv_flag > 0.6) liv = 1;\n    else if(liv_flag > 0.35) liv = 0.5;\n    else liv = 0;\n\n    //color generate\n    var bw = 1;\n    if(Math.random() < 0.3) bw = 0;\n\n    var hue, sat, bri;\n    var hue_arg, sat_arg, bri_arg;\n    var text_flag = 1, graph_flag = 1, rand_flag = 1;\n    var hue_flag = 1.0 - val * 0.5 - dan * 0.25 - ene * 0.25;\n\n    if(Math.random() * 10 < 5) rand_flag = -1;\n\n    if(hue_flag < 0.4) hue_arg = 0;\n    else if(hue_flag < 0.6) hue_arg = 0.5;\n    else hue_arg = 1;\n    \n    if(hue_arg === 0.5) hue = (Math.random() * 150 + 120 + 360) % 360;\n    else if(hue_arg === 0) hue = (20 - rand_flag * hue_flag / 0.4 * 35 + rand_flag * Math.random() * 15 + 360) % 360;\n    else if(hue_arg === 1) hue = (185 - rand_flag * (1 - hue_flag) / 0.4 * 110 + rand_flag * Math.random() * 100 + 360) % 360;\n\n    if(aco > 0.5) sat_arg = (((dan * 1.2 + ene * 1.2 - aco * 2.4) * 100) * 0.5) + 50;\n    else if(dan > 0.6) sat_arg = (((dan * 0.4 + ene * 0.6) * 100) * 0.5) + 50;\n    else sat_arg = (((dan * 0.5 + ene * 0.5 - aco * 0.1) * 100) * 0.5) + 50;\n\n    sat = (Math.random() * 10 - 5 + sat_arg) / 100;\n    if(hue_arg === 0.5) sat *= 0.8;\n\n    bri_arg = (((ene * 0.6 + aco * 0.4) * 100) * 0.3) + val * 120;\n    bri = (Math.random() * 20 - 10 + bri_arg) / 100;\n    if(bri > 0.95) bri = 0.95;\n\n    if(sat > 0.7) sat = 0.7;\n    if(sat < 0.2) sat = 0.2;\n\n    if(sat*0.3 + 0.7 - bri < 0){\n        text_flag = 0;\n        graph_flag = 0;\n    }\n\n    var BG = tinycolor(\"hsv(\" + hue + \",\" + sat + \",\" + bri + \")\");\n    var TX = (text_flag === 0) ? tinycolor(\"hsv(\" + (hue + rand_flag * 10 + 360) % 360 + \",\" + 0.9 + \",\" + 0.2 + \")\") : tinycolor(\"hsv(\" + (hue + rand_flag * 10 + 360) % 360 + \",\" + 0.05 + \",\" + 0.95 + \")\");\n    var sat2, bri2;\n    if(graph_flag === 0){\n        sat2 = sat - 0.05;\n        if(sat2 < 0) sat2 = 0;\n        bri2 = bri + 0.1;\n        if(bri2 > 1) bri2 = 1;\n    }\n    else{\n        sat2 = sat + 0.05;\n        if(sat2 > 1) sat2 = 1;\n        bri2 = bri - 0.1;\n        if(bri2 < 0) bri2 = 0;\n    }\n    var GR = tinycolor(\"hsv(\" + (hue + rand_flag * 20 + Math.random() * 10 + 360) % 360 + \",\" + sat2 + \",\" + bri2 + \")\");\n    if(Math.random() > 0 && liv === 1) GR = GR.complement();\n    \n    if(bw === 0){\n        if(Math.random() > 0.5){\n            BG = tinycolor(\"black\");\n            TX = tinycolor(\"white\");\n        }\n        else{\n            TX = tinycolor(\"black\");\n            BG = tinycolor(\"white\");\n        } \n        if(Math.random() > 0.5) GR = GR.greyscale();\n    }\n    \n    var shape = \"circle\", shape_flag = Math.random();\n    if(shape_flag <= 0.2) shape = \"circle\";\n    else if(shape_flag <= 0.4) shape = \"square\";\n    else if(shape_flag <= 0.6) shape = \"line\";\n    else if(shape_flag <= 0.8) shape = \"triangle\";\n    else if(shape_flag <= 1) shape = \"pentagon\";\n\n    return [BG.toString('rgb'),GR.toString('rgb'),TX.toString('rgb'),shape,liv];\n}\n\nconst fontGenerate = (dan, ene, val, aco, tem) => {\n    var fontName, backupFont, r;\n    if(aco > 0.8){\n        if(Math.random() < 0.2 && ene >= 0.35 && val < 0.3) fontName = \"ORADANO明朝\";\n        else fontName = \"源云明体\";\n    }\n    else if(aco>0.55){\n        if(Math.random() < 0.5 && ene * 0.6+dan * 0.4 >= 0.85) fontName = \"源界明朝\";\n        else if(Math.random() < 0.7  &&  ene * 0.6+dan * 0.4 >= 0.7) fontName = \"装甲明朝\";\n        else fontName = \"思源宋体\";\n    }\n    else if(aco > 0.4){\n        if(ene * 0.6 + dan * 0.4 >= 0.85){\n            r = Math.random();\n            if(r < 0.5) fontName = \"源界明朝\";\n            else if(r < 0.75) fontName = \"思源宋体\";\n            else fontName = \"源石黑体\";\n        }\n        else if(ene * 0.6 + dan * 0.4 >= 0.7){\n            r = Math.random();\n            if(r < 0.7) fontName = \"装甲明朝\";\n            else if(r < 0.85) fontName = \"思源宋体\";\n            else fontName = \"源石黑体\";\n        }\n        else fontName = \"源石黑体\";\n    }\n    else if(aco > 0.02){\n        if(tem < 86 && val > 0.45){\n            r = Math.random();\n            if(r < 0.4) fontName = \"思源黑体\";\n            else if(r < 0.6) fontName = \"清松手写体\";\n            else if(r < 0.8) fontName = \"粉圆\";\n            else fontName = \"资源黑体\";\n        }\n        else fontName = \"思源黑体\"; \n    }\n    else{\n        if(tem < 86 && val > 0.45){\n            r = Math.random();\n            if(r < 0.2) fontName = \"未来荧黑\";\n            else if(r < 0.4) fontName = \"思源黑体\";\n            else if(r < 0.6) fontName = \"清松手写体\";\n            else if(r < 0.8) fontName = \"粉圆\";\n            else fontName = \"资源黑体\";\n        }\n        else fontName = \"未来荧黑\";\n    }\n\n    if(fontName === \"ORADANO明朝\" || fontName === \"源云明体\" || fontName === \"源界明朝\" || fontName === \"装甲明朝\") backupFont = \"思源宋体\";\n    else if(fontName === \"源石黑体\") backupFont = \"思源黑体\";\n    else if(fontName === \"粉圆\") backupFont = \"资源黑体\";\n    else backupFont = \"未来荧黑\";\n\n    var letterSpacing = 0;\n    var fontWeight = 300;\n    var fontSize = 60;\n\n    letterSpacing = -0.7949 - 18.2496 * Math.log(ene);\n    fontSize = 40 * Math.pow(7,ene);\n    if(ene < 0.2) fontWeight = 100;\n    else if(ene >= 0.9) fontWeight = 900;\n    else fontWeight = Math.round(ene * 10) * 100;\n\n    return [letterSpacing, fontSize, fontWeight, fontName, backupFont];\n}\n\nconst drawTriangle = (ctx, loc_x, loc_y, r, canvaswidth, canvasheight) => {\n    ctx.beginPath();\n    ctx.moveTo(canvaswidth*loc_x+canvasheight*0.5*r, canvasheight*loc_y+canvasheight*0.433*r);\n    ctx.lineTo(canvaswidth*loc_x-canvasheight*0.5*r, canvasheight*loc_y+canvasheight*0.433*r);\n    ctx.lineTo(canvaswidth*loc_x, canvasheight*loc_y-canvasheight*0.433*r);\n    ctx.fill();\n}\n\nconst drawPentagon = (ctx, loc_x, loc_y, r, canvaswidth, canvasheight) => {\n    ctx.save();\n    ctx.translate(canvaswidth*loc_x, canvasheight*loc_y+canvasheight*r*0.25);\n    ctx.moveTo(0, -canvasheight*r);\n    ctx.beginPath();\n    var i, ang = Math.PI*2/5;\n    for(i = 0; i < 5; i++){\n        ctx.rotate(ang);\n        ctx.lineTo(0, -canvasheight*r);\n    }\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n}\n\nexport default initCanvas;\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { makeStyles, withStyles, Button, Grid, Typography } from '@material-ui/core';\nimport initCanvas from './MoodboardCanvas';\n\nconst useStyles = makeStyles({\n    grid: {\n        height: '100%',\n    },\n    progress: {\n        width: 600,\n    },\n    text: {\n        marginTop: '1em',\n        marginBottom: '8em',\n    },\n    '@global': {\n        '*::-webkit-scrollbar': {\n            width: '0.4em'\n        },\n        '*::-webkit-scrollbar-track': {\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.00)'\n        },\n        '*::-webkit-scrollbar-thumb': {\n            backgroundColor: 'rgba(80,80,80,.1)',\n            outline: '1px solid slategrey'\n        }\n    }\n});\n\nconst CanvasButton = withStyles({\n    root: {\n        boxShadow: 'none',\n        backgroundColor: '#121212',\n        padding: '0 0',\n        '&:hover': {\n            boxShadow: '0 0 0 0.06rem #BBBBBB',\n        },\n        '&:focus': {\n            boxShadow: '0 0 0 0.06rem #BB86FC',\n        },\n    },\n})(Button);\n\nconst [canvaswidth, canvasheight] = [320, 180];\n\nfunction Moodboard({\n    setStep, next,\n    setMoodboard,\n    data: {\n        song,\n        artist,\n        album: { al_name: album },\n        featuress: { tempo, energy, danceability, acousticness, valence }\n    },\n}) {\n    const classes = useStyles();\n    const [index, selectCanvas] = useState(-1);\n    const [mb, setMB] = useState([]);\n    const items = Array.from({length: 200});\n    useEffect(() => {\n        setMB(initCanvas(tempo, energy, danceability, acousticness, valence, song, canvaswidth, canvasheight));\n    }, [acousticness, danceability, energy, song, tempo, valence]);\n    const nextStep = useCallback(() => {\n        setStep(next);\n        setMoodboard(mb[index]);\n    }, [mb, index, setStep, setMoodboard, next]);\n    return (\n        <Grid\n            container\n            spacing={4}\n            className={classes.grid}\n        >\n            <Grid item xs />\n            <Grid item xs={8}>\n                <Typography\n                    align=\"center\"\n                    color=\"textSecondary\"\n                    classes={{ root: classes.text }}\n                >\n                    {song} / {artist} - {album}\n                </Typography>\n                <Grid container\n                    alignItems=\"center\"\n                    justify=\"space-evenly\"\n                    spacing={6}\n                >\n                    <Grid item container direction=\"column\" xs>\n                        <Grid item>\n                            <Typography\n                                color=\"textPrimary\"\n                                variant=\"h4\"\n                            >\n                                选择情绪板\n                            </Typography>\n                        </Grid>\n                        <Grid item>\n                            <Typography\n                                color=\"textSecondary\"\n                                variant=\"body2\"\n                            >\n                                为您的歌词动画选择外观风格\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disableElevation\n                            onClick={nextStep}\n                        >\n                            继续创建\n                        </Button>\n                    </Grid>\n                </Grid>\n                <div style={{height:'80vh', overflow:'hidden auto'}}>\n                    <Grid container \n                        alignItems=\"center\" \n                        justify=\"space-between\" \n                        spacing={6}\n                        className={classes.grid}\n                    >\n                        {items.map((i, index) => (\n                            <Grid item key = {index}>\n                                <CanvasButton>\n                                    <canvas\n                                        id={\"littleCanvas\"+(index+1)}\n                                        width={canvaswidth}\n                                        height={canvasheight}\n                                        onClick={()=>selectCanvas(index+1)}\n                                    >\n                                    </canvas>\n                                </CanvasButton>\n                            </Grid>\n                        ))}\n                    </Grid>\n                </div>\n            </Grid>\n            <Grid item xs />\n        </Grid>\n    )\n}\n\nexport default Moodboard;\n","import React, { useEffect, useMemo } from 'react';\nimport { makeStyles, LinearProgress, Grid } from '@material-ui/core';\nimport { Lrc } from 'lrc-kit';\nimport logo from '../assets/logo-colored.svg';\n\nfunction FetchData({ id, setData, ...params }) {\n    const action = useMemo(async () => {\n        const resp = await fetch(`https://dcdcapi.herokuapp.com/song/${id}`);\n        const data = await resp.json();\n        setData(data);\n    }, [id, setData]);\n    return (\n        <Loading {...params} action={action} />\n    );\n}\n\nfunction FetchFont({\n    data: { lrc },\n    moodboard: { fontName: family, fontWeight: weight },\n    ...params\n}) {\n    const action = useMemo(async () => {\n        const { lyrics } = Lrc.parse(lrc);\n        const chs = new Set();\n        for (const { content } of lyrics) {\n            for (const ch of content) {\n                chs.add(ch);\n            }\n        }\n        const resp = await fetch('https://dcdcapi.herokuapp.com/font', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                font: family,\n                weight: weight,\n                glyphs: Array.from(chs).join(''),\n            }),\n        });\n        const blob = await resp.arrayBuffer();\n        const font = new FontFace(family, blob, { weight });\n        await font.load();\n        document.fonts.add(font);\n    }, [family, lrc, weight]);\n    return (\n        <Loading {...params} action={action} />\n    );\n}\n\nconst useStyles = makeStyles({\n    grid: {\n        height: '100%',\n    },\n    progress: {\n        width: 600,\n    },\n});\n\nfunction Loading({ setStep, next, action }) {\n    const classes = useStyles();\n    useEffect(() => {\n        (async () => {\n            try {\n                loadFont();\n                await action;\n                setStep(next);\n            } catch (e) {\n                console.log(e);\n            }\n        })();\n    }, [setStep, action, next]);\n\n    return (\n        <Grid\n            container\n            justify=\"center\"\n            spacing={4}\n            className={classes.grid}\n            alignItems=\"center\"\n            direction=\"column\"\n        >\n            <Grid item>\n                <img src={logo} alt=\"\" height=\"51\" />\n            </Grid>\n            <Grid item classes={{ root: classes.progress }}>\n                <LinearProgress />\n            </Grid>\n        </Grid>\n    );\n}\n\nconst loadFont = async() => {\n    let font = new FontFace('未来荧黑subfont', 'url(未来荧黑subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('思源黑体subfont', 'url(思源黑体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('源石黑体subfont', 'url(源石黑体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('清松手写体subfont', 'url(清松手写体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('粉圆subfont', 'url(粉圆subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('资源黑体subfont', 'url(资源黑体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('思源宋体subfont', 'url(思源宋体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('源云明体subfont', 'url(源云明体subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('装甲明朝subfont', 'url(装甲明朝subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('源界明朝subfont', 'url(源界明朝subfont.ttf)');\n    await font.load();\n    document.fonts.add(font);\n    font = new FontFace('ORADANO明朝subfont', 'url(ORADANO明朝subfont.ttf)');\n    await font.load();\n}\n\nexport { FetchData, FetchFont };\n","function Length({ time }) {\n    const secs = Math.round(time);\n    const s = secs % 60, m = ~~(secs / 60);\n    const ss = s < 10 ? `0${s}` : `${s}`, sm = m < 10 ? `0${m}` : `${m}`;\n    return `${sm}:${ss}`;\n}\n\nexport default Length;\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { makeStyles, Button, Grid, Typography, Slider } from '@material-ui/core';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport grey from '@material-ui/core/colors/grey';\nimport Draggable from 'react-draggable'; // The default\nimport useDimensions from \"react-use-dimensions\";\nimport * as _ from 'lodash';\nimport Length from './Length';\n\nconst useStyles = makeStyles({\n    grid: {\n        height: '100%',\n    },\n    progress: {\n        width: 600,\n    },\n    text: {\n        marginTop: '1em',\n        marginBottom: '8em',\n    },\n    content: {\n        marginTop: '26vh',\n    },\n    time: {\n        marginLeft: 40,\n    },\n    sections: {\n        marginTop: -16,\n        position: 'relative',\n        height: 16,\n    },\n    section: {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        border: '1px solid #121212',\n        cursor: 'pointer',\n        '&:hover': {\n            outline: '1px solid #BB86FC',\n            border: '1px solid #BB86FC',\n        },\n    },\n    edge: {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        zIndex: 2,\n        width: 6,\n        marginLeft: -3,\n        '&:hover': {\n            backgroundColor: '#BB86FC',\n        },\n        cursor: 'ew-resize',\n    },\n});\n\nfunction Segmentation({\n    setStep, next, prev,\n    setData,\n    data: { sections },\n    data,\n}) {\n    const [localData, setLocalData] = useState(data);\n    const {\n        song,\n        artist,\n        album: { al_name: album },\n        sections: localSections,\n        featuress: { duration_s: length },\n        url,\n    } = localData;\n\n    const classes = useStyles();\n    const nextStep = useCallback(() => {\n        setStep(next);\n    }, [setStep, next]);\n    const prevStep = useCallback(() => {\n        setStep(prev);\n    }, [setStep, prev]);\n    const audio = useMemo(() => {\n        return new Audio(url);\n    }, [url]);\n    useEffect(() => {\n        if (!audio) return;\n        return () => audio.pause();\n    }, [audio]);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [playing, setPlaying] = useState(false);\n    useEffect(() => {\n        if (!audio) return;\n        const onUpdate = () => setCurrentTime(audio.currentTime);\n        const onPlay = () => setPlaying(true);\n        const onPause = () => setPlaying(false);\n        audio.addEventListener('timeupdate', onUpdate);\n        audio.addEventListener('play', onPlay);\n        audio.addEventListener('pause', onPause);\n        return () => {\n            audio.removeEventListener('timeupdate', onUpdate);\n            audio.removeEventListener('play', onPlay);\n            audio.removeEventListener('pause', onPause);\n        };\n    }, [audio]);\n    const onSeek = useCallback((_, newVal) => {\n        audio.currentTime = newVal;\n    }, [audio]);\n    const play = useCallback(() => audio.play(), [audio]);\n    const pause = useCallback(() => audio.pause(), [audio]);\n\n    const [ref, { width }] = useDimensions();\n\n    return (\n        <Grid\n            container\n            spacing={4}\n            className={classes.grid}\n        >\n            <Grid item xs />\n            <Grid item xs={8}>\n                <Typography\n                    align=\"center\"\n                    color=\"textSecondary\"\n                    classes={{ root: classes.text }}\n                >\n                    {song} / {artist} - {album}\n                </Typography>\n                <Grid container alignItems=\"center\" justify=\"space-between\" spacing={2}>\n                    <Grid item container direction=\"column\" xs>\n                        <Grid item>\n                            <Typography\n                                color=\"textPrimary\"\n                                variant=\"h4\"\n                            >\n                                调整歌曲分段\n                            </Typography>\n                        </Grid>\n                        <Grid item>\n                            <Typography\n                                color=\"textSecondary\"\n                                variant=\"body2\"\n                            >\n                                拖动段落以调整起止时间\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            variant=\"outlined\"\n                            color=\"primary\"\n                            disableElevation\n                            onClick={prevStep}\n                        >\n                            上一步\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disableElevation\n                            onClick={nextStep}\n                        >\n                            继续创建\n                        </Button>\n                    </Grid>\n                </Grid>\n                <div className={classes.content}>\n                    <Typography className={classes.time} color=\"textPrimary\" variant=\"body2\">\n                        <Length time={currentTime} />\n                        &nbsp;/&nbsp;\n                        <Length time={length} />\n                    </Typography>\n                    <Grid container spacing={2} alignItems=\"center\">\n                        <Grid item>\n                            {playing ? (\n                                <PauseIcon\n                                    style={{\n                                        color: grey[100],\n                                        cursor: 'pointer',\n                                    }}\n                                    onClick={pause}\n                                />\n                            ) : (\n                                <PlayArrowIcon\n                                    style={{\n                                        color: grey[100],\n                                        cursor: 'pointer',\n                                    }}\n                                    onClick={play}\n                                />\n                            )}\n                        </Grid>\n                        <Grid item xs>\n                            <Slider value={currentTime} onChange={onSeek} max={length} />\n                        </Grid>\n                    </Grid>\n                    <Grid container spacing={2} alignItems=\"center\">\n                        <Grid item>\n                            <PlayArrowIcon style={{ color: \"#121212\" }} />\n                        </Grid>\n                        <Grid item xs>\n                            <div className={classes.sections} ref={ref}>\n                                {localSections.map(({ start, climax }, i) => (\n                                    <div\n                                        key={`section-${i}`}\n                                        className={classes.section}\n                                        style={{\n                                            left: `${start / length * 100}%`,\n                                            right: `${100 - (i === localSections.length - 1 ? length : localSections[i + 1].start) / length * 100}%`,\n                                            backgroundColor: climax === 0 ? '#03DAC5' : '#F2994A',\n                                        }}\n                                        onClick={() => {\n                                            const newData = _.cloneDeep(localData);\n                                            newData.sections[i].climax = 1 - climax;\n                                            setLocalData(newData);\n                                            setData(newData);\n                                        }}\n                                    />\n                                ))}\n                                {new Array(sections.length - 1).fill(0).map((_, i) => i + 1).map(i => (\n                                    <Draggable\n                                        key={`handle=${i}-${sections[i].start}`}\n                                        axis=\"x\"\n                                        bounds={{\n                                            left: -(sections[i].start - sections[i - 1].start) / length * width,\n                                            right: (i === sections.length - 1 ? length : sections[i + 1].start - sections[i].start) / length * width,\n                                        }}\n                                        onDrag={(__, { x }) => {\n                                            const newData = _.cloneDeep(data);\n                                            newData.sections[i].start += x / width * length;\n                                            const end = i === newData.sections.length - 1 ? length : newData.sections[i + 1].start;\n                                            newData.sections[i].duration = end - newData.sections[i].start;\n                                            if (i > 0) newData.sections[i - 1].duration = newData.sections[i].start - newData.sections[i - 1].start;\n                                            setLocalData(newData);\n                                        }}\n                                        onStop={() => {\n                                            setData(localData);\n                                        }}\n                                    >\n                                        <div\n                                            className={classes.edge}\n                                            style={{\n                                                left: sections[i].start / length * width, // unchanged while dragging\n                                            }}\n                                        />\n                                    </Draggable>\n                                ))}\n                            </div>\n                        </Grid>\n                    </Grid>\n                    <Grid container spacing={2} alignItems=\"center\">\n                        <Grid item>\n                            <PlayArrowIcon style={{ color: \"#121212\" }} />\n                        </Grid>\n                        <Grid item xs>\n                            <Typography color=\"textSecondary\" variant=\"body2\" style={{ marginTop: -16 }}>\n                                蓝绿色为普通段，橙色为高潮段，鼠标左击色块可在普通/高潮段状态间切换\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                </div>\n            </Grid>\n            <Grid item xs />\n        </Grid>\n    )\n}\n\nexport default Segmentation;\n","import React from 'react';\nimport { Node, Socket, Control } from 'rete-react-render-plugin';\nimport * as _ from 'lodash';\nimport DatGui, {\n    DatBoolean, DatColor, DatNumber, DatString, DatSelect,\n} from 'react-dat-gui';\nimport typeName from 'type-name';\nimport 'react-dat-gui/dist/index.css';\nimport './styles.css';\n\nfunction Label({ name, align = 'left' }) {\n    return (\n        <li className=\"cr text\">\n            <label style={{ justifyContent: {\n                    left: 'flex-start',\n                    middle: 'center',\n                    right: 'flex-end',\n                }[align] }}>\n                <span style={{ lineHeight: '25px' }}>\n                    {name}\n                </span>\n            </label>\n        </li>\n    );\n}\n\nfunction DefaultInput({ name, inputDef: { type, defaultVal, options, controlType }, inputDef, io, ...props }) {\n    if (io.connections.length !== 0) return <Label name={name} />\n\n    if (!type) type = typeName(defaultVal);\n    if (!controlType) controlType = type;\n\n    if (controlType === 'string') return <DatString path={name} label={name} {...props} />\n    if (controlType === 'boolean') return <DatBoolean path={name} label={name} {...props} />\n    if (controlType === 'number') {\n        const { min, max, step = 0.01 } = inputDef;\n        return <DatNumber path={name} label={name} min={min} max={max} step={step} {...props} />\n    }\n    if (controlType === 'color') return <DatColor path={name} label={name} {...props} />\n    if (controlType === 'select') return <DatSelect path={name} label={name} options={options} {...props} />\n    return <Label name={name} />\n}\n\nfunction Wrapper({ children, className, onPointerMove, ...props }) {\n    return (\n        <div className={className} onPointerMove={onPointerMove}>\n            {children(props)}\n        </div>\n    );\n}\n\nclass MyNode extends Node {\n    componentDidMount() {\n        const { node } = this.props;\n        const initialState = _.fromPairs(_\n            .toPairs(node.inputDefs)\n            .map(([name, { defaultVal }]) => [name, defaultVal]));\n        this.setState({ data: initialState });\n    }\n\n    render() {\n        const { node, editor, bindSocket, bindControl } = this.props;\n        const { data, outputs, controls, inputs /*, selected */ } = this.state;\n\n        return (\n            <DatGui\n                data={data}\n                onUpdate={(newData) => {\n                    newData = { ...data, ...newData };\n                    for (const key in newData) {\n                        const { convert } = node.inputDefs[key];\n                        if (convert) newData[key] = convert(newData[key]);\n                    }\n                    node.data = newData;\n                    this.setState({ data: newData });\n                    editor.trigger('process');\n                }}\n                style={{\n                    position: 'relative',\n                    backgroundColor: '#1A1A1A',\n                }}\n            >\n                <Wrapper>\n                    {() => <>\n                        <Label name={node.name} align=\"middle\" />\n                    </>}\n                </Wrapper>\n                {outputs.map((output) => (\n                    <Wrapper className=\"retex-port retex-output\" key={output.key}>\n                        {() => <>\n                            <Label name={output.name} align=\"right\" />\n                            <Socket type=\"output\" socket={output.socket} io={output} innerRef={bindSocket} />\n                        </>}\n                    </Wrapper>\n                ))}\n                {controls.map(control => (\n                    <Control className=\"control\" key={control.key} control={control} innerRef={bindControl} />\n                ))}\n                {inputs.map(input => (\n                    <Wrapper className=\"retex-port retex-input\" key={input.key} onPointerMove={(e) => { e.stopPropagation(); }}>\n                        {props => <>\n                            <Socket type=\"input\" socket={input.socket} io={input} innerRef={bindSocket} />\n                            {!input.showControl() && <DefaultInput name={input.name} inputDef={node.inputDefs[input.name]} io={input} {...props} />}\n                            {input.showControl() && <Control className=\"input-control\" control={input.control} innerRef={bindControl} />}\n                        </>}\n                    </Wrapper>\n                ))}\n            </DatGui>\n        )\n    }\n}\n\nexport default MyNode;\n","import Rete from 'rete';\n\nconst sockets = new Proxy({\n    any: new Rete.Socket('any'),\n}, {\n    get(obj, prop) {\n        if (!(prop in obj)) {\n            obj[prop] = new Rete.Socket(prop);\n            obj[prop].combineWith(obj.any);\n        }\n        return obj[prop];\n    }\n});\n\nexport default sockets;\n","import Rete from 'rete';\nimport typeName from 'type-name';\nimport * as _ from 'lodash';\n\nimport sockets from '../retex/sockets';\n\nclass BeanComponent extends Rete.Component {\n    constructor(name, inputDefs, outputDefs) {\n        super(name);\n        this.inputDefs = inputDefs;\n        this.outputDefs = outputDefs;\n    }\n    \n    builder(node) {\n        node.inputDefs = _.cloneDeep(this.inputDefs);\n        for (const key of Object.keys(node.inputDefs)) {\n            if (key in node.data) node.inputDefs[key].defaultVal = node.data[key];\n        }\n        node.outputDefs = this.outputDefs;\n        \n        for (let [name, { type, defaultVal, displayName = name }] of _.toPairs(this.inputDefs)) {\n            if (!type) type = typeName(defaultVal);\n            if (name in node.data) defaultVal = node.data[name];\n            const input = new Rete.Input(name, displayName, sockets.any);\n            if (!(name in node.data)) {\n                node.data[name] = defaultVal;\n            }\n            node.addInput(input);\n        }\n        for (const [name, { /* type, */ displayName = name }] of _.toPairs(this.outputDefs)) {\n            const output = new Rete.Output(name, displayName, sockets.any);\n            node.addOutput(output);\n        }\n        return node;\n    }\n}\n\nexport { BeanComponent };\n","import { BeanComponent } from './BeanComponent';\n\nclass InitiatorComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Initiator',\n            {},\n            {},\n        );\n    }\n\n    async worker() {}\n}\n\nexport default InitiatorComponent;\n","import { BeanComponent } from './BeanComponent';\nimport * as _ from 'lodash';\n\nclass InputComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Input',\n            {\n                key: { type: 'string' },\n                type: { defaultVal: 'number', type: 'string', controlType: 'select', options: ['number', 'string'] },\n            },\n            {\n                val: { type: 'any', controlType: 'string', },\n            },\n        );\n    }\n\n    convert(value, type) {\n        if (type === 'number' && typeof value === 'string') return parseFloat(value);\n        if (type === 'string' && typeof value === 'number') return `${value}`;\n        return value;\n    }\n\n    * worker({ key, type }, __, { inputs }) {\n        const values = _.get(inputs, key);\n        if (values instanceof Array) {\n            for (const value of values) {\n                yield {\n                    val: this.convert(value, type),\n                };\n            }\n        } else {\n            yield {\n                val: this.convert(values, type),\n            };\n        }\n    }\n}\n\nclass OutputComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Output',\n            {\n                key: { type: 'string' },\n                val: { type: 'any', controlType: 'string' },\n            },\n            {},\n        );\n    }\n\n    * worker({ val, key }, __, { outputs }) {\n        // if (!_.has(outputs, key)) _.set(outputs, key, []);\n        // _.get(outputs, key).push(val);\n        _.set(outputs, key, val);\n        yield;\n    }\n}\n\nexport default [\n    InputComponent,\n    OutputComponent,\n];\n","import { BeanComponent } from './BeanComponent';\nimport { Parser } from 'expr-eval';\n\nclass ArithmeticComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Eval',\n            {\n                expr: { defaultVal: 'x' },\n                x: { defaultVal: '0', type: 'number' },\n            },\n            {\n                y: { type: 'number' },\n            },\n        );\n        this.parser = new Parser();\n    }\n\n    * worker({ expr, x }) {\n        const parsed = this.parser.parse(expr);\n        yield {\n            y: parsed.evaluate({ x }),\n        };\n    }\n}\n\nclass Arithmetic2Component extends BeanComponent {\n    constructor() {\n        super(\n            'Eval2',\n            {\n                expr: { defaultVal: 'x + y' },\n                x: { defaultVal: '0', type: 'number' },\n                y: { defaultVal: '0', type: 'number' },\n            },\n            {\n                z: { type: 'number' },\n            },\n        );\n        this.parser = new Parser();\n    }\n\n    * worker({ expr, x, y }) {\n        const parsed = this.parser.parse(expr);\n        yield {\n            z: parsed.evaluate({ x, y }),\n        };\n    }\n}\n\nclass ConstComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Const',\n            {\n                val: { type: 'any', controlType: 'string' },\n                type: { defaultVal: 'number', type: 'string', controlType: 'select', options: ['number', 'string'] },\n            },\n            {\n                val: { type: 'string' },\n            },\n        );\n    }\n\n    * worker({ val, type }) {\n        if (type === 'number') val = parseFloat(val);\n        yield { val };\n    }\n}\n\nexport default [\n    ArithmeticComponent,\n    Arithmetic2Component,\n    ConstComponent,\n];\n","/* eslint-disable default-case */\nimport { BeanComponent } from '../BeanComponent';\n\nconst textWidth = (text, sizes, spacing) => {\n    // VERY SIMPLE\n    // return size * text.length + spacing * size * (text.length - 1);\n    let width = 0;\n    for (let i = 0; i < text.length; ++i) {\n        width += sizes[i] * (1 + spacing);\n    }\n    width -= sizes[0] * spacing / 2;\n    width -= sizes[text.length - 1] * spacing / 2;\n    return width;\n}\n\nclass FontComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Font',\n            {\n                text: { defaultVal: '被害妄想携帯女子' },\n                x0: { defaultVal: 960, min: -1000, max: 3000 },\n                y0: { defaultVal: 540, min: -1000, max: 3000 },\n                size: { defaultVal: 90, min: 10, max: 400 },\n                dir: { defaultVal: 'horizontal', type: 'string', controlType: 'select', options: ['horizontal', 'vertical'] },\n                align: { defaultVal: 'begin', type: 'string', controlType: 'select', options: ['begin', 'middle', 'end'] },\n                spacing: { defaultVal: 0, min: -2, max: 2 },\n                ignoreWhitespaces: { defaultVal: true },\n                alignBaseline: { defaultVal: true },\n            },\n            {\n                i: { type: 'number' },\n                ch: { type: 'string' },\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                size: { type: 'number' },\n            },\n        );\n    }\n\n    async * worker({\n        text, x0, y0,\n        size, dir, align,\n        spacing, ignoreWhitespaces,\n        alignBaseline,\n    }) {\n        if (ignoreWhitespaces) text = text.split(/\\s+/).join('');\n        let x = x0, y = y0;\n        const sizes = new Array(text.length).fill(size);\n        const width = textWidth(text, sizes, spacing);\n        if (align === 'middle') {\n            switch (dir) {\n                case 'horizontal':\n                    x -= width / 2;\n                    break;\n                case 'vertical':\n                    y -= width / 2;\n                    break;\n            }\n        }\n        if (align === 'end') {\n            switch (dir) {\n                case 'horizontal':\n                    x -= width;\n                    break;\n                case 'vertical':\n                    y -= width;\n                    break;\n            }\n        }\n        switch (dir) {\n            case 'horizontal':\n                x += sizes[0] / 2;\n                break;\n            case 'vertical':\n                y += sizes[0] / 2;\n                break;\n        }\n        for (let i = 0; i < text.length; ++i) {\n            const ch = text[i];\n            const bx = x;\n            const by = alignBaseline && dir === 'horizontal' ? y - (sizes[i] - size) / 2 : y;\n            yield {\n                i,\n                ch,\n                x0: bx,\n                y0: by,\n                size: sizes[i],\n            };\n            switch (dir) {\n                case 'horizontal':\n                    x += (sizes[i] + sizes[i + 1]) * (1 + spacing) / 2;\n                    break;\n                case 'vertical':\n                    y += (sizes[i] + sizes[i + 1]) * (1 + spacing) / 2;\n                    break;\n            }\n        }\n        this.closed = ['cc'];\n    }\n}\n\nexport default FontComponent;\n","import CanvasComponent from './CanvasComponent';\nimport FontComponent from './FontComponent';\nimport CharComponent from './CharComponent';\n\nexport default [\n    CanvasComponent,\n    FontComponent,\n    CharComponent,\n];\n","import { BeanComponent } from '../BeanComponent';\n\nclass CanvasComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Canvas',\n            {\n                width: { defaultVal: 1920, min: 360, max: 2160 },\n                height: { defaultVal: 1080, min: 240, max: 1920 },\n                background: { type: 'color', defaultVal: '#F2F2F2' },\n            },\n            {\n                ctx: { type: 'canvas' },\n            },\n        );\n    }\n\n    async * worker({ width, height, background }, __, { inputs: { canvas } }) {\n        canvas.width = width;\n        canvas.height = height;\n        const scale = Math.min(canvas.parentNode.clientWidth / canvas.width, canvas.parentNode.clientHeight / canvas.height);\n        canvas.style.transform = `scale(${scale})`;\n        canvas.style.marginLeft = `${-width / 2}px`;\n        canvas.style.marginTop = `${-height / 2}px`;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = background;\n        ctx.fillRect(0, 0, width, height);\n        yield { ctx };\n    }\n}\n\nexport default CanvasComponent;\n","import { BeanComponent } from '../BeanComponent';\n\nclass CharComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Char',\n            {\n                ctx: { type: 'canvas', required: true },\n                ch: { defaultVal: '' },\n                x0: { defaultVal: 960, min: -1000, max: 3000 },\n                y0: { defaultVal: 540, min: -1000, max: 3000 },\n                size: { defaultVal: 90, min: 10, max: 400 },\n                rotate: { defaultVal: 0, min: -1, max: 1 },\n                color: { defaultVal: '#000000', type: 'color' },\n                fontFamily: { defaultVal: 'Hiragino Mincho Pro' },\n                fontWeight: { defaultVal: 900, min: 100, max: 900, step: 100 },\n            },\n            {},\n        );\n    }\n\n    * worker({\n        ctx, ch, x0, y0,\n        size, rotate, color,\n        fontFamily, fontWeight,\n    }) {\n        ctx.textBaseline = 'middle';\n        ctx.textAlign = 'center';\n        ctx.fillStyle = color;\n        ctx.font = `${fontWeight} ${size}px '${fontFamily}'`;\n        ctx.save();\n        ctx.translate(x0, y0);\n        ctx.rotate(rotate * Math.PI);\n        ctx.fillText(ch, 0, 0);\n        ctx.restore();\n        yield;\n    }\n}\n\nexport default CharComponent;\n","import { BeanComponent } from '../BeanComponent';\n\nclass SplitComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Split',\n            {\n                text: { defaultVal: '被害妄想携帯女子' },\n                parts: { defaultVal: 2, min: 1, max: 5, step: 1 },\n                randomness: { defaultVal: 2, min: 0, max: 4, },\n            },\n            {\n                parts: { type: 'number' },\n                i: { type: 'number' },\n                text: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker({ text, parts, randomness }) {\n        const step = text.length / parts;\n        const deltas = [0, ...new Array(parts - 1).fill(0).map(() => (Math.random() - 0.5) * 2 * randomness), 0];\n        for (let i = 0; i < parts; ++i) {\n            const begin = Math.round(i * step + deltas[i]);\n            const end = Math.round((i + 1) * step + deltas[i + 1]);\n            yield {\n                parts,\n                i,\n                text: text.substring(begin, end),\n            };\n        }\n    }\n}\n\nexport default SplitComponent;\n","const interp = (width, height, a, b, dir = 'horizontal') => {\n    switch (dir) {\n        case 'horizontal': return {\n            x: a * width, y: b * height,\n        }\n        case 'vertical': return {\n            x: b * width, y: a * height,\n        }\n        default: return { x: 0, y: 0 };\n    }\n}\n\nconst divide = (parts, i) => {\n    return 1 / (parts + 1) * (i + 1);\n}\n\nconst uniform = (min, max) => {\n    return Math.random() * (max - min) + min;\n}\n\nconst translate = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n    return { x: x1 + x2, y: y1 + y2 };\n}\n\nconst scatter = (val, dir, opposite = false, mirrored = false) => {\n    if (opposite) dir = { vertical: 'horizontal', horizontal: 'vertical' }[dir];\n    switch (dir) {\n        case 'horizontal': return {\n            x: mirrored ? -val : val, y: 0,\n        }\n        case 'vertical': return {\n            x: 0, y: val,\n        }\n        default: return { x: 0, y: 0 };\n    }\n}\n\nconst opposite = (n, f) => {\n    return f ? 1 - n : n;\n}\n\nconst choose = (...choices) => {\n    choices = choices.map(v => typeof v === 'object' ? v : { value: v });\n    const sum = choices.map(({ weight = 1 }) => weight).reduce((a, b) => a + b);\n    let n = Math.random() * sum;\n    for (const { value, weight = 1 } of choices) {\n        if (weight >= n) return value;\n        else n -= weight;\n    }\n    return choices[choices.length - 1].value;\n}\n\nexport { interp, divide, uniform, scatter, translate, opposite, choose };\n","import { BeanComponent } from '../BeanComponent';\nimport { interp, divide } from '../utils';\n\nclass BalancedAComponent extends BeanComponent {\n    constructor() {\n        super(\n            'BalancedA',\n            {\n                width: { type: 'number' },\n                height: { type: 'number' },\n                i: { type: 'number' },\n                parts: { type: 'number' },\n                dist: { defaultVal: 0.7, min: 0, max: 1, },\n                dir: { defaultVal: 'horizontal', type: 'string', controlType: 'select', options: ['horizontal', 'vertical'] },\n            },\n            {\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                dir: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker({ width, height, i, parts, dist, dir }) {\n        const { x, y } = interp(width, height, 0.5, (divide(parts, i) - 0.5) * dist + 0.5, dir);\n        yield {\n            x0: x,\n            y0: y,\n            dir,\n            align: 'middle',\n        };\n    }\n}\n\nexport default BalancedAComponent;\n","import { BeanComponent } from '../BeanComponent';\nimport pickRandom from 'pick-random';\n\nclass BalancedBComponent extends BeanComponent {\n    constructor() {\n        super(\n            'BalancedB',\n            {\n                text: { type: 'string' },\n                rows: { defaultVal: 3, min: 2, max: 4, step: 1 },\n                cols: { defaultVal: 4, min: 2, max: 4, step: 1 },\n                dist: { defaultVal: 2, min: 0.5, max: 10 },\n                width: { type: 'number' },\n                height: { type: 'number' },\n                size: { type: 'number' },\n            },\n            {\n                text: { type: 'string' },\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                align: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker ({ text, rows, cols, dist, width, height, size }) {\n        const indices = pickRandom(\n            new Array(cols).fill(0).map(\n                (_, u) => new Array(rows).fill(0).map((_, v) => ({ u, v }))\n            ).reduce((a, b) => [...a, ...b], []),\n            { count: Math.min(rows * cols, text.length) },\n        ).sort(({ u: u1, v: v1 }, { u: u2, v: v2 }) => v2 === v1 ? (u1 - u2) : (v1 - v2));\n\n        for (let i = 0; i < indices.length; ++i) {\n            const { u, v } = indices[i];\n            const x = width / 2 + (u - (cols - 1) / 2) * dist * size;\n            const y = height / 2 + (v - (rows - 1) / 2) * dist * size;\n            yield {\n                text: text[i],\n                x0: x,\n                y0: y,\n                align: 'middle',\n            };\n        }\n    }\n}\n\nexport default BalancedBComponent;\n","import { BeanComponent } from '../BeanComponent';\nimport { interp, opposite, scatter, translate } from '../utils';\n\nclass NeutralComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Neutral',\n            {\n                width: { type: 'number' },\n                height: { type: 'number' },\n                i: { type: 'number' },\n                size: { type: 'number' },\n                lineSpacing: { defaultVal: 1.5, min: 0.5, max: 5, },\n                dir: { defaultVal: 'horizontal', type: 'string', controlType: 'select', options: ['horizontal', 'vertical'] },\n                align: { defaultVal: 'begin', type: 'string', controlType: 'select', options: ['begin', 'end'] },\n                position: { defaultVal: 'left', type: 'string', controlType: 'select', options: ['left', 'right'] },\n                x0: { defaultVal: 0.15, min: 0.1, max: 0.25 },\n                y0: { defaultVal: 0.3, min: 0.1, max: 0.5 },\n            },\n            {\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                dir: { type: 'string' },\n                align: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker({ width, height, size, lineSpacing, i, dir, align, position, x0, y0 }) {\n        const x = opposite(x0, align === 'end');\n        const y = opposite(y0, position === 'right');\n        let point = interp(width, height, x, y, dir);\n        const delta = scatter(size * lineSpacing * (position === 'left' ? 1 : -1), dir, true);\n        for (; i > 0; --i) point = translate(point, delta);\n        yield {\n            x0: point.x,\n            y0: point.y,\n            dir,\n            align,\n        };\n    }\n}\n\nexport default NeutralComponent;\n","import { BeanComponent } from '../BeanComponent';\nimport { interp, opposite } from '../utils';\n\nclass ActiveAComponent extends BeanComponent {\n    constructor() {\n        super(\n            'ActiveA',\n            {\n                width: { type: 'number' },\n                height: { type: 'number' },\n                i: { type: 'number' },\n                angle: { defaultVal: -0.2, min: -1, max: 1 },\n                dir: { defaultVal: 'horizontal', type: 'string', controlType: 'select', options: ['horizontal', 'vertical'] },\n                x0: { defaultVal: 0.35, min: 0.25, max: 0.5 },\n                y0: { defaultVal: 0.25, min: 0.15, max: 0.4 },\n            },\n            {\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                dir: { type: 'string' },\n                rotate: { type: 'number' },\n                align: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker({ width, height, i, angle, dir, x0: a, y0: b }) {\n        const rx = opposite(a, i === 1);\n        const ry = opposite(b, i === 1);\n        const { x, y } = interp(width, height, rx, ry, dir);\n        yield {\n            x0: x,\n            y0: y,\n            dir,\n            rotate: angle * Math.PI / 2,\n            align: 'middle',\n        };\n    }\n}\n\nexport default ActiveAComponent;\n","import { BeanComponent } from '../BeanComponent';\nimport inside from 'point-in-polygon';\nimport pickRandom from 'pick-random';\nimport { uniform } from '../utils';\n\nconst distToShape = ({ x: x1, y: y1, r: r1 }, { x: x2, y: y2 }) => {\n    // Chebyshev distance\n    const dist = Math.max(Math.abs(x2 - x1), Math.abs(y2 - y1));\n    return dist - r1;\n}\n\nconst distToLine = ({ x: x1, y: y1 }, { x: x2, y: y2 }, { x, y }) => {\n    // euclidian distance to line\n    const dist = Math.abs((y2 - y1) * x - (x2 - x1) * y + x2 * y1 - y2 * x1)\n        / Math.sqrt(Math.pow(y2 - y1, 2) + Math.pow(x2 - x1, 2));\n    const angle = Math.atan2(y2 - y1, x2 - x1);\n    return Math.abs(dist / Math.sin(angle + Math.PI / 4)) / Math.sqrt(2);\n}\n\nconst dist = (bounds, shapes, point) => {\n    let dist = shapes\n        .map(shape => distToShape(shape, point))\n        .reduce((a, b) => Math.min(a, b), 100000);\n    for (let i = 0; i < bounds.length; ++i) {\n        const p1 = bounds[i], p2 = bounds[(i + 1) % bounds.length];\n        const newDist = distToLine(p1, p2, point);\n        if (newDist < dist) dist = newDist;\n    }\n    return dist;\n}\n\nconst bestCandidate = (bounds, { tries, width, height, maxR, minR = 0 }) => {\n    const shapes = [];\n    const polygon = bounds.map(({ x, y }) => [x, y]);\n    for (let i = 0; i < tries; ++i) {\n        const x = uniform(0, width);\n        const y = uniform(0, height);\n        if (!inside([x, y], polygon)) continue;\n        const d = Math.min(maxR, dist(bounds, shapes, { x, y }));\n        if (d <= minR) continue;\n        shapes.push({ x, y, r: d });\n    }\n    return shapes;\n}\n\nconst sort = (chosen, { debug, angle, scale }) => {\n    const chains = [];\n    chosen = chosen.sort(({ x: x1, y: y1 }, { x: x2, y: y2 }) => (x1 + y1) - (x2 + y2));\n    while (chosen.length > 0) {\n        // characters that is on the leftmost must be beginning of chain\n        const chain = [];\n        chain.push(chosen.splice(0, 1)[0]);\n        while (true) {\n            const { x: x1, y: y1, r: r1 } = chain[chain.length - 1];\n            const candidates = [...chosen]\n                .map((shape, i) => ({ ...shape, i }))\n                .map(({ x: x2, y: y2, r: r2, i }) => ({\n                    x: x2, y: y2, r: r2, i,\n                    s: Math.abs(Math.atan2(-(y2 - y1), x2 - x1)) / angle,\n                    d: (x2 - x1) / r1 / scale,\n                }))\n                .filter(({ s }) => s < 1)\n                .map(({ d, s, ...rest }) => ({\n                    ...rest,\n                    k: s + d,\n                }))\n                .sort(({ k: k1 }, { k: k2 }) => k1 - k2);\n            if (candidates.length === 0) break;\n            chain.push(chosen.splice(candidates[0].i, 1)[0]);\n        }\n        chains.push(chain);\n    }\n    return chains\n        .sort(([{ y: y1 }], [{ y: y2 }]) => y1 - y2)\n        .reduce((a, b) => [...a, ...b], []);\n}\n\n\nclass ActiveBComponent extends BeanComponent {\n    constructor() {\n        super(\n            'ActiveB',\n            {\n                width: { type: 'number' },\n                height: { type: 'number' },\n                text: { type: 'string' },\n                size: { type: 'number' },\n                dimension: { type: 'dimension' },\n                tries: { defaultVal: 10000, min: 100, max: 50000, step: 100 },\n                minR: { defaultVal: 0.78, min: 0, max: 1 },\n                sort: { defaultVal: true },\n                sortAngle: { defaultVal: 0.2, min: 0, max: 0.5 },\n                sortScale: { defaultVal: 3.0, min: 0, max: 10 },\n            },\n            {\n                i: { type: 'number' },\n                text: { type: 'string' },\n                x0: { type: 'number' },\n                y0: { type: 'number' },\n                size: { type: 'number' },\n                align: { type: 'string' },\n            },\n        );\n    }\n\n    async * worker({ width, height, text, tries, size, minR, sort: shouldSort, sortAngle, sortScale, dimension }) {\n        text = text.split(/\\s+/).join('');\n        const bounds = [\n            { x: width * dimension.x0, y: height * dimension.y0 },\n            { x: width * dimension.x1, y: height * dimension.y0 },\n            { x: width * dimension.x1, y: height * dimension.y1 },\n            { x: width * dimension.x0, y: height * dimension.y1 },\n        ];\n        const shapes = bestCandidate(bounds, {\n            tries,\n            width,\n            height,\n            maxR: size,\n            minR: size * minR,\n        });\n\n        // applySeed();\n        const chosen = pickRandom(shapes, { count: Math.min(shapes.length, text.length) });\n        const sorted = shouldSort\n            ? sort(chosen, { angle: sortAngle * Math.PI, scale: sortScale })\n            : chosen;\n        for (let i = 0; i < sorted.length; ++i) {\n            const { x, y, r } = sorted[i];\n            yield {\n                i,\n                text: text[i],\n                x0: x,\n                y0: y,\n                size: r * 2,\n                align: 'middle',\n            };\n        }\n    }\n}\n\nexport default ActiveBComponent;\n","import SplitComponent from './SplitComponent';\nimport BalancedAComponent from './BalancedAComponent';\nimport BalancedBComponent from './BalancedBComponent';\nimport NeutralComponent from './NeutralComponent';\nimport ActiveAComponent from './ActiveAComponent';\nimport ActiveBComponent from './ActiveBComponent';\n\nexport default [\n    SplitComponent,\n    BalancedAComponent,\n    BalancedBComponent,\n    NeutralComponent,\n    ActiveAComponent,\n    ActiveBComponent,\n];\n","import { BeanComponent } from '../BeanComponent';\n\nclass UniformComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Uniform',\n            {\n                min: { defaultVal: -0.5, min: -1, max: 1 },\n                max: { defaultVal: 0.5, min: -1, max: 1 },\n            },\n            {\n                val: { type: 'number' },\n            },\n        );\n    }\n\n    * worker({ min, max }) {\n        yield {\n            val: min + Math.random() * (max - min),\n        };\n    }\n}\n\nexport default UniformComponent;\n","import { BeanComponent } from '../BeanComponent';\n\nclass StepComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Step',\n            {\n                i: { defaultVal: 0 },\n                start: { defaultVal: 0, min: -1, max: 1 },\n                step: { defaultVal: 0.1, min: -1, max: 1 },\n            },\n            {\n                val: { type: 'number' },\n            },\n        );\n    }\n\n    * worker({ i, start, step }) {\n        yield {\n            val: start + i * step,\n        };\n    }\n}\n\nexport default StepComponent;\n","import { BeanComponent } from '../BeanComponent';\n\nclass ScatterComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Scatter',\n            {\n                cond: { type: 'number' },\n                thres: { type: 'number' },\n                val: { type: 'number' },\n            },\n            {\n                lt: { type: 'number' },\n                gt: { type: 'number' },\n            },\n        );\n    }\n\n    * worker({ cond, thres, val }) {\n        if (cond <= thres) {\n            yield { lt: val };\n        } else {\n            yield { gt: val };\n        }\n    }\n}\n\nclass GatherComponent extends BeanComponent {\n    constructor() {\n        super(\n            'Gather',\n            {\n                cond: { type: 'number' },\n                thres: { type: 'number' },\n                lt: { defaultVal: 0 },\n                gt: { defaultVal: 0 },\n            },\n            {\n                val: { type: 'number' },\n            },\n        );\n    }\n\n    * worker({ cond, thres, lt, gt }) {\n        if (cond <= thres) {\n            yield { val: lt };\n        } else {\n            yield { val: gt };\n        }\n    }\n}\n\nclass Gather10Component extends BeanComponent {\n    constructor() {\n        super(\n            'Gather10',\n            {\n                ind: { defaultVal: 0, min: 0, max: 9 },\n                n0: { defaultVal: 0 },\n                n1: { defaultVal: 0 },\n                n2: { defaultVal: 0 },\n                n3: { defaultVal: 0 },\n                n4: { defaultVal: 0 },\n                n5: { defaultVal: 0 },\n                n6: { defaultVal: 0 },\n                n7: { defaultVal: 0 },\n                n8: { defaultVal: 0 },\n                n9: { defaultVal: 0 },\n            },\n            {\n                val: { type: 'number' },\n            },\n        );\n    }\n\n    * worker({ ind, n0, n1, n2, n3, n4, n5, n6, n7, n8, n9 }) {\n        const vals = [n0, n1, n2, n3, n4, n5, n6, n7, n8, n9];\n        yield { val: vals[ind] };\n    }\n}\n\nexport default [\n    ScatterComponent,\n    GatherComponent,\n    Gather10Component,\n];\n","import UniformComponent from './UniformComponent';\nimport StepComponent from './StepComponent';\nimport conditional from './conditional';\n\nexport default [\n    UniformComponent,\n    StepComponent,\n    ...conditional,\n];\n","// lifecycle\nimport InitiatorComponent from './InitiatorComponent';\n\nimport io from './io';\nimport common from './common';\nimport render from './render';\nimport generation from './generation';\nimport calculation from './calculation';\n\nexport default [\n    InitiatorComponent,\n    ...io,\n    ...common,\n    ...render,\n    ...generation,\n    ...calculation,\n];\n","import React, { useCallback, useEffect, useState, useMemo, useRef } from 'react';\nimport { makeStyles, Button, Grid } from '@material-ui/core';\nimport Rete from 'rete';\nimport ConnectionPlugin from 'rete-connection-plugin';\nimport ReactRenderPlugin from 'rete-react-render-plugin';\nimport ContextMenuPlugin from 'rete-context-menu-plugin';\nimport { saveAs } from 'file-saver';\nimport ReactFileReader from 'react-file-reader';\nimport { readAsText } from 'promise-file-reader';\nimport MyNode from './MyNode';\nimport components from \"../components\";\n\nconst useStyles = makeStyles({\n    buttons: {\n        position: 'absolute',\n        right: 16,\n        bottom: 16,\n    },\n});\n\nfunction NodeMap({ setStep, defaults, onUpdate, name, next, prev }) {\n    const classes = useStyles();\n    const nextStep = useCallback(() => {\n        setStep(next);\n    }, [setStep, next]);\n    const prevStep = useCallback(() => {\n        setStep(prev);\n    }, [setStep, prev]);\n    const [root, setRoot] = useState(null);\n    const editor = useMemo(() => {\n        if (!root) return null;\n        return new Rete.NodeEditor('dcdc@0.1.0', root);\n    }, [root]);\n    const onUpdateRef = useRef(onUpdate);\n    useEffect(() => {\n        onUpdateRef.current = onUpdate;\n    }, [onUpdate]);\n    useEffect(() => {\n        if (!editor) return;\n        (async () => {\n            editor.use(ConnectionPlugin);\n            editor.use(ReactRenderPlugin, { component: MyNode });\n            editor.use(ContextMenuPlugin);\n            components.forEach(component => editor.register(new component()));\n\n            if (defaults) await editor.fromJSON(defaults);\n\n            editor.on('process nodecreated noderemoved connectioncreated connectionremoved', async () => {\n                (onUpdateRef.current)(await editor.toJSON());\n            });\n        })();\n    }, [editor, defaults]);\n    const download = useCallback(async () => {\n        if (!editor) return;\n        const data = await editor.toJSON();\n        const text = JSON.stringify(data);\n        const blob = new Blob([text], { type: 'application/json' });\n        saveAs(blob, `${name}.json`);\n    }, [editor, name]);\n    const upload = useCallback(async (files) => {\n        if (!editor) return;\n        const file = files[0];\n        const text = await readAsText(file);\n        const data = JSON.parse(text);\n        await editor.fromJSON(data);\n    }, [editor]);\n\n    return <>\n        <div ref={setRoot} style={{\n            position: 'absolute',\n            left: 0,\n            top: 0,\n            width: '100vw',\n            height: '100vh',\n        }} />\n        <Grid container spacing={2} classes={{ root: classes.buttons }} justify=\"flex-end\">\n            <Grid item>\n                <ReactFileReader\n                    fileTypes={[\".json\"]}\n                    handleFiles={upload}>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disableElevation\n                        component=\"span\"\n                    >\n                        上传\n                    </Button>\n                </ReactFileReader>\n            </Grid>\n            <Grid item>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disableElevation\n                    onClick={download}\n                >\n                    下载\n                </Button>\n            </Grid>\n            <Grid item>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disableElevation\n                    onClick={prevStep}\n                >\n                    上一步\n                </Button>\n            </Grid>\n            <Grid item>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disableElevation\n                    onClick={nextStep}\n                >\n                    下一步\n                </Button>\n            </Grid>\n        </Grid>\n    </>\n}\n\nexport default NodeMap;\n","const config = [\n    {\n        name: 'Color set',\n        type: 'folder',\n        children: [\n            { name: 'Text color', type: 'color', path: 'textColor' },\n            { name: 'Background color', type: 'color', path: 'backgroundColor' },\n        ],\n    },\n    {\n        name: 'Type',\n        type: 'folder',\n        children: [\n            { name: 'Font family', type: 'string', path: 'fontFamily' },\n            { name: 'Font weight', type: 'number', path: 'fontWeight', min: 100, max: 900, step: 100 },\n            { name: 'Font size', type: 'number', path: 'size' },\n            { name: 'Letter spacing', type: 'number', path: 'letterSpacing' },\n            { name: 'Maximum split', type: 'number', path: 'splitMax' },\n            { name: 'Size randomness', type: 'number', path: 'sizeRandom' },\n            { name: 'Rotate randomness', type: 'number', path: 'rotateRandom' },\n        ],\n    },\n    {\n        name: 'Layout',\n        type: 'folder',\n        children: [\n            {\n                name: 'Type A',\n                type: 'folder',\n                children: [\n                    { name: 'Enabled', type: 'boolean', path: 'modes.a.enabled' },\n                    { name: 'Minimum distance', type: 'number', path: 'modes.a.minDist', step: 0.01 },\n                    { name: 'Maximum distance', type: 'number', path: 'modes.a.maxDist', step: 0.01 },\n                ],\n            },\n            {\n                name: 'Type B',\n                type: 'folder',\n                children: [\n                    { name: 'Enabled', type: 'boolean', path: 'modes.b.enabled' },\n                    { name: 'Line spacing', type: 'number', path: 'modes.b.lineSpacing', step: 0.01 },\n                ],\n            },\n            {\n                name: 'Type C',\n                type: 'folder',\n                children: [\n                    { name: 'Enabled', type: 'boolean', path: 'modes.c.enabled' },\n                    { name: 'Minimum angle', type: 'number', path: 'modes.c.minAngle', step: 0.01 },\n                    { name: 'Maximum angle', type: 'number', path: 'modes.c.maxAngle', step: 0.01 },\n                ],\n            },\n            {\n                name: 'Type D',\n                type: 'folder',\n                children: [\n                    { name: 'Enabled', type: 'boolean', path: 'modes.d.enabled' },\n                    { name: 'Minimum distance', type: 'number', path: 'modes.d.minDist', step: 0.01 },\n                    { name: 'Maximum distance', type: 'number', path: 'modes.d.maxDist', step: 0.01 },\n                ],\n            },\n            {\n                name: 'Type E',\n                type: 'folder',\n                children: [\n                    { name: 'Enabled', type: 'boolean', path: 'modes.e.enabled' },\n                    { name: 'Minimum radius', type: 'number', path: 'modes.e.minR', min: 0, max: 1, step: 0.01 },\n                    { name: 'Scale', type: 'number', path: 'modes.e.scale', step: 0.01 },\n                ],\n            },\n        ],\n    },\n    {\n        name: 'Pattern',\n        type: 'folder',\n        children: [\n            { name: 'Shape', type: 'string', path: 'pattern.shape' },\n            { name: 'Graphic color', type: 'color', path: 'pattern.color' },\n            { name: 'Center', type: 'boolean', path: 'pattern.center.enabled' },\n            { name: 'Follow', type: 'boolean', path: 'pattern.follow.enabled' },\n            { name: 'Random', type: 'boolean', path: 'pattern.random.enabled' },\n        ],\n    }\n];\n\nexport default config;\n","import * as _ from 'lodash';\n\nclass Engine {\n    constructor(id) {\n        this.id = id;\n        this.components = {};\n    }\n\n    register(component) {\n        this.components[component.name] = component;\n    }\n\n    async abort() {\n        // TODO: implement this\n    }\n\n    async process({ nodes }, data) {\n        const graph = { inputNodes: {}, inputs: {} };\n        for (const [, { id, inputs: nodeInputs }] of _.toPairs(nodes)) {\n            graph.inputNodes[id] = [];\n            graph.inputs[id] = {};\n            const { inputNodes: { [id]: inputNodes }, inputs: { [id]: inputs } } = graph;\n            for (const [dkey, { connections }] of _.toPairs(nodeInputs)) {\n                if (connections.length === 0) continue;\n                const [{ node: nid, output: skey }] = connections;\n                if (!inputNodes.includes(nid)) inputNodes.push(nid);\n                inputs[dkey] = { id: nid, key: skey };\n            }\n        }\n        try {\n            const queue = [];\n            queue.push({\n                values: {},\n                processed: [],\n                unprocessed: _.toPairs(nodes).map(([_, { id }]) => id),\n            });\n            while (queue.length !== 0) {\n                const [ctx] = queue.splice(0, 1);\n                const it = this.run(nodes, graph, ctx, data);\n                for await (const newCtx of it) queue.push(newCtx);\n            }\n        } catch (e) {\n            // circular dependency\n            console.log(e);\n        }\n    }\n\n    findNode(nodes, id) {\n        return _\n            .toPairs(nodes)\n            .map(([_, node]) => node)\n            .find(({ id: nodeId }) => nodeId === id);\n    }\n\n    async * run(nodes, graph, { processed, unprocessed, values }, data) {\n        const { inputNodes, inputs } = graph;\n        // find reachable node\n        const nid = unprocessed.find(id => inputNodes[id].every(iid => iid in values));\n        if (nid === undefined) throw new Error('no reachable node');\n        // collect inputs\n        const node = this.findNode(nodes, nid);\n        if (!node) throw new Error('unable to find node');\n        const { name, data: nodeData } = node;\n        const inputVals = _.clone(nodeData);\n        for (const [dkey, { id: sid, key: skey }] of _.toPairs(inputs[nid])) {\n            inputVals[dkey] = values[sid][skey];\n        }\n        // get outputs\n        const component = this.components[name];\n        const it = component.worker.call(component, inputVals, node, data);\n        for await (const outputVals of it) {\n            yield {\n                processed: [...processed, nid],\n                unprocessed: unprocessed.filter(id => id !== nid),\n                values: { ...values, [nid]: outputVals },\n            };\n        }\n    }\n}\n\nexport default Engine;\n","import Engine from './engine';\nimport components from \"../components\";\n\nexport default async (graph, inputs) => {\n    const engine = new Engine('dcdc@0.1.0');\n    for (const Component of components) {\n        engine.register(new Component());\n    }\n    const ctx = {\n        inputs,\n        outputs: {},\n    };\n    await engine.process(graph, ctx);\n    return ctx.outputs;\n};\n","/* eslint-disable default-case, no-fallthrough */\n\nimport * as _ from 'lodash';\nimport pickRandom from 'pick-random';\nimport random from 'random';\nimport seedrandom from 'seedrandom';\nimport Color from 'color';\nimport inside from 'point-in-polygon';\nimport BezierEasing from 'bezier-easing';\n\nimport { interp, divide, opposite, scatter, translate } from '../components/utils';\n\nconst textWidth = (text, sizes, spacing) => {\n    // VERY SIMPLE\n    // return size * text.length + spacing * size * (text.length - 1);\n    let width = 0;\n    for (let i = 0; i < text.length; ++i) {\n        width += sizes[i] * (1 + spacing);\n    }\n    width -= sizes[0] * spacing / 2;\n    width -= sizes[text.length - 1] * spacing / 2;\n    return width;\n}\n\nfunction* font({\n    text, x0, y0,\n    size, dir, align,\n    spacing, ignoreWhitespaces,\n    alignBaseline,\n    // pattern\n    patternType, ctx, currentTime, start, end, params,\n}) {\n    if (ignoreWhitespaces) text = text.split(/\\s+/).join('');\n    let x = x0, y = y0;\n    const sizes = new Array(text.length).fill(size);\n    const width = textWidth(text, sizes, spacing);\n    if (align === 'middle') {\n        switch (dir) {\n            case 'horizontal':\n                x -= width / 2;\n                break;\n            case 'vertical':\n                y -= width / 2;\n                break;\n        }\n    }\n    if (align === 'end') {\n        switch (dir) {\n            case 'horizontal':\n                x -= width;\n                break;\n            case 'vertical':\n                y -= width;\n                break;\n        }\n    }\n    switch (dir) {\n        case 'horizontal':\n            x += sizes[0] / 2;\n            break;\n        case 'vertical':\n            y += sizes[0] / 2;\n            break;\n    }\n\n    if (patternType === 'follow') {\n        const x0 = x, y0 = y;\n        const x1 = x + (dir === 'horizontal' ? width : 0);\n        const y1 = y + (dir === 'vertical' ? width : 0);\n        const t = random.float(0, 1);\n        pattern({\n            ctx, currentTime, start, end, params,\n            x0: x0 * (1 - t) + x1 * t,\n            y0: y0 * (1 - t) + y1 * t,\n            size: params.size * 1.5,\n        });\n    }\n\n    for (let i = 0; i < text.length; ++i) {\n        const ch = text[i];\n        const bx = x;\n        const by = alignBaseline && dir === 'horizontal' ? y - (sizes[i] - size) / 2 : y;\n        yield {\n            i,\n            ch,\n            x0: bx,\n            y0: by,\n            size: sizes[i],\n        };\n        switch (dir) {\n            case 'horizontal':\n                x += (sizes[i] + sizes[i + 1]) * (1 + spacing) / 2;\n                break;\n            case 'vertical':\n                y += (sizes[i] + sizes[i + 1]) * (1 + spacing) / 2;\n                break;\n        }\n    }\n}\n\nfunction char({\n    ctx, ch, x0, y0,\n    size, rotate, color,\n    fontFamily, fontWeight,\n}) {\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n    ctx.fillStyle = color;\n    ctx.font = `${fontWeight} ${size}px '${fontFamily}'`;\n    ctx.save();\n    ctx.translate(x0, y0);\n    ctx.rotate(rotate * Math.PI);\n    ctx.fillText(ch, 0, 0);\n    ctx.restore();\n}\n\nfunction* split({ text, parts, randomness }) {\n    const step = text.length / parts;\n    const deltas = [0, ...new Array(parts - 1).fill(0).map(() => (Math.random() - 0.5) * 2 * randomness), 0];\n    for (let i = 0; i < parts; ++i) {\n        const begin = Math.round(i * step + deltas[i]);\n        const end = Math.round((i + 1) * step + deltas[i + 1]);\n        yield {\n            parts,\n            i,\n            text: text.substring(begin, end),\n        };\n    }\n}\n\nfunction* balancedA({ width, height, i, parts, dist, dir }) {\n    const { x, y } = interp(width, height, 0.5, (divide(parts, i) - 0.5) * dist + 0.5, dir);\n    yield {\n        x0: x,\n        y0: y,\n        dir,\n        align: 'middle',\n    };\n}\n\nfunction* balancedB({ text, rows, cols, dist, width, height, size }) {\n    const indices = pickRandom(\n        new Array(cols).fill(0).map(\n            (_, u) => new Array(rows).fill(0).map((_, v) => ({ u, v }))\n        ).reduce((a, b) => [...a, ...b], []),\n        { count: Math.min(rows * cols, text.length) },\n    ).sort(({ u: u1, v: v1 }, { u: u2, v: v2 }) => v2 === v1 ? (u1 - u2) : (v1 - v2));\n\n    for (let i = 0; i < indices.length; ++i) {\n        const { u, v } = indices[i];\n        const x = width / 2 + (u - (cols - 1) / 2) * dist * size;\n        const y = height / 2 + (v - (rows - 1) / 2) * dist * size;\n        yield {\n            text: text[i],\n            x0: x,\n            y0: y,\n            align: 'middle',\n        };\n    }\n}\n\nfunction* neutral({ width, height, size, lineSpacing, i, dir, align, position, x0, y0 }) {\n    const x = opposite(x0, align === 'end');\n    const y = opposite(y0, position === 'right');\n    let point = interp(width, height, x, y, dir);\n    const delta = scatter(size * lineSpacing * (position === 'left' ? 1 : -1), dir, true);\n    for (; i > 0; --i) point = translate(point, delta);\n    yield {\n        x0: point.x,\n        y0: point.y,\n        dir,\n        align,\n    };\n}\n\nfunction* activeA({ width, height, i, angle, dir, x0: a, y0: b }) {\n    const rx = opposite(a, i === 1);\n    const ry = opposite(b, i === 1);\n    const { x, y } = interp(width, height, rx, ry, dir);\n    yield {\n        x0: x,\n        y0: y,\n        dir,\n        rotate: angle * Math.PI / 2,\n        align: 'middle',\n    };\n}\n\nconst distToShape = ({ x: x1, y: y1, r: r1 }, { x: x2, y: y2 }) => {\n    // Chebyshev distance\n    const dist = Math.max(Math.abs(x2 - x1), Math.abs(y2 - y1));\n    return dist - r1;\n}\n\nconst distToLine = ({ x: x1, y: y1 }, { x: x2, y: y2 }, { x, y }) => {\n    // euclidian distance to line\n    const dist = Math.abs((y2 - y1) * x - (x2 - x1) * y + x2 * y1 - y2 * x1)\n        / Math.sqrt(Math.pow(y2 - y1, 2) + Math.pow(x2 - x1, 2));\n    const angle = Math.atan2(y2 - y1, x2 - x1);\n    return Math.abs(dist / Math.sin(angle + Math.PI / 4)) / Math.sqrt(2);\n}\n\nconst dist = (bounds, shapes, point) => {\n    let dist = shapes\n        .map(shape => distToShape(shape, point))\n        .reduce((a, b) => Math.min(a, b), 100000);\n    for (let i = 0; i < bounds.length; ++i) {\n        const p1 = bounds[i], p2 = bounds[(i + 1) % bounds.length];\n        const newDist = distToLine(p1, p2, point);\n        if (newDist < dist) dist = newDist;\n    }\n    return dist;\n}\n\nconst bestCandidate = (bounds, { tries, width, height, maxR, minR = 0 }) => {\n    const shapes = [];\n    const polygon = bounds.map(({ x, y }) => [x, y]);\n    for (let i = 0; i < tries; ++i) {\n        const x = random.float(0, width);\n        const y = random.float(0, height);\n        if (!inside([x, y], polygon)) continue;\n        const d = Math.min(maxR, dist(bounds, shapes, { x, y }));\n        if (d <= minR) continue;\n        shapes.push({ x, y, r: d });\n    }\n    return shapes;\n}\n\nconst sort = (chosen, { debug, angle, scale }) => {\n    const chains = [];\n    chosen = chosen.sort(({ x: x1, y: y1 }, { x: x2, y: y2 }) => (x1 + y1) - (x2 + y2));\n    while (chosen.length > 0) {\n        // characters that is on the leftmost must be beginning of chain\n        const chain = [];\n        chain.push(chosen.splice(0, 1)[0]);\n        while (true) {\n            const { x: x1, y: y1, r: r1 } = chain[chain.length - 1];\n            const candidates = [...chosen]\n                .map((shape, i) => ({ ...shape, i }))\n                .map(({ x: x2, y: y2, r: r2, i }) => ({\n                    x: x2, y: y2, r: r2, i,\n                    s: Math.abs(Math.atan2(-(y2 - y1), x2 - x1)) / angle,\n                    d: (x2 - x1) / r1 / scale,\n                }))\n                .filter(({ s }) => s < 1)\n                .map(({ d, s, ...rest }) => ({\n                    ...rest,\n                    k: s + d,\n                }))\n                .sort(({ k: k1 }, { k: k2 }) => k1 - k2);\n            if (candidates.length === 0) break;\n            chain.push(chosen.splice(candidates[0].i, 1)[0]);\n        }\n        chains.push(chain);\n    }\n    return chains\n        .sort(([{ y: y1 }], [{ y: y2 }]) => y1 - y2)\n        .reduce((a, b) => [...a, ...b], []);\n}\n\nfunction* activeB({ width, height, text, tries, size, minR, sort: shouldSort, sortAngle, sortScale, dimension }) {\n    text = text.split(/\\s+/).join('');\n    const bounds = [\n        { x: width * dimension.x0, y: height * dimension.y0 },\n        { x: width * dimension.x1, y: height * dimension.y0 },\n        { x: width * dimension.x1, y: height * dimension.y1 },\n        { x: width * dimension.x0, y: height * dimension.y1 },\n    ];\n    const shapes = bestCandidate(bounds, {\n        tries,\n        width,\n        height,\n        maxR: size,\n        minR: size * minR,\n    });\n\n    // applySeed();\n    const chosen = pickRandom(shapes, { count: Math.min(shapes.length, text.length) });\n    const sorted = shouldSort\n        ? sort(chosen, { angle: sortAngle * Math.PI, scale: sortScale })\n        : chosen;\n    for (let i = 0; i < sorted.length; ++i) {\n        const { x, y, r } = sorted[i];\n        yield {\n            i,\n            text: text[i],\n            x0: x,\n            y0: y,\n            size: r * 2,\n            align: 'middle',\n        };\n    }\n}\n\nfunction pattern({\n    ctx, x0, y0, currentTime, start, end, duration = 0.5, params, size,\n}) {\n    const rotation = currentTime * 1;\n    const easing1 = BezierEasing(0.22, 1, 0.36, 1);\n    const easing2 = BezierEasing(0.64, 0, 0.78, 0);\n    let t = 0;\n    if (currentTime < start) t = 0;\n    else if (currentTime < start + duration) t = easing1((currentTime - start) / duration);\n    else if (currentTime < end - duration) t = 1;\n    else if (currentTime < end) t = 1 - easing2(1 - (end - currentTime) / duration);\n    else t = 0;\n    ctx.save();\n    ctx.fillStyle = params.pattern.color;\n    ctx.translate(x0, y0);\n    const scale = t * size / 2;\n    ctx.scale(scale, scale);\n    const shape = params.pattern.shape;\n    if (shape !== 'line') ctx.rotate(rotation);\n    switch (params.pattern.shape) {\n        case 'square': case 'triangle': case 'pentagon': {\n            const sides = { square: 4, triangle: 3, pentagon: 5 }[params.pattern.shape];\n            ctx.beginPath();\n            ctx.moveTo(1, 0);\n            for (let i = 0; i < sides; ++i) {\n                const angle = Math.PI * 2 / sides * (i + 1);\n                ctx.lineTo(Math.cos(angle), Math.sin(angle));\n            }\n            ctx.fill();\n            break;\n        }\n        case 'circle': {\n            ctx.beginPath();\n            ctx.arc(0, 0, 1, 0, Math.PI * 2);\n            ctx.fill();\n            break;\n        }\n        case 'line': {\n            ctx.beginPath();\n            ctx.moveTo(+1.5, -0.2);\n            ctx.lineTo(+1.5, +0.2);\n            ctx.lineTo(-1.5, +0.2);\n            ctx.lineTo(-1.5, -0.2);\n            ctx.fill();\n            break;\n        }\n    }\n    ctx.restore();\n}\n\nfunction char2({\n    start, end, lyric, currentTime, duration = 0.5,\n    chi, ctx, ch, x0, y0, rotate, size, params, outEffect, inEffect,\n}) {\n    const inEndTime = chi * (end - duration - start) / lyric.length + start;\n    const inStartTime = inEndTime - duration;\n    const outStartTime = end - duration;\n    const outEndTime = outStartTime + duration;\n    if (currentTime < inStartTime) { }\n    else if (currentTime < inEndTime) {\n        const t = (currentTime - inStartTime) / (inEndTime - inStartTime);\n        switch (inEffect) {\n            case 'fade': {\n                const opacity = t;\n                char({\n                    ctx, ch, x0, y0,\n                    size,\n                    rotate,\n                    color: Color(params.textColor).alpha(opacity).string(),\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n            case 'blink': {\n                const thres = 0.2;\n                const opacity = t < thres ? 1 : (t - thres) / (1 - thres);\n                char({\n                    ctx, ch, x0, y0,\n                    size,\n                    rotate,\n                    color: Color(params.textColor).alpha(opacity).string(),\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n            case 'zoom': {\n                const easing = BezierEasing(0.22, 1, 0.36, 1);\n                char({\n                    ctx, ch, x0, y0,\n                    size: size * easing(t),\n                    rotate,\n                    color: params.textColor,\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n            case 'slide': {\n                const easing = BezierEasing(0.22, 1, 0.36, 1);\n                const k = 1 - easing(t);\n                const dx = 0, dy = -1;\n                char({\n                    ctx, ch, x0: x0 + dx * size * k, y0: y0 + dy * size * k,\n                    size,\n                    rotate,\n                    color: params.textColor,\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n        }\n    } else if (currentTime < outStartTime) {\n        char({\n            ctx, ch, x0, y0,\n            size,\n            rotate,\n            color: params.textColor,\n            fontFamily: params.fontFamily,\n            fontWeight: params.fontWeight,\n        });\n    } else if (currentTime < outEndTime) {\n        const t = (currentTime - outStartTime) / (outEndTime - outStartTime);\n        switch (outEffect) {\n            case 'fade': {\n                const opacity = 1 - t;\n                char({\n                    ctx, ch, x0, y0,\n                    size,\n                    rotate,\n                    color: Color(params.textColor).alpha(opacity).string(),\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n            case 'blink': {\n                const thres = 0.2;\n                const opacity = 1 - (t < thres ? 1 : (t - thres) / (1 - thres));\n                char({\n                    ctx, ch, x0, y0,\n                    size,\n                    rotate,\n                    color: Color(params.textColor).alpha(opacity).string(),\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n            case 'zoom': {\n                const easing = BezierEasing(0.64, 0, 0.78, 0);\n                char({\n                    ctx, ch, x0, y0,\n                    size: size * (1 - easing(t)),\n                    rotate,\n                    color: params.textColor,\n                    fontFamily: params.fontFamily,\n                    fontWeight: params.fontWeight,\n                });\n                break;\n            }\n        }\n    } else { }\n}\n\nrandom.patch();\n\nconst render = ({ width, height, seed, ctx, params, lyric, start, end, currentTime }) => {\n    if (lyric.length === 0) return;\n\n    const rng = seedrandom(`${seed}`);\n    random.use(rng);\n\n    const modes = _\n        .keys(params.modes)\n        .filter(key => params.modes[key].enabled);\n    if (modes.length === 0) return;\n    const mode = pickRandom(modes)[0];\n\n    const inEffect = pickRandom(['fade', 'blink', 'zoom', 'slide'])[0];\n    const outEffect = pickRandom(['fade', 'blink', 'zoom'])[0];\n\n    const patternType = pickRandom(['center', 'follow', 'random'].filter(type => params.pattern[type].enabled))[0];\n    switch (patternType) {\n        case 'center': {\n            pattern({\n                ctx, currentTime, start, end, params,\n                x0: width / 2, y0: height / 2,\n                size: params.size * 2,\n            });\n            break;\n        }\n        case 'follow': {\n            if (['a', 'b', 'c'].indexOf(mode) !== -1) break;\n            // intended fall through\n        }\n        case 'random': {\n            const num = random.int(7, 16);\n            for (let i = 0; i < num; ++i) {\n                const x0 = random.float(0, 1) * width;\n                const y0 = random.float(0, 1) * height;\n                const size = random.float(0.4, 1.0) * params.size;\n                pattern({\n                    ctx, x0, y0, currentTime, start, end, params, size,\n                });\n            }\n            break;\n        }\n    }\n\n    switch (mode) {\n        case 'a': {\n            const parts = Math.max(random.int(1, params.splitMax), Math.ceil(lyric.length / 12));\n            const dir = pickRandom(['horizontal', 'vertical'])[0];\n            const it = split({\n                text: lyric,\n                parts,\n                randomness: 0,\n            });\n            let chi = 0;\n            for (const { i, text } of it) {\n                const it = balancedA({\n                    width, height, i, parts,\n                    dist: random.float(params.modes.a.minDist, params.modes.a.maxDist),\n                    dir,\n                });\n                for (const { x0, y0, dir, align } of it) {\n                    const it = font({\n                        text, x0, y0,\n                        size: params.size,\n                        dir, align,\n                        spacing: params.letterSpacing,\n                        ignoreWhitespaces: true,\n                        alignBaseline: false,\n\n                        ctx, patternType, currentTime, start, end, params,\n                    });\n                    for (const { ch, x0, y0, size } of it) {\n                        char2({\n                            start, end, lyric, currentTime, chi, ctx, ch, x0, y0,\n                            rotate: 0, size, params, inEffect, outEffect,\n                        });\n                        ++chi;\n                    }\n                }\n            }\n            break;\n        }\n        case 'b': {\n            const parts = Math.max(random.int(1, params.splitMax), Math.ceil(lyric.length / 12));\n            const dir = pickRandom(['horizontal', 'vertical'])[0];\n            const align = pickRandom(['begin', 'end'])[0];\n            const position = pickRandom(['left', 'right'])[0];\n            const it = split({\n                text: lyric,\n                parts,\n                randomness: 0,\n            });\n            let chi = 0;\n            for (const { i, text } of it) {\n                const it = neutral({\n                    width, height,\n                    size: params.size,\n                    lineSpacing: params.modes.b.lineSpacing,\n                    i, dir, align, position,\n                    x0: 0.2, y0: 0.25,\n                });\n                for (const { x0, y0, dir, align } of it) {\n                    const it = font({\n                        text, x0, y0,\n                        size: params.size,\n                        dir, align,\n                        spacing: params.letterSpacing,\n                        ignoreWhitespaces: true,\n                        alignBaseline: false,\n\n                        ctx, patternType, currentTime, start, end, params,\n                    });\n                    for (const { ch, x0, y0, size } of it) {\n                        char2({\n                            start, end, lyric, currentTime, chi, ctx, ch, x0, y0,\n                            rotate: 0, size, params, inEffect, outEffect,\n                        });\n                        ++chi;\n                    }\n                }\n            }\n            break;\n        }\n        case 'c': {\n            const parts = 2;\n            const dir = pickRandom(['horizontal', 'vertical'])[0];\n            const angle = random.float(params.modes.c.minAngle, params.modes.c.maxAngle);\n            const it = split({\n                text: lyric,\n                parts,\n                randomness: 0,\n            });\n            let chi = 0;\n            for (const { i, text } of it) {\n                const it = activeA({\n                    width, height, i, dir, angle,\n                    x0: 0.2, y0: 0.25,\n                });\n                for (const { x0, y0, dir, align, rotate } of it) {\n                    const it = font({\n                        text, x0, y0,\n                        size: params.size,\n                        dir, align,\n                        spacing: params.letterSpacing,\n                        ignoreWhitespaces: true,\n                        alignBaseline: false,\n\n                        ctx, patternType, currentTime, start, end, params,\n                    });\n                    for (const { ch, x0, y0, size } of it) {\n                        char2({\n                            start, end, lyric, currentTime, chi, ctx, ch, x0, y0,\n                            rotate, size, params, inEffect, outEffect,\n                        });\n                        ++chi;\n                    }\n                }\n            }\n            break;\n        }\n        case 'd': {\n            let chi = 0;\n            let rows, cols;\n            do {\n                if (lyric.length > 20) {\n                    rows = 4;\n                    cols = 5;\n                } else {\n                    rows = random.int(2, 4);\n                    cols = random.int(2, 5);\n                }\n            } while (!(lyric.length > 20 || rows * cols >= lyric.length));\n            const it = balancedB({\n                text: lyric, rows, cols,\n                dist: random.float(params.modes.d.minDist, params.modes.d.maxDist),\n                width, height, size: params.size,\n            });\n            for (const { text, x0, y0, align } of it) {\n                const it = font({\n                    text, x0, y0,\n                    size: params.size,\n                    dir: 'horizontal', align,\n                    spacing: 0,\n                    ignoreWhitespaces: true,\n                    alignBaseline: false,\n                });\n                for (const { ch, x0, y0, size } of it) {\n                    char2({\n                        start, end, lyric, currentTime, chi, ctx, ch, x0, y0,\n                        rotate: 0, size, params, inEffect, outEffect,\n                    });\n                    ++chi;\n                }\n            }\n            break;\n        }\n        case 'e': {\n            const it = activeB({\n                text: lyric, width, height,\n                tries: 5000, size: params.size,\n                minR: params.modes.e.minR,\n                sort: true, sortAngle: 0.2, sortScale: 3.0,\n                dimension: { x0: 0.2, x1: 0.8, y0: 0.15, y1: 0.85 },\n            });\n            for (const { i, text, x0, y0, size, align } of it) {\n                const it = font({\n                    text, x0, y0, size: size * params.modes.e.scale,\n                    dir: 'horizontal', align,\n                    spacing: 0,\n                    ignoreWhitespaces: true,\n                    alignBaseline: false,\n                });\n                for (const { ch, x0, y0, size } of it) {\n                    char2({\n                        start, end, lyric, currentTime, chi: i, ctx, ch, x0, y0,\n                        rotate: 0, size, params, inEffect, outEffect,\n                    });\n                }\n            }\n            break;\n        }\n    }\n}\n\nexport default render;","import { makeStyles, Grid, Typography, Button, Slider } from '@material-ui/core';\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport DatGui, { DatFolder, DatString, DatNumber, DatBoolean, DatColor } from 'react-dat-gui';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport grey from '@material-ui/core/colors/grey';\nimport { Lrc } from 'lrc-kit';\nimport * as _ from 'lodash';\n\nimport config from './params';\nimport Length from './Length';\nimport exec from '../retex/exec';\nimport render from './render';\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n    },\n    side: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        padding: 4,\n        width: 345,\n        height: '100%',\n        overflow: 'auto',\n        boxSizing: 'border-box',\n    },\n    canvasContainer: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: 'calc(100vw - 345px)',\n        height: 'calc(100vh - 195px)',\n        backgroundColor: '#222',\n        overflow: 'hidden',\n    },\n    canvas: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n    },\n    bottom: {\n        position: 'absolute',\n        left: 0,\n        bottom: 0,\n        height: 195,\n        width: 'calc(100vw - 345px)',\n        padding: '20px 30px 40px 30px',\n        boxSizing: 'border-box',\n    },\n    sections: {\n        position: 'relative',\n        height: 16,\n    },\n    section: {\n        position: 'absolute',\n        top: 0,\n        bottom: 0,\n        border: '1px solid #121212',\n    },\n    bottomInner: {\n        height: '100%',\n    },\n    title: {\n        lineHeight: 2.5,\n        fontWeight: 300,\n        paddingLeft: 16,\n    },\n});\n\nconst useFrame = (fn) => {\n    useEffect(() => {\n        let valid = true;\n        const onFrameWrapped = () => {\n            if (fn) fn();\n            if (valid) requestAnimationFrame(onFrameWrapped);\n        };\n        requestAnimationFrame(onFrameWrapped);\n        return () => { valid = false; };\n    }, [fn]);\n}\n\nfunction Generation({\n    moodboard,\n    data,\n    data: {\n        song,\n        artist,\n        album: { al_name: album },\n        sections,\n        featuress: { duration_s: length },\n        url,\n        lrc,\n    },\n    initialRef: { current: initialGraph },\n    setStep, prev,\n}) {\n    const classes = useStyles();\n\n    const lyrics = useMemo(() => {\n        let { lyrics } = Lrc.parse(lrc);\n        lyrics.sort(({ timestamp: t1 }, { timestamp: t2 }) => t1 - t2);\n        lyrics = lyrics.map(({ timestamp, ...rest }, i) => ({\n            start: timestamp,\n            end: i === lyrics.length - 1 ? length : lyrics[i + 1].timestamp,\n            ...rest,\n        }));\n        for (const l of lyrics) {\n            const { start: ls, end: le } = l;\n            l.section = sections.map(({ start: ss, duration: sd }, i) => ({\n                idx: i,\n                len: Math.max(0, Math.min(le, ss + sd) - Math.max(ls, ss)),\n            })).sort(({ len: l1 }, { len: l2 }) => -l1 + l2)[0].idx;\n        }\n        return lyrics;\n    }, [lrc, length, sections]);\n\n    const [params, setParams] = useState(null);\n    useEffect(() => {\n        Promise.all(sections.map((section, i) => exec(initialGraph, {\n            moodboard,\n            data,\n            idx: i,\n            section,\n        }))).then(setParams);\n    }, [data, moodboard, initialGraph, sections]);\n\n    const [canvas, setCanvas] = useState(null);\n\n    const convert = useMemo(() => {\n        const convert = ({ name, path, type, children, ...rest }, i) => {\n            switch (type) {\n                case 'folder': return (\n                    <DatFolder key={i} title={name} closed={false} {...rest}>\n                        {children.map(convert)}\n                    </DatFolder>\n                );\n                case 'string': return (\n                    <DatString key={i} path={path} label={name} {...rest} />\n                );\n                case 'color': return (\n                    <DatColor key={i} path={path} label={name} {...rest} />\n                );\n                case 'number': return (\n                    <DatNumber key={i} path={path} label={name} {...rest} />\n                );\n                case 'boolean': return (\n                    <DatBoolean key={i} path={path} label={name} {...rest} />\n                );\n                default: return null;\n            }\n        };\n        return convert;\n    }, []);\n\n    const audio = useMemo(() => {\n        return new Audio(url);\n    }, [url]);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [playing, setPlaying] = useState(false);\n    useEffect(() => {\n        if (!audio) return;\n        const onUpdate = () => setCurrentTime(audio.currentTime);\n        const onPlay = () => setPlaying(true);\n        const onPause = () => setPlaying(false);\n        audio.addEventListener('timeupdate', onUpdate);\n        audio.addEventListener('play', onPlay);\n        audio.addEventListener('pause', onPause);\n        return () => {\n            audio.removeEventListener('timeupdate', onUpdate);\n            audio.removeEventListener('play', onPlay);\n            audio.removeEventListener('pause', onPause);\n        };\n    }, [audio]);\n    const onSeek = useCallback((_, newVal) => {\n        audio.currentTime = newVal;\n    }, [audio]);\n    const play = useCallback(() => audio.play(), [audio]);\n    const pause = useCallback(() => audio.pause(), [audio]);\n\n    const currentSegment = useMemo(() => {\n        for (let i = 0; i < sections.length; ++i) {\n            const { start, duration } = sections[i];\n            if (currentTime < start + duration) return i;\n        }\n        return sections.length - 1;\n    }, [currentTime, sections]);\n\n    const [initTime, setInitTime] = useState(new Date().getTime());\n    const renewTime = useCallback(() => {\n        setInitTime(() => new Date().getTime());\n    }, []);\n    const renderFrame = useCallback(() => {\n        if (!params || !canvas) return;\n\n        const currentTime = audio.currentTime;\n\n        const width = 1920, height = 1080;\n        // canvas\n        canvas.width = width;\n        canvas.height = height;\n        const scale = Math.min(canvas.parentNode.clientWidth / canvas.width, canvas.parentNode.clientHeight / canvas.height);\n        canvas.style.transform = `scale(${scale})`;\n        canvas.style.marginLeft = `${-width / 2}px`;\n        canvas.style.marginTop = `${-height / 2}px`;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = params[currentSegment].backgroundColor;\n        ctx.fillRect(0, 0, width, height);\n\n        lyrics\n            // .filter(({ section }) => section === currentSegment)\n            .forEach(({ start, end, content: lyric }, lyricIdx) => {\n                if (!(start - 1 <= currentTime && end + 1 >= currentTime)) return;\n                render({\n                    width, height, ctx, lyric, currentTime, start, end,\n                    seed: initTime /* + currentSegment * 1000 */ + lyricIdx,\n                    params: params[currentSegment],\n                });\n            });\n    }, [canvas, params, currentSegment, lyrics, audio, initTime]);\n    useFrame(renderFrame);\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.canvasContainer}>\n                <canvas className={classes.canvas} ref={setCanvas} />\n            </div>\n            <div className={classes.side}>\n                <Typography color=\"textPrimary\" variant=\"h6\" classes={{ root: classes.title }}>\n                    段落 {currentSegment + 1}\n                </Typography>\n                {params && <DatGui\n                    data={params[currentSegment]}\n                    onUpdate={(newData) => {\n                        newData = { ...data, ...newData };\n                        setParams(params => {\n                            const newParams = _.cloneDeep(params);\n                            newParams[currentSegment] = newData;\n                            return newParams;\n                        });\n                    }}\n                    style={{\n                        position: 'relative',\n                        backgroundColor: '#1A1A1A',\n                        right: 0,\n                        left: 0,\n                        width: '100%',\n                    }}\n                >\n                    {config.map(convert)}\n                </DatGui>}\n            </div>\n            <div className={classes.bottom}>\n                <Grid container direction=\"column\" justify=\"space-between\" classes={{ root: classes.bottomInner }}>\n                    <Grid item container>\n                        <Grid item xs={5}>\n                            <Typography color=\"textSecondary\">\n                                {song} / {artist} - {album.substring(0, 10)}\n                            </Typography>\n                        </Grid>\n                        <Grid item xs container justify=\"center\" spacing={4}>\n                            <Grid item>\n                                {playing ? (\n                                    <PauseIcon\n                                        style={{\n                                            color: grey[100],\n                                            cursor: 'pointer',\n                                        }}\n                                        onClick={pause}\n                                    />\n                                ) : (\n                                        <PlayArrowIcon\n                                            style={{\n                                                color: grey[100],\n                                                cursor: 'pointer',\n                                            }}\n                                            onClick={play}\n                                        />\n                                    )}\n                            </Grid>\n                            <Grid item>\n                                <FullscreenIcon\n                                    style={{\n                                        color: grey[100],\n                                        cursor: 'pointer',\n                                    }}\n                                />\n                            </Grid>\n                        </Grid>\n                        <Grid item xs={5} container justify=\"flex-end\" spacing={2}>\n                            <Grid item>\n                                <Button variant=\"outlined\" color=\"primary\" onClick={() => setStep(prev)}>\n                                    上一步\n                                </Button>\n                            </Grid>\n                            <Grid item>\n                                <Button variant=\"outlined\" color=\"primary\" onClick={renewTime}>\n                                    换个效果\n                                </Button>\n                            </Grid>\n                            <Grid item>\n                                <Button variant=\"outlined\" color=\"primary\">\n                                    下载视频\n                                </Button>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                    <Grid item container direction=\"column\" spacing={0}>\n                        <Grid item>\n                            <Typography color=\"textPrimary\" variant=\"body2\">\n                                <Length time={currentTime} />\n                                &nbsp;/&nbsp;\n                                <Length time={length} />\n                            </Typography>\n                        </Grid>\n                        <Grid item>\n                            <Slider value={currentTime} onChange={onSeek} max={length} step={0.01} />\n                        </Grid>\n                        <Grid item>\n                            <div className={classes.sections}>\n                                {sections.map(({ start, climax }, i) => {\n                                    const end = (i === sections.length - 1 ? length : sections[i + 1].start);\n                                    return (\n                                        <div\n                                            key={`section-${i}`}\n                                            className={classes.section}\n                                            style={{\n                                                left: `${start / length * 100}%`,\n                                                right: `${(1 - end / length) * 100}%`,\n                                                backgroundColor: climax === 0 ? '#03DAC5' : '#F2994A',\n                                                opacity: i === currentSegment ? 1.0 : 0.2,\n                                            }}\n                                        />\n                                    );\n                                })}\n                            </div>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </div>\n        </div>\n    );\n}\n\nexport default Generation;\n","import SongSelection from './SongSelection';\nimport Moodboard from './Moodboard';\nimport { FetchData, FetchFont } from './Loading';\nimport Segmentation from './Segmentation';\nimport { InitialValues } from './Rules';\nimport Generation from './Generation';\n\nconst steps = {\n    SongSelection, FetchData, FetchFont, Moodboard, Segmentation,\n    InitialValues, Generation, \n};\n\nconst nextSteps = {\n    SongSelection: 'FetchData',\n    FetchData: 'Moodboard',\n    Moodboard: 'FetchFont',\n    FetchFont: 'Segmentation',\n    Segmentation: 'InitialValues',\n    InitialValues: 'Generation',\n};\n\nconst prevSteps = {\n    Segmentation: 'Moodboard',\n    InitialValues: 'Segmentation',\n    Generation: 'InitialValues',\n};\n\nconst initialStep = 'SongSelection';\n\nexport { steps, nextSteps, initialStep, prevSteps };\n","import React from 'react';\nimport NodeMap from '../retex/NodeMap';\n\nfunction InitialValues({ initial, setInitial, setStep, next, prev }) {\n    return (\n        <NodeMap setStep={setStep} defaults={initial} onUpdate={setInitial} name=\"initial\" next={next} prev={prev}/>\n    );\n}\n\nfunction GenerationRules({ generation, setGeneration, setStep, next, prev }) {\n    return (\n        <NodeMap setStep={setStep} defaults={generation} onUpdate={setGeneration} name=\"generation\" next={next} prev={prev}/>\n    );\n}\n\nexport { InitialValues, GenerationRules };\n","import React, { useState, useMemo, useCallback, useRef } from 'react';\nimport { MuiThemeProvider, makeStyles } from '@material-ui/core';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\nimport './index.css';\nimport { steps, initialStep, nextSteps, prevSteps } from './steps';\nimport defaultInitial from './assets/initial.json';\nimport defaultGeneration from './assets/generation.json';\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: { main: '#BB86FC' },\n        secondary: { main: '#A0A0A0' },\n        type: 'dark',\n    },\n});\n\nconst useStyles = makeStyles({\n    root: {\n        backgroundColor: '#121212',\n        overflow: 'hidden',\n        height: '100vh',\n    },\n});\n\nconst useAutoSave = (initial, saveKey, timeout = 3000) => {\n    const actualInitial = useMemo(() => {\n        if (localStorage[saveKey]) {\n            return JSON.parse(localStorage[saveKey]);\n        } else return initial;\n    }, [initial, saveKey]);\n    const valueRef = useRef(actualInitial);\n    const setValue = useCallback((value) => {\n        valueRef.current = value;\n        setTimeout(() => {\n            if (value !== valueRef.current) return;\n            localStorage[saveKey] = JSON.stringify(value);\n            console.log('Data saved!');\n        }, timeout);\n    }, [saveKey, timeout]);\n    return [actualInitial, setValue, valueRef];\n}\n\nfunction App() {\n    const classes = useStyles();\n    const [step, setStep] = useState(initialStep);\n    const Component = steps[step];\n\n    const [id, setId] = useState('');\n    const [data, setData] = useState({});\n    const [error, setError] = useState(null);\n    const [moodboard, setMoodboard] = useState({});\n    const [initial, setInitial, initialRef] = useAutoSave(defaultInitial, 'initial');\n    const [generation, setGeneration, generationRef] = useAutoSave(defaultGeneration, 'generation');\n\n    const params = {\n        next: nextSteps[step],\n        prev: prevSteps[step],\n        step, setStep,\n        id, setId,\n        error, setError,\n        data, setData,\n        moodboard, setMoodboard,\n        initial, setInitial, initialRef, generation, setGeneration, generationRef,\n    };\n\n    return (\n        <MuiThemeProvider theme={theme}>\n            <div className={classes.root}>\n                <Component {...params}/>\n            </div>\n        </MuiThemeProvider>\n    )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App/>, document.querySelector('#root'));\n","module.exports = __webpack_public_path__ + \"static/media/logo-colored.9176ce0d.svg\";"],"sourceRoot":""}