(this.webpackJsonpdcdc=this.webpackJsonpdcdc||[]).push([[0],{200:function(t){t.exports=JSON.parse('{"id":"dcdc@0.1.0","nodes":{"7":{"id":7,"data":{"expr":"0.2*x + 0.8*y","x":"0","y":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":80,"output":"val","data":{}}]},"y":{"connections":[{"node":81,"output":"val","data":{}}]}},"outputs":{"z":{"connections":[{"node":9,"input":"lt","data":{}}]}},"position":[629.5576979239682,173.11002715568486],"name":"Eval2"},"8":{"id":8,"data":{"expr":"0.7*x + 0.3*y","x":0,"y":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":80,"output":"val","data":{}}]},"y":{"connections":[{"node":81,"output":"val","data":{}}]}},"outputs":{"z":{"connections":[{"node":9,"input":"gt","data":{}}]}},"position":[630.743172850661,325.60895090105714],"name":"Eval2"},"9":{"id":9,"data":{"cond":0,"thres":0.401,"lt":0,"gt":0},"inputs":{"cond":{"connections":[{"node":81,"output":"val","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[{"node":7,"output":"z","data":{}}]},"gt":{"connections":[{"node":8,"output":"z","data":{}}]}},"outputs":{"val":{"connections":[{"node":11,"input":"x","data":{}}]}},"position":[957.6083949704647,254.9026950327183],"name":"Gather"},"10":{"id":10,"data":{"cond":0,"thres":0.2,"lt":0.2,"gt":0},"inputs":{"cond":{"connections":[{"node":105,"output":"val","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[]},"gt":{"connections":[]}},"outputs":{"val":{"connections":[{"node":11,"input":"y","data":{}}]}},"position":[957.5629134633895,442.75179778087517],"name":"Gather"},"11":{"id":11,"data":{"expr":"x + y","x":"0","y":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":9,"output":"val","data":{}}]},"y":{"connections":[{"node":10,"output":"val","data":{}}]}},"outputs":{"z":{"connections":[{"node":15,"input":"cond","data":{}},{"node":16,"input":"cond","data":{}}]}},"position":[1278.1563079093594,333.73169251985087],"name":"Eval2"},"15":{"id":15,"data":{"thres":0.35,"lt":0,"gt":0},"inputs":{"cond":{"connections":[{"node":11,"output":"z","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[]},"gt":{"connections":[{"node":16,"output":"val","data":{}}]}},"outputs":{"val":{"connections":[{"node":20,"input":"x","data":{}}]}},"position":[1609.9953144523115,219.6736255726782],"name":"Gather"},"16":{"id":16,"data":{"thres":0.6,"lt":1,"gt":2},"inputs":{"cond":{"connections":[{"node":11,"output":"z","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[]},"gt":{"connections":[]}},"outputs":{"val":{"connections":[{"node":15,"input":"gt","data":{}}]}},"position":[1608.6304664723032,406.64639733444403],"name":"Gather"},"20":{"id":20,"data":{"expr":"x*2 + y","x":"0","y":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":15,"output":"val","data":{}}]},"y":{"connections":[{"node":82,"output":"val","data":{}}]}},"outputs":{"z":{"connections":[{"node":22,"input":"ind","data":{}},{"node":26,"input":"ind","data":{}},{"node":32,"input":"ind","data":{}},{"node":34,"input":"ind","data":{}},{"node":55,"input":"ind","data":{}},{"node":61,"input":"ind","data":{}},{"node":66,"input":"ind","data":{}},{"node":72,"input":"ind","data":{}},{"node":125,"input":"ind","data":{}},{"node":127,"input":"ind","data":{}},{"node":129,"input":"ind","data":{}},{"node":133,"input":"ind","data":{}},{"node":137,"input":"ind","data":{}},{"node":139,"input":"ind","data":{}}]}},"position":[1939.972054507895,507.34270736087313],"name":"Eval2"},"22":{"id":22,"data":{"ind":0,"n0":1,"n1":2,"n2":1,"n3":2,"n4":1,"n5":2,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":38,"input":"x","data":{}}]}},"position":[3346.670393649235,-1662.4968880328245],"name":"Gather10"},"26":{"id":26,"data":{"ind":0,"n0":2,"n1":2,"n2":2,"n3":2,"n4":3,"n5":3,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":85,"input":"val","data":{}}]}},"position":[3345.0792564752837,-1276.4862334771287],"name":"Gather10"},"32":{"id":32,"data":{"ind":0,"n0":0,"n1":0,"n2":0.5,"n3":0.5,"n4":0.8,"n5":0.8,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":86,"input":"val","data":{}}]}},"position":[3341.810267363663,-883.4099935130816],"name":"Gather10"},"34":{"id":34,"data":{"ind":0,"n4":0.15,"n5":0.2,"n0":0,"n1":0,"n2":0,"n3":0,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":87,"input":"val","data":{}}]}},"position":[3342.635757611777,-497.59145840520614],"name":"Gather10"},"38":{"id":38,"data":{"expr":"30*(4^y)*x","x":"0","y":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":22,"output":"val","data":{}}]},"y":{"connections":[{"node":83,"output":"val","data":{}}]}},"outputs":{"z":{"connections":[{"node":84,"input":"val","data":{}},{"node":79,"input":"x","data":{}},{"node":77,"input":"cond","data":{}},{"node":78,"input":"cond","data":{}}]}},"position":[3654.574340194247,-1661.6336398972214],"name":"Eval2"},"55":{"id":55,"data":{"ind":0,"n0":1,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":88,"input":"val","data":{}}]}},"position":[3340.0473686943137,53.594142123251686],"name":"Gather10"},"61":{"id":61,"data":{"ind":0,"n0":1,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":109,"input":"val","data":{}}]}},"position":[3341.1477298827485,437.0236476174663],"name":"Gather10"},"66":{"id":66,"data":{"ind":0,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n0":0,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":114,"input":"val","data":{}}]}},"position":[3335.8586621472114,820.0955269984911],"name":"Gather10"},"72":{"id":72,"data":{"ind":4.36,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n0":0,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":119,"input":"val","data":{}}]}},"position":[3330.2892568121224,1212.0086546483733],"name":"Gather10"},"77":{"id":77,"data":{"thres":40,"lt":5,"gt":0},"inputs":{"cond":{"connections":[{"node":38,"output":"z","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[]},"gt":{"connections":[{"node":78,"output":"val","data":{}}]}},"outputs":{"val":{"connections":[{"node":120,"input":"val","data":{}}]}},"position":[4316.348892381454,1215.4223686541277],"name":"Gather"},"78":{"id":78,"data":{"thres":160,"gt":2,"lt":0},"inputs":{"cond":{"connections":[{"node":38,"output":"z","data":{}}]},"thres":{"connections":[]},"lt":{"connections":[{"node":79,"output":"y","data":{}}]},"gt":{"connections":[]}},"outputs":{"val":{"connections":[{"node":77,"input":"gt","data":{}}]}},"position":[4312.595093676878,1404.1325419382308],"name":"Gather"},"79":{"id":79,"data":{"expr":"6-(x/40)","x":"0"},"inputs":{"expr":{"connections":[]},"x":{"connections":[{"node":38,"output":"z","data":{}}]}},"outputs":{"y":{"connections":[{"node":78,"input":"lt","data":{}}]}},"position":[3983.783257449902,1459.790720597984],"name":"Eval"},"80":{"id":80,"data":{"key":"data.featuress.danceability","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":7,"input":"x","data":{}},{"node":8,"input":"x","data":{}}]}},"position":[276.33645712268213,159.99927844936423],"name":"Input"},"81":{"id":81,"data":{"key":"data.featuress.valence","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":7,"input":"y","data":{}},{"node":8,"input":"y","data":{}},{"node":9,"input":"cond","data":{}}]}},"position":[276.33646543163275,297.6574022532952],"name":"Input"},"82":{"id":82,"data":{"key":"section.climax","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":20,"input":"y","data":{}}]}},"position":[1601.0640867981956,605.4026437787995],"name":"Input"},"83":{"id":83,"data":{"key":"data.featuress.energy","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":38,"input":"y","data":{}}]}},"position":[3653.395404429138,-1503.2594263870615],"name":"Input"},"84":{"id":84,"data":{"key":"size"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":38,"output":"z","data":{}}]}},"outputs":{},"position":[3961.771994564776,-1659.66953591177],"name":"Output"},"85":{"id":85,"data":{"key":"splitMax"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":26,"output":"val","data":{}}]}},"outputs":{},"position":[3658.059324445897,-1274.8528678348525],"name":"Output"},"86":{"id":86,"data":{"key":"sizeRandom"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":32,"output":"val","data":{}}]}},"outputs":{},"position":[3660.7156297033957,-882.5392186592865],"name":"Output"},"87":{"id":87,"data":{"key":"rotateRandom"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":34,"output":"val","data":{}}]}},"outputs":{},"position":[3662.818482946992,-495.93920059030376],"name":"Output"},"88":{"id":88,"data":{"key":"modes.a.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":55,"output":"val","data":{}}]}},"outputs":{},"position":[3664.1838048100253,51.52973448803264],"name":"Output"},"90":{"id":90,"data":{"val":"0.6","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":91,"input":"val","data":{}}]}},"position":[3662.2498299548774,152.04133621619673],"name":"Const"},"91":{"id":91,"data":{"key":"modes.a.minDist"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":90,"output":"val","data":{}}]}},"outputs":{},"position":[3976.7674988814338,152.0413224108716],"name":"Output"},"92":{"id":92,"data":{"val":"0.8","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":93,"input":"val","data":{}}]}},"position":[3658.1827680936435,285.57575523403284],"name":"Const"},"93":{"id":93,"data":{"key":"modes.a.maxDist"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":92,"output":"val","data":{}}]}},"outputs":{},"position":[3974.734062493749,284.220101719364],"name":"Output"},"94":{"id":94,"data":{"key":"moodboard.letterSpacing","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[]}},"position":[562.6109401711797,-1389.2906595476538],"name":"Input"},"95":{"id":95,"data":{"key":"letterSpacing"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":106,"output":"val","data":{}}]}},"outputs":{},"position":[898.4181406674687,-1392.142055243681],"name":"Output"},"96":{"id":96,"data":{"key":"moodboard.TX","type":"string"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":97,"input":"val","data":{}}]}},"position":[557.1604984403307,-1254.6498670787007],"name":"Input"},"97":{"id":97,"data":{"key":"textColor"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":96,"output":"val","data":{}}]}},"outputs":{},"position":[895.4505875212358,-1257.6173136360558],"name":"Output"},"98":{"id":98,"data":{"key":"moodboard.fontName","type":"string"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":99,"input":"val","data":{}}]}},"position":[554.1930223059096,-1119.1358963722662],"name":"Input"},"99":{"id":99,"data":{"key":"fontFamily"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":98,"output":"val","data":{}}]}},"outputs":{},"position":[896.4398019762752,-1120.1249319945296],"name":"Output"},"101":{"id":101,"data":{"key":"moodboard.fontWeight","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":102,"input":"val","data":{}}]}},"position":[557.5406780465746,-986.490706723786],"name":"Input"},"102":{"id":102,"data":{"key":"fontWeight"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":101,"output":"val","data":{}}]}},"outputs":{},"position":[891.4939798921996,-988.5677886542302],"name":"Output"},"103":{"id":103,"data":{"key":"moodboard.BG","type":"string"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":104,"input":"val","data":{}}]}},"position":[552.9880771154428,-846.2493734917582],"name":"Input"},"104":{"id":104,"data":{"key":"backgroundColor"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":103,"output":"val","data":{}}]}},"outputs":{},"position":[902.2638814137683,-839.7217774285007],"name":"Output"},"105":{"id":105,"data":{"key":"data.featuress.acousticness","type":"number"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":10,"input":"cond","data":{}}]}},"position":[279.1999816894531,433.20001220703125],"name":"Input"},"106":{"id":106,"data":{"val":"0","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":95,"input":"val","data":{}}]}},"position":[552.8000112479046,-1542.0000464739162],"name":"Const"},"107":{"id":107,"data":{"key":"moodboard.GR","type":"string"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":108,"input":"val","data":{}}]}},"position":[552.3487839694801,-711.2636281632324],"name":"Input"},"108":{"id":108,"data":{"key":"pattern.color"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":107,"output":"val","data":{}}]}},"outputs":{},"position":[896.2170471951273,-717.9732450299343],"name":"Output"},"109":{"id":109,"data":{"key":"modes.b.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":61,"output":"val","data":{}}]}},"outputs":{},"position":[3657.0027778774534,436.3160112726651],"name":"Output"},"110":{"id":110,"data":{"val":"1.5","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":111,"input":"val","data":{}}]}},"position":[3654.981915288314,540.7305526867075],"name":"Const"},"111":{"id":111,"data":{"key":"modes.b.lineSpacing"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":110,"output":"val","data":{}}]}},"outputs":{},"position":[3969.5725599327275,542.07775588036],"name":"Output"},"112":{"id":112,"data":{"val":"partsMax","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":113,"input":"val","data":{}}]}},"position":[3652.287408883477,674.7851705623638],"name":"Const"},"113":{"id":113,"data":{"key":"modes.b.partsMax"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":112,"output":"val","data":{}}]}},"outputs":{},"position":[3968.2253242658458,678.8270326045414],"name":"Output"},"114":{"id":114,"data":{"key":"modes.c.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":66,"output":"val","data":{}}]}},"outputs":{},"position":[3649.5958293067597,819.9743350991611],"name":"Output"},"115":{"id":115,"data":{"val":"-0.1","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":116,"input":"val","data":{}}]}},"position":[3646.7955869964208,920.3128327459995],"name":"Const"},"116":{"id":116,"data":{"key":"modes.c.minAngle"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":115,"output":"val","data":{}}]}},"outputs":{},"position":[3969.9290587952396,918.0170285039098],"name":"Output"},"117":{"id":117,"data":{"val":"0.1","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":118,"input":"val","data":{}}]}},"position":[3643.925843749291,1051.1732496139211],"name":"Const"},"118":{"id":118,"data":{"key":"modes.c.maxAngle"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":117,"output":"val","data":{}}]}},"outputs":{},"position":[3971.6509243060054,1047.1556390589026],"name":"Output"},"119":{"id":119,"data":{"key":"modes.d.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":72,"output":"val","data":{}}]}},"outputs":{},"position":[3646.9173706743413,1211.886779870124],"name":"Output"},"120":{"id":120,"data":{"key":"modes.d.maxDist"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":77,"output":"val","data":{}}]}},"outputs":{},"position":[4625.670689406792,1215.817838452538],"name":"Output"},"122":{"id":122,"data":{"val":"0.8","type":"number"},"inputs":{"val":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":124,"input":"val","data":{}}]}},"position":[3646.364864137869,1319.5968728712744],"name":"Const"},"124":{"id":124,"data":{"key":"modes.d.minDist"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":122,"output":"val","data":{}}]}},"outputs":{},"position":[3967.4651753006847,1316.5309000859709],"name":"Output"},"125":{"id":125,"data":{"ind":0,"n0":1,"n1":1,"n2":0,"n3":1,"n4":0,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":126,"input":"val","data":{}}]}},"position":[3331.631575317041,1594.9241405605392],"name":"Gather10"},"126":{"id":126,"data":{"key":"modes.e.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":125,"output":"val","data":{}}]}},"outputs":{},"position":[3646.6358807232236,1593.1296539429993],"name":"Output"},"127":{"id":127,"data":{"ind":0,"n0":0.4,"n1":0.3,"n2":0,"n3":0.3,"n4":0,"n5":0.35,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":128,"input":"val","data":{}}]}},"position":[3970.885775058205,1598.5450620781767],"name":"Gather10"},"128":{"id":128,"data":{"key":"modes.e.minR"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":127,"output":"val","data":{}}]}},"outputs":{},"position":[4309.876004340525,1599.071884843993],"name":"Output"},"129":{"id":129,"data":{"ind":0,"n0":0.6,"n1":1.3,"n2":0,"n3":1.3,"n4":0,"n5":1.3,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":130,"input":"val","data":{}}]}},"position":[4630.756496918065,1598.4748917565048],"name":"Gather10"},"130":{"id":130,"data":{"key":"modes.e.scale"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":129,"output":"val","data":{}}]}},"outputs":{},"position":[4961.205997869946,1602.6482806866613],"name":"Output"},"131":{"id":131,"data":{"key":"moodboard.shape","type":"string"},"inputs":{"key":{"connections":[]},"type":{"connections":[]}},"outputs":{"val":{"connections":[{"node":132,"input":"val","data":{}}]}},"position":[551.941548174239,-580.4363052099693],"name":"Input"},"132":{"id":132,"data":{"key":"pattern.shape"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":131,"output":"val","data":{}}]}},"outputs":{},"position":[896.0379727768122,-579.0231422210135],"name":"Output"},"133":{"id":133,"data":{"ind":0,"n0":1,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":134,"input":"val","data":{}}]}},"position":[3327.9234881051498,1992.3945580335917],"name":"Gather10"},"134":{"id":134,"data":{"key":"pattern.center.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":133,"output":"val","data":{}}]}},"outputs":{},"position":[3646.594093229442,1991.32277849386],"name":"Output"},"137":{"id":137,"data":{"ind":0,"n0":1,"n1":1,"n2":1,"n3":1,"n4":1,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":138,"input":"val","data":{}}]}},"position":[3966.522021571024,1989.9008975981878],"name":"Gather10"},"138":{"id":138,"data":{"key":"pattern.follow.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":137,"output":"val","data":{}}]}},"outputs":{},"position":[4299.499376509778,1988.4029497916144],"name":"Output"},"139":{"id":139,"data":{"ind":0,"n0":0,"n1":1,"n2":0,"n3":1,"n4":0,"n5":1,"n6":0,"n7":0,"n8":0,"n9":0},"inputs":{"ind":{"connections":[{"node":20,"output":"z","data":{}}]},"n0":{"connections":[]},"n1":{"connections":[]},"n2":{"connections":[]},"n3":{"connections":[]},"n4":{"connections":[]},"n5":{"connections":[]},"n6":{"connections":[]},"n7":{"connections":[]},"n8":{"connections":[]},"n9":{"connections":[]}},"outputs":{"val":{"connections":[{"node":140,"input":"val","data":{}}]}},"position":[4627.776135455151,1989.9233025902572],"name":"Gather10"},"140":{"id":140,"data":{"key":"pattern.random.enabled"},"inputs":{"key":{"connections":[]},"val":{"connections":[{"node":139,"output":"val","data":{}}]}},"outputs":{},"position":[4949.364641461206,1986.8025694892835],"name":"Output"}}}')},201:function(t){t.exports=JSON.parse('{"id":"dcdc@0.1.0","nodes":{"37":{"id":37,"data":{"width":1920,"height":1080,"background":"#F2F2F2"},"inputs":{"width":{"connections":[]},"height":{"connections":[]},"background":{"connections":[]}},"outputs":{"ctx":{"connections":[{"node":41,"input":"ctx","data":{}}]}},"position":[524,185.20001220703125],"name":"Canvas"},"39":{"id":39,"data":{"key":"text"},"inputs":{"key":{"connections":[]}},"outputs":{"val":{"connections":[{"node":40,"input":"text","data":{}}]}},"position":[99.20004272460938,366],"name":"StringInput"},"40":{"id":40,"data":{"text":"\u88ab\u5bb3\u5984\u60f3\u643a\u5e2f\u5973\u5b50","x0":960,"y0":540,"size":90,"dir":"horizontal","align":"begin","spacing":0,"ignoreWhitespaces":true,"alignBaseline":true},"inputs":{"text":{"connections":[{"node":39,"output":"val","data":{}}]},"x0":{"connections":[]},"y0":{"connections":[]},"size":{"connections":[]},"dir":{"connections":[]},"align":{"connections":[]},"spacing":{"connections":[]},"ignoreWhitespaces":{"connections":[]},"alignBaseline":{"connections":[]}},"outputs":{"i":{"connections":[]},"ch":{"connections":[{"node":41,"input":"ch","data":{}}]},"x0":{"connections":[{"node":41,"input":"x0","data":{}}]},"y0":{"connections":[{"node":41,"input":"y0","data":{}}]},"size":{"connections":[{"node":41,"input":"size","data":{}}]}},"position":[520.0000610351562,371.60003662109375],"name":"Font"},"41":{"id":41,"data":{"ch":"","x0":960,"y0":540,"size":90,"rotate":0,"color":"#000000","fontFamily":"Hiragino Mincho Pro","fontWeight":900},"inputs":{"ctx":{"connections":[{"node":37,"output":"ctx","data":{}}]},"ch":{"connections":[{"node":40,"output":"ch","data":{}}]},"x0":{"connections":[{"node":40,"output":"x0","data":{}}]},"y0":{"connections":[{"node":40,"output":"y0","data":{}}]},"size":{"connections":[{"node":40,"output":"size","data":{}}]},"rotate":{"connections":[]},"color":{"connections":[]},"fontFamily":{"connections":[]},"fontWeight":{"connections":[]}},"outputs":{},"position":[940.7999877929688,257.20001220703125],"name":"Char"}}}')},208:function(t,e,n){t.exports=n(399)},213:function(t,e,n){},361:function(t,e,n){},379:function(t,e){},399:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(16),r=n.n(i),c=n(5),s=n(430),u=n(438),l=n(202),p=(n(213),n(433)),d=n(439),m=n(440),f=n(435),h=n(436),b=n(183),v=n(99),y=n.n(v),x=Object(s.a)({form:{height:"100%"},grid:{height:"100%"},input:{width:500}});var g=function(t){var e=t.next,n=t.setId,i=t.setStep,r=x(),c=Object(b.a)(),s=c.register,u=c.handleSubmit,l=Object(a.useCallback)((function(t){var a=t.id;n(a),i(e)}),[i,n,e]);return o.a.createElement("form",{onSubmit:u(l),className:r.form},o.a.createElement(p.a,{container:!0,justify:"center",spacing:4,className:r.grid,alignItems:"center",direction:"column"},o.a.createElement(p.a,{item:!0},o.a.createElement("img",{src:y.a,alt:"",height:"51"})),o.a.createElement(p.a,{item:!0,container:!0,spacing:1,justify:"center",alignItems:"center"},o.a.createElement(p.a,{item:!0},o.a.createElement(d.a,{name:"id",label:"\u7f51\u6613\u4e91\u97f3\u4e50ID",variant:"outlined",size:"small",classes:{root:r.input},inputRef:s({required:!0})})),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit"},"\u5f00\u59cb\u521b\u5efa"))),o.a.createElement(f.a,{maxWidth:"sm"},o.a.createElement(h.a,{variant:"caption",href:"#",color:"secondary"},"\u5982\u4f55\u83b7\u53d6?"))))},k=n(6),O=n(400),j=function(t,e,n,a,o,i){if(2*i>a||2*i>o)return!1;t.save(),t.translate(e,n),t.beginPath(0),t.arc(a-i,o-i,i,0,Math.PI/2),t.lineTo(i,o),t.arc(i,o-i,i,Math.PI/2,Math.PI),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2),t.lineTo(a-i,0),t.arc(a-i,i,i,3*Math.PI/2,2*Math.PI),t.lineTo(a,o-i),t.closePath(),t.fill(),t.restore()},w=function(t,e,n,a){var o,i,r,c,s,u,l,p,d,m=Math.random();m<=.2?(o=.75,i=.5,r=.5,c=.2,s=.2,u=.8):m<=.4?(o=.22,i=.3,r=.75,c=.5,s=.5,u=.8):m<=.6?(o=.43,i=.23,r=.8,c=.6,s=.2,u=.85):m<=.8?(o=.67,i=.7,r=.25,c=.5,s=.85,u=.2):m<=1&&(o=.2,i=.72,r=.53,c=.2,s=.8,u=.7),o+=m=.1*Math.random()-.05,i+=m,r+=m,c+=m,s+=m,u+=m,"circle"===e?(l=.2,p=.15,d=.12,t.beginPath(),t.arc(n*o,a*i,a*l,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(n*r,a*c,a*p,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(n*s,a*u,a*d,0,2*Math.PI),t.fill()):"square"===e?(l=.2,p=.15,d=.12,t.fillRect(n*o-a*l,a*i-a*l,a*l*2,a*l*2),t.fillRect(n*r-a*p,a*c-a*p,a*p*2,a*p*2),t.fillRect(n*s-a*d,a*u-a*d,a*d*2,a*d*2)):"line"===e?(l=.3,p=.2,d=.15,t.fillRect(n*o-a*l,a*i-.025*a,a*l*2,.05*a),t.fillRect(n*r-a*p,a*c-.025*a,a*p*2,.05*a),t.fillRect(n*s-a*d,a*u-.025*a,a*d*2,.05*a)):"triangle"===e?(p=.25,d=.2,M(t,o,i,l=.4,n,a),M(t,r,c,p,n,a),M(t,s,u,d,n,a)):"pentagon"===e&&(p=.16,d=.12,S(t,o,i,l=.25,n,a),S(t,r,c,p,n,a),S(t,s,u,d,n,a))},E=function(t,e,a,o,i){var r,c,s=n(143);c=a<.4?.2*t+.8*a:.7*t+.3*a,o<.2&&(c+=.2),r=c>.6?1:c>.35?.5:0;var u,l,p,d,m,f,h=1;Math.random()<.3&&(h=0);var b=1,v=1,y=1,x=1-.5*a-.25*t-.25*e;10*Math.random()<5&&(y=-1),.5===(d=x<.4?0:x<.6?.5:1)?u=(150*Math.random()+120+360)%360:0===d?u=(20-y*x/.4*35+y*Math.random()*15+360)%360:1===d&&(u=(185-y*(1-x)/.4*110+y*Math.random()*100+360)%360),m=o>.5?100*(1.2*t+1.2*e-2.4*o)*.5+50:t>.6?100*(.4*t+.6*e)*.5+50:100*(.5*t+.5*e-.1*o)*.5+50,l=(10*Math.random()-5+m)/100,.5===d&&(l*=.8),f=100*(.6*e+.4*o)*.3+120*a,(p=(20*Math.random()-10+f)/100)>.95&&(p=.95),l>.7&&(l=.7),l<.2&&(l=.2),.3*l+.7-p<0&&(b=0,v=0);var g,k,O=s("hsv("+u+","+l+","+p+")"),j=s(0===b?"hsv("+(u+10*y+360)%360+",0.9,0.2)":"hsv("+(u+10*y+360)%360+",0.05,0.95)");0===v?((g=l-.05)<0&&(g=0),(k=p+.1)>1&&(k=1)):((g=l+.05)>1&&(g=1),(k=p-.1)<0&&(k=0));var w=s("hsv("+(u+20*y+10*Math.random()+360)%360+","+g+","+k+")");Math.random()>0&&1===r&&(w=w.complement()),0===h&&(Math.random()>.5?(O=s("black"),j=s("white")):(j=s("black"),O=s("white")),Math.random()>.5&&(w=w.greyscale()));var E="circle",z=Math.random();return z<=.2?E="circle":z<=.4?E="square":z<=.6?E="line":z<=.8?E="triangle":z<=1&&(E="pentagon"),[O.toString("rgb"),w.toString("rgb"),j.toString("rgb"),E,r]},z=function(t,e,n,a,o){var i,r,c;r="ORADANO\u660e\u671d"===(i=a>.8?Math.random()<.2&&e>=.35&&n<.3?"ORADANO\u660e\u671d":"\u6e90\u4e91\u660e\u4f53":a>.55?Math.random()<.5&&.6*e+.4*t>=.85?"\u6e90\u754c\u660e\u671d":Math.random()<.7&&.6*e+.4*t>=.7?"\u88c5\u7532\u660e\u671d":"\u601d\u6e90\u5b8b\u4f53":a>.4?.6*e+.4*t>=.85?(c=Math.random())<.5?"\u6e90\u754c\u660e\u671d":c<.75?"\u601d\u6e90\u5b8b\u4f53":"\u6e90\u77f3\u9ed1\u4f53":.6*e+.4*t>=.7?(c=Math.random())<.7?"\u88c5\u7532\u660e\u671d":c<.85?"\u601d\u6e90\u5b8b\u4f53":"\u6e90\u77f3\u9ed1\u4f53":"\u6e90\u77f3\u9ed1\u4f53":a>.02?o<86&&n>.45?(c=Math.random())<.4?"\u601d\u6e90\u9ed1\u4f53":c<.6?"\u6e05\u677e\u624b\u5199\u4f53":c<.8?"\u7c89\u5706":"\u8d44\u6e90\u9ed1\u4f53":"\u601d\u6e90\u9ed1\u4f53":o<86&&n>.45?(c=Math.random())<.2?"\u672a\u6765\u83b9\u9ed1":c<.4?"\u601d\u6e90\u9ed1\u4f53":c<.6?"\u6e05\u677e\u624b\u5199\u4f53":c<.8?"\u7c89\u5706":"\u8d44\u6e90\u9ed1\u4f53":"\u672a\u6765\u83b9\u9ed1")||"\u6e90\u4e91\u660e\u4f53"===i||"\u6e90\u754c\u660e\u671d"===i||"\u88c5\u7532\u660e\u671d"===i?"\u601d\u6e90\u5b8b\u4f53":"\u6e90\u77f3\u9ed1\u4f53"===i?"\u601d\u6e90\u9ed1\u4f53":"\u7c89\u5706"===i?"\u8d44\u6e90\u9ed1\u4f53":"\u672a\u6765\u83b9\u9ed1";return[-.7949-18.2496*Math.log(e),40*Math.pow(7,e),e<.2?100:e>=.9?900:100*Math.round(10*e),i,r]},M=function(t,e,n,a,o,i){t.beginPath(),t.moveTo(o*e+.5*i*a,i*n+.433*i*a),t.lineTo(o*e-.5*i*a,i*n+.433*i*a),t.lineTo(o*e,i*n-.433*i*a),t.fill()},S=function(t,e,n,a,o,i){t.save(),t.translate(o*e,i*n+i*a*.25),t.moveTo(0,-i*a),t.beginPath();var r,c=2*Math.PI/5;for(r=0;r<5;r++)t.rotate(c),t.lineTo(0,-i*a);t.closePath(),t.fill(),t.restore()},C=function(t,e,n,a,o,i,r,s){for(var u=[],l=1;l<=200;l++){var p=E(n,e,o,a,t),d=Object(c.a)(p,5),m=d[0],f=d[1],h=d[2],b=d[3],v=d[4],y=z(n,e,o,a,t),x=Object(c.a)(y,5),g=x[0],k=x[1],O=x[2],M=x[3],S=x[4];g/=3,k/=3;var C=document.getElementById("littleCanvas"+l),T=C.getContext("2d");T.fillStyle=m,j(T,0,0,r,s,4),T.fillStyle=f,w(T,b,r,s),C.style.letterSpacing=g+"px",T.font=O+" "+k+"px "+M+","+S,T.fillStyle=h,T.textAlign="center",T.fillText(i,.5*(r+g),.5*s+k/3),T.font=O+" "+.5*k+"px "+M+","+S,T.fillStyle=h,T.textAlign="center",T.fillText(M,.5*(r+g),.8*s),u[l]={BG:m,GR:f,TX:h,letterSpacing:g,fontSize:k,fontWeight:O,fontName:M,backupFont:S,liveness:v,shape:b}}return u},T=Object(s.a)({grid:{height:"100%"},progress:{width:600},text:{marginTop:"1em",marginBottom:"8em"},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.00)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"rgba(80,80,80,.1)",outline:"1px solid slategrey"}}}),V=Object(k.a)({root:{boxShadow:"none",backgroundColor:"#121212",padding:"0 0","&:hover":{boxShadow:"0 0 0 0.06rem #BBBBBB"},"&:focus":{boxShadow:"0 0 0 0.06rem #BB86FC"}}})(m.a);var F=function(t){var e=t.setStep,n=t.next,i=t.setMoodboard,r=t.data,s=r.song,u=r.artist,l=r.album.al_name,d=r.featuress,f=d.tempo,h=d.energy,b=d.danceability,v=d.acousticness,y=d.valence,x=T(),g=Object(a.useState)(-1),k=Object(c.a)(g,2),j=k[0],w=k[1],E=Object(a.useState)([]),z=Object(c.a)(E,2),M=z[0],S=z[1],F=Object(a.useState)(Array.from({length:200})),I=Object(c.a)(F,1)[0];Object(a.useEffect)((function(){S(C(f,h,b,v,y,s,320,180))}),[v,b,h,s,f,y]);var N=Object(a.useCallback)((function(){e(n),i(M[j])}),[M,j,e,i,n]);return o.a.createElement(p.a,{container:!0,spacing:4,className:x.grid},o.a.createElement(p.a,{item:!0,xs:!0}),o.a.createElement(p.a,{item:!0,xs:8},o.a.createElement(O.a,{align:"center",color:"textSecondary",classes:{root:x.text}},s," / ",u," - ",l),o.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-evenly",spacing:6},o.a.createElement(p.a,{item:!0,container:!0,direction:"column",xs:!0},o.a.createElement(p.a,{item:!0},o.a.createElement(O.a,{color:"textPrimary",variant:"h4"},"\u9009\u62e9\u60c5\u7eea\u677f")),o.a.createElement(p.a,{item:!0},o.a.createElement(O.a,{color:"textSecondary",variant:"body2"},"\u4e3a\u60a8\u7684\u6b4c\u8bcd\u52a8\u753b\u9009\u62e9\u5916\u89c2\u98ce\u683c"))),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:N},"\u7ee7\u7eed\u521b\u5efa"))),o.a.createElement("div",{style:{height:"80vh",overflow:"hidden auto"}},o.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",spacing:6,className:x.grid},I.map((function(t,e){return o.a.createElement(p.a,{item:!0,key:e},o.a.createElement(V,null,o.a.createElement("canvas",{id:"littleCanvas"+(e+1),width:320,height:180,onClick:function(){return w(e+1)}})))}))))),o.a.createElement(p.a,{item:!0,xs:!0}))},I=n(14),N=n(2),P=n.n(N),A=n(18),D=n(37),R=n(437),B=n(109);var W=Object(s.a)({grid:{height:"100%"},progress:{width:600}});function G(t){var e=t.setStep,n=t.next,i=t.action,r=W();return Object(a.useEffect)((function(){Object(A.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i;case 3:e(n),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}),[e,i,n]),o.a.createElement(p.a,{container:!0,justify:"center",spacing:4,className:r.grid,alignItems:"center",direction:"column"},o.a.createElement(p.a,{item:!0},o.a.createElement("img",{src:y.a,alt:"",height:"51"})),o.a.createElement(p.a,{item:!0,classes:{root:r.progress}},o.a.createElement(R.a,null)))}var L=n(441),q=n(70),J=n.n(q),H=n(105),U=n.n(H),_=n(61),X=n.n(_),K=n(188),Q=n.n(K),Y=n(189),Z=n(19);var $=function(t){var e=t.time,n=Math.round(e),a=n%60,o=~~(n/60),i=a<10?"0".concat(a):"".concat(a),r=o<10?"0".concat(o):"".concat(o);return"".concat(r,":").concat(i)},tt=Object(s.a)({grid:{height:"100%"},progress:{width:600},text:{marginTop:"1em",marginBottom:"8em"},content:{marginTop:"26vh"},time:{marginLeft:40},sections:{marginTop:-16,position:"relative",height:16},section:{position:"absolute",top:0,bottom:0,border:"1px solid #121212",cursor:"pointer","&:hover":{outline:"1px solid #BB86FC",border:"1px solid #BB86FC"}},edge:{position:"absolute",top:0,bottom:0,zIndex:2,width:6,marginLeft:-3,"&:hover":{backgroundColor:"#BB86FC"},cursor:"ew-resize"}});var et=function(t){var e=t.setStep,n=t.next,i=t.prev,r=t.setData,s=t.data.sections,u=t.data,l=Object(a.useState)(u),d=Object(c.a)(l,2),f=d[0],h=d[1],b=f.song,v=f.artist,y=f.album.al_name,x=f.sections,g=f.featuress.duration_s,k=f.url,j=tt(),w=Object(a.useCallback)((function(){e(n)}),[e,n]),E=Object(a.useCallback)((function(){e(i)}),[e,i]),z=Object(a.useMemo)((function(){return new Audio(k)}),[k]);Object(a.useEffect)((function(){if(z)return function(){return z.pause()}}),[z]);var M=Object(a.useState)(0),S=Object(c.a)(M,2),C=S[0],T=S[1],V=Object(a.useState)(!1),F=Object(c.a)(V,2),I=F[0],N=F[1];Object(a.useEffect)((function(){if(z){var t=function(){return T(z.currentTime)},e=function(){return N(!0)},n=function(){return N(!1)};return z.addEventListener("timeupdate",t),z.addEventListener("play",e),z.addEventListener("pause",n),function(){z.removeEventListener("timeupdate",t),z.removeEventListener("play",e),z.removeEventListener("pause",n)}}}),[z]);var P=Object(a.useCallback)((function(t,e){z.currentTime=e}),[z]),A=Object(a.useCallback)((function(){return z.play()}),[z]),D=Object(a.useCallback)((function(){return z.pause()}),[z]),R=Object(Y.a)(),B=Object(c.a)(R,2),W=B[0],G=B[1].width;return o.a.createElement(p.a,{container:!0,spacing:4,className:j.grid},o.a.createElement(p.a,{item:!0,xs:!0}),o.a.createElement(p.a,{item:!0,xs:8},o.a.createElement(O.a,{align:"center",color:"textSecondary",classes:{root:j.text}},b," / ",v," - ",y),o.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",spacing:2},o.a.createElement(p.a,{item:!0,container:!0,direction:"column",xs:!0},o.a.createElement(p.a,{item:!0},o.a.createElement(O.a,{color:"textPrimary",variant:"h4"},"\u8c03\u6574\u6b4c\u66f2\u5206\u6bb5")),o.a.createElement(p.a,{item:!0},o.a.createElement(O.a,{color:"textSecondary",variant:"body2"},"\u62d6\u52a8\u6bb5\u843d\u4ee5\u8c03\u6574\u8d77\u6b62\u65f6\u95f4"))),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"outlined",color:"primary",disableElevation:!0,onClick:E},"\u4e0a\u4e00\u6b65")),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:w},"\u7ee7\u7eed\u521b\u5efa"))),o.a.createElement("div",{className:j.content},o.a.createElement(O.a,{className:j.time,color:"textPrimary",variant:"body2"},o.a.createElement($,{time:C}),"\xa0/\xa0",o.a.createElement($,{time:g})),o.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(p.a,{item:!0},I?o.a.createElement(U.a,{style:{color:X.a[100],cursor:"pointer"},onClick:D}):o.a.createElement(J.a,{style:{color:X.a[100],cursor:"pointer"},onClick:A})),o.a.createElement(p.a,{item:!0,xs:!0},o.a.createElement(L.a,{value:C,onChange:P,max:g}))),o.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(p.a,{item:!0},o.a.createElement(J.a,{style:{color:"#121212"}})),o.a.createElement(p.a,{item:!0,xs:!0},o.a.createElement("div",{className:j.sections,ref:W},x.map((function(t,e){var n=t.start,a=t.climax;return o.a.createElement("div",{key:"section-".concat(e),className:j.section,style:{left:"".concat(n/g*100,"%"),right:"".concat(100-(e===x.length-1?g:x[e+1].start)/g*100,"%"),backgroundColor:0===a?"#03DAC5":"#F2994A"},onClick:function(){var t=Z.cloneDeep(f);t.sections[e].climax=1-a,h(t),r(t)}})})),new Array(s.length-1).fill(0).map((function(t,e){return e+1})).map((function(t){return o.a.createElement(Q.a,{key:"handle=".concat(t,"-").concat(s[t].start),axis:"x",bounds:{left:-(s[t].start-s[t-1].start)/g*G,right:(t===s.length-1?g:s[t+1].start-s[t].start)/g*G},onDrag:function(e,n){var a=n.x,o=Z.cloneDeep(u);o.sections[t].start+=a/G*g;var i=t===o.sections.length-1?g:o.sections[t+1].start;o.sections[t].duration=i-o.sections[t].start,t>0&&(o.sections[t-1].duration=o.sections[t].start-o.sections[t-1].start),h(o)},onStop:function(){r(f)}},o.a.createElement("div",{className:j.edge,style:{left:s[t].start/g*G}}))}))))),o.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(p.a,{item:!0},o.a.createElement(J.a,{style:{color:"#121212"}})),o.a.createElement(p.a,{item:!0,xs:!0},o.a.createElement(O.a,{color:"textSecondary",variant:"body2",style:{marginTop:-16}},"\u84dd\u7eff\u8272\u4e3a\u666e\u901a\u6bb5\uff0c\u6a59\u8272\u4e3a\u9ad8\u6f6e\u6bb5\uff0c\u9f20\u6807\u5de6\u51fb\u8272\u5757\u53ef\u5728\u666e\u901a/\u9ad8\u6f6e\u6bb5\u72b6\u6001\u95f4\u5207\u6362"))))),o.a.createElement(p.a,{item:!0,xs:!0}))},nt=n(33),at=n(190),ot=n(54),it=n(203),rt=n(193),ct=n(194),st=n.n(ct),ut=n(195),lt=n(25),pt=n(9),dt=n(10),mt=n(12),ft=n(11),ht=n(34),bt=n(106),vt=n.n(bt);n(360),n(361);function yt(t){var e=t.name,n=t.align,a=void 0===n?"left":n;return o.a.createElement("li",{className:"cr text"},o.a.createElement("label",{style:{justifyContent:{left:"flex-start",middle:"center",right:"flex-end"}[a]}},o.a.createElement("span",{style:{lineHeight:"25px"}},e)))}function xt(t){var e=t.name,n=t.inputDef,a=n.type,i=n.defaultVal,r=n.options,c=n.controlType,s=t.inputDef,u=t.io,l=Object(D.a)(t,["name","inputDef","inputDef","io"]);if(0!==u.connections.length)return o.a.createElement(yt,{name:e});if(a||(a=vt()(i)),c||(c=a),"string"===c)return o.a.createElement(ht.f,Object.assign({path:e,label:e},l));if("boolean"===c)return o.a.createElement(ht.a,Object.assign({path:e,label:e},l));if("number"===c){var p=s.min,d=s.max,m=s.step,f=void 0===m?.01:m;return o.a.createElement(ht.d,Object.assign({path:e,label:e,min:p,max:d,step:f},l))}return"color"===c?o.a.createElement(ht.b,Object.assign({path:e,label:e},l)):"select"===c?o.a.createElement(ht.e,Object.assign({path:e,label:e,options:r},l)):o.a.createElement(yt,{name:e})}function gt(t){var e=t.children,n=t.className,a=t.onPointerMove,i=Object(D.a)(t,["children","className","onPointerMove"]);return o.a.createElement("div",{className:n,onPointerMove:a},e(i))}var kt=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.apply(this,arguments)}return Object(dt.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.node,e=Z.fromPairs(Z.toPairs(t.inputDefs).map((function(t){var e=Object(c.a)(t,2);return[e[0],e[1].defaultVal]})));this.setState({data:e})}},{key:"render",value:function(){var t=this,e=this.props,n=e.node,a=e.editor,i=e.bindSocket,r=e.bindControl,c=this.state,s=c.data,u=c.outputs,l=c.controls,p=c.inputs;return o.a.createElement(ht.g,{data:s,onUpdate:function(e){for(var o in e=Object(lt.a)(Object(lt.a)({},s),e)){var i=n.inputDefs[o].convert;i&&(e[o]=i(e[o]))}n.data=e,t.setState({data:e}),a.trigger("process")},style:{position:"relative",backgroundColor:"#1A1A1A"}},o.a.createElement(gt,null,(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(yt,{name:n.name,align:"middle"}))})),u.map((function(t){return o.a.createElement(gt,{className:"retex-port retex-output",key:t.key},(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(yt,{name:t.name,align:"right"}),o.a.createElement(ot.c,{type:"output",socket:t.socket,io:t,innerRef:i}))}))})),l.map((function(t){return o.a.createElement(ot.a,{className:"control",key:t.key,control:t,innerRef:r})})),p.map((function(t){return o.a.createElement(gt,{className:"retex-port retex-input",key:t.key,onPointerMove:function(t){t.stopPropagation()}},(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ot.c,{type:"input",socket:t.socket,io:t,innerRef:i}),!t.showControl()&&o.a.createElement(xt,Object.assign({name:t.name,inputDef:n.inputDefs[t.name],io:t},e)),t.showControl()&&o.a.createElement(ot.a,{className:"input-control",control:t.control,innerRef:r}))}))})))}}]),n}(ot.b),Ot=n(8),jt=new Proxy({any:new nt.c.Socket("any")},{get:function(t,e){return e in t||(t[e]=new nt.c.Socket(e),t[e].combineWith(t.any)),t[e]}}),wt=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(t,a,o){var i;return Object(pt.a)(this,n),(i=e.call(this,t)).inputDefs=a,i.outputDefs=o,i}return Object(dt.a)(n,[{key:"builder",value:function(t){t.inputDefs=Z.cloneDeep(this.inputDefs);for(var e=0,n=Object.keys(t.inputDefs);e<n.length;e++){var a=n[e];a in t.data&&(t.inputDefs[a].defaultVal=t.data[a])}t.outputDefs=this.outputDefs;var o,i=Object(I.a)(Z.toPairs(this.inputDefs));try{for(i.s();!(o=i.n()).done;){var r=Object(c.a)(o.value,2),s=r[0],u=r[1],l=u.type,p=u.defaultVal,d=u.displayName,m=void 0===d?s:d;l||(l=vt()(p)),s in t.data&&(p=t.data[s]);var f=new nt.c.Input(s,m,jt.any);s in t.data||(t.data[s]=p),t.addInput(f)}}catch(O){i.e(O)}finally{i.f()}var h,b=Object(I.a)(Z.toPairs(this.outputDefs));try{for(b.s();!(h=b.n()).done;){var v=Object(c.a)(h.value,2),y=v[0],x=v[1].displayName,g=void 0===x?y:x,k=new nt.c.Output(y,g,jt.any);t.addOutput(k)}}catch(O){b.e(O)}finally{b.f()}return t}}]),n}(nt.c.Component),Et=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Initiator",{},{})}return Object(dt.a)(n,[{key:"worker",value:function(){var t=Object(A.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),n}(wt),zt=[function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Input",{key:{type:"string"},type:{defaultVal:"number",type:"string",controlType:"select",options:["number","string"]}},{val:{type:"any",controlType:"string"}})}return Object(dt.a)(n,[{key:"convert",value:function(t,e){return"number"===e&&"string"===typeof t?parseFloat(t):"string"===e&&"number"===typeof t?"".concat(t):t}},{key:"worker",value:P.a.mark((function t(e,n,a){var o,i,r,c,s,u,l;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.key,i=e.type,r=a.inputs,!((c=Z.get(r,o))instanceof Array)){t.next=23;break}s=Object(I.a)(c),t.prev=5,s.s();case 7:if((u=s.n()).done){t.next=13;break}return l=u.value,t.next=11,{val:this.convert(l,i)};case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),s.e(t.t0);case 18:return t.prev=18,s.f(),t.finish(18);case 21:t.next=25;break;case 23:return t.next=25,{val:this.convert(c,i)};case 25:case"end":return t.stop()}}),t,this,[[5,15,18,21]])}))}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Output",{key:{type:"string"},val:{type:"any",controlType:"string"}},{})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e,n,a){var o,i,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.val,i=e.key,r=a.outputs,Z.set(r,i,o),void(t.next=5);case 5:case"end":return t.stop()}}),t)}))}]),n}(wt)],Mt=n(136),St=[function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){var t;return Object(pt.a)(this,n),(t=e.call(this,"Eval",{expr:{defaultVal:"x"},x:{defaultVal:"0",type:"number"}},{y:{type:"number"}})).parser=new Mt.a,t}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.expr,a=e.x,o=this.parser.parse(n),t.next=4,{y:o.evaluate({x:a})};case 4:case"end":return t.stop()}}),t,this)}))}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){var t;return Object(pt.a)(this,n),(t=e.call(this,"Eval2",{expr:{defaultVal:"x + y"},x:{defaultVal:"0",type:"number"},y:{defaultVal:"0",type:"number"}},{z:{type:"number"}})).parser=new Mt.a,t}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.expr,a=e.x,o=e.y,i=this.parser.parse(n),t.next=4,{z:i.evaluate({x:a,y:o})};case 4:case"end":return t.stop()}}),t,this)}))}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Const",{val:{type:"any",controlType:"string"},type:{defaultVal:"number",type:"string",controlType:"select",options:["number","string"]}},{val:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.val,"number"===e.type&&(n=parseFloat(n)),t.next=4,{val:n};case 4:case"end":return t.stop()}}),t)}))}]),n}(wt)],Ct=n(40),Tt=n(28),Vt=function(t,e,n){for(var a=0,o=0;o<t.length;++o)a+=e[o]*(1+n);return a-=e[0]*n/2,a-=e[t.length-1]*n/2},Ft=[function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Canvas",{width:{defaultVal:1920,min:360,max:2160},height:{defaultVal:1080,min:240,max:1920},background:{type:"color",defaultVal:"#F2F2F2"}},{ctx:{type:"canvas"}})}return Object(dt.a)(n,[{key:"worker",value:function(t,e,n){var a=t.width,o=t.height,i=t.background,r=n.inputs.canvas;return Object(Tt.a)(P.a.mark((function t(){var e,n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.width=a,r.height=o,e=Math.min(r.parentNode.clientWidth/r.width,r.parentNode.clientHeight/r.height),r.style.transform="scale(".concat(e,")"),r.style.marginLeft="".concat(-a/2,"px"),r.style.marginTop="".concat(-o/2,"px"),(n=r.getContext("2d")).fillStyle=i,n.fillRect(0,0,a,o),t.next=11,{ctx:n};case 11:case"end":return t.stop()}}),t)})))()}}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Font",{text:{defaultVal:"\u88ab\u5bb3\u5984\u60f3\u643a\u5e2f\u5973\u5b50"},x0:{defaultVal:960,min:-1e3,max:3e3},y0:{defaultVal:540,min:-1e3,max:3e3},size:{defaultVal:90,min:10,max:400},dir:{defaultVal:"horizontal",type:"string",controlType:"select",options:["horizontal","vertical"]},align:{defaultVal:"begin",type:"string",controlType:"select",options:["begin","middle","end"]},spacing:{defaultVal:0,min:-2,max:2},ignoreWhitespaces:{defaultVal:!0},alignBaseline:{defaultVal:!0}},{i:{type:"number"},ch:{type:"string"},x0:{type:"number"},y0:{type:"number"},size:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=this,n=t.text,a=t.x0,o=t.y0,i=t.size,r=t.dir,c=t.align,s=t.spacing,u=t.ignoreWhitespaces,l=t.alignBaseline;return Object(Tt.a)(P.a.mark((function t(){var p,d,m,f,h,b,v,y;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u&&(n=n.split(/\s+/).join("")),p=a,d=o,m=new Array(n.length).fill(i),f=Vt(n,m,s),"middle"!==c){t.next=12;break}t.t0=r,t.next="horizontal"===t.t0?8:"vertical"===t.t0?10:12;break;case 8:return p-=f/2,t.abrupt("break",12);case 10:return d-=f/2,t.abrupt("break",12);case 12:if("end"!==c){t.next=20;break}t.t1=r,t.next="horizontal"===t.t1?16:"vertical"===t.t1?18:20;break;case 16:return p-=f,t.abrupt("break",20);case 18:return d-=f,t.abrupt("break",20);case 20:t.t2=r,t.next="horizontal"===t.t2?23:"vertical"===t.t2?25:27;break;case 23:return p+=m[0]/2,t.abrupt("break",27);case 25:return d+=m[0]/2,t.abrupt("break",27);case 27:h=0;case 28:if(!(h<n.length)){t.next=44;break}return b=n[h],v=p,y=l&&"horizontal"===r?d-(m[h]-i)/2:d,t.next=34,{i:h,ch:b,x0:v,y0:y,size:m[h]};case 34:t.t3=r,t.next="horizontal"===t.t3?37:"vertical"===t.t3?39:41;break;case 37:return p+=(m[h]+m[h+1])*(1+s)/2,t.abrupt("break",41);case 39:return d+=(m[h]+m[h+1])*(1+s)/2,t.abrupt("break",41);case 41:++h,t.next=28;break;case 44:e.closed=["cc"];case 45:case"end":return t.stop()}}),t)})))()}}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Char",{ctx:{type:"canvas",required:!0},ch:{defaultVal:""},x0:{defaultVal:960,min:-1e3,max:3e3},y0:{defaultVal:540,min:-1e3,max:3e3},size:{defaultVal:90,min:10,max:400},rotate:{defaultVal:0,min:-1,max:1},color:{defaultVal:"#000000",type:"color"},fontFamily:{defaultVal:"Hiragino Mincho Pro"},fontWeight:{defaultVal:900,min:100,max:900,step:100}},{})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o,i,r,c,s,u,l;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ctx,a=e.ch,o=e.x0,i=e.y0,r=e.size,c=e.rotate,s=e.color,u=e.fontFamily,l=e.fontWeight,n.textBaseline="middle",n.textAlign="center",n.fillStyle=s,n.font="".concat(l," ").concat(r,"px '").concat(u,"'"),n.save(),n.translate(o,i),n.rotate(c*Math.PI),n.fillText(a,0,0),n.restore(),void(t.next=12);case 12:case"end":return t.stop()}}),t)}))}]),n}(wt)],It=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Split",{text:{defaultVal:"\u88ab\u5bb3\u5984\u60f3\u643a\u5e2f\u5973\u5b50"},parts:{defaultVal:2,min:1,max:5,step:1},randomness:{defaultVal:2,min:0,max:4}},{parts:{type:"number"},i:{type:"number"},text:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.text,n=t.parts,a=t.randomness;return Object(Tt.a)(P.a.mark((function t(){var o,i,r,c,s;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.length/n,i=[0].concat(Object(Ot.a)(new Array(n-1).fill(0).map((function(){return 2*(Math.random()-.5)*a}))),[0]),r=0;case 3:if(!(r<n)){t.next=11;break}return c=Math.round(r*o+i[r]),s=Math.round((r+1)*o+i[r+1]),t.next=8,{parts:n,i:r,text:e.substring(c,s)};case 8:++r,t.next=3;break;case 11:case"end":return t.stop()}}),t)})))()}}]),n}(wt),Nt=function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"horizontal";switch(o){case"horizontal":return{x:n*t,y:a*e};case"vertical":return{x:a*t,y:n*e};default:return{x:0,y:0}}},Pt=function(t,e){return 1/(t+1)*(e+1)},At=function(t,e){return Math.random()*(e-t)+t},Dt=function(t,e){var n=t.x,a=t.y;return{x:n+e.x,y:a+e.y}},Rt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(n&&(e={vertical:"horizontal",horizontal:"vertical"}[e]),e){case"horizontal":return{x:a?-t:t,y:0};case"vertical":return{x:0,y:t};default:return{x:0,y:0}}},Bt=function(t,e){return e?1-t:t},Wt=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"BalancedA",{width:{type:"number"},height:{type:"number"},i:{type:"number"},parts:{type:"number"},dist:{defaultVal:.7,min:0,max:1},dir:{defaultVal:"horizontal",type:"string",controlType:"select",options:["horizontal","vertical"]}},{x0:{type:"number"},y0:{type:"number"},dir:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.width,n=t.height,a=t.i,o=t.parts,i=t.dist,r=t.dir;return Object(Tt.a)(P.a.mark((function t(){var c,s,u;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Nt(e,n,.5,(Pt(o,a)-.5)*i+.5,r),s=c.x,u=c.y,t.next=3,{x0:s,y0:u,dir:r,align:"middle"};case 3:case"end":return t.stop()}}),t)})))()}}]),n}(wt),Gt=n(30),Lt=n.n(Gt),qt=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"BalancedB",{text:{type:"string"},rows:{defaultVal:3,min:2,max:4,step:1},cols:{defaultVal:4,min:2,max:4,step:1},dist:{defaultVal:2,min:.5,max:10},width:{type:"number"},height:{type:"number"},size:{type:"number"}},{text:{type:"string"},x0:{type:"number"},y0:{type:"number"},align:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.text,n=t.rows,a=t.cols,o=t.dist,i=t.width,r=t.height,c=t.size;return Object(Tt.a)(P.a.mark((function t(){var s,u,l,p,d,m,f;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=Lt()(new Array(a).fill(0).map((function(t,e){return new Array(n).fill(0).map((function(t,n){return{u:e,v:n}}))})).reduce((function(t,e){return[].concat(Object(Ot.a)(t),Object(Ot.a)(e))}),[]),{count:Math.min(n*a,e.length)}).sort((function(t,e){var n=t.u,a=t.v,o=e.u,i=e.v;return i===a?n-o:a-i})),u=0;case 2:if(!(u<s.length)){t.next=11;break}return l=s[u],p=l.u,d=l.v,m=i/2+(p-(a-1)/2)*o*c,f=r/2+(d-(n-1)/2)*o*c,t.next=8,{text:e[u],x0:m,y0:f,align:"middle"};case 8:++u,t.next=2;break;case 11:case"end":return t.stop()}}),t)})))()}}]),n}(wt),Jt=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Neutral",{width:{type:"number"},height:{type:"number"},i:{type:"number"},size:{type:"number"},lineSpacing:{defaultVal:1.5,min:.5,max:5},dir:{defaultVal:"horizontal",type:"string",controlType:"select",options:["horizontal","vertical"]},align:{defaultVal:"begin",type:"string",controlType:"select",options:["begin","end"]},position:{defaultVal:"left",type:"string",controlType:"select",options:["left","right"]},x0:{defaultVal:.15,min:.1,max:.25},y0:{defaultVal:.3,min:.1,max:.5}},{x0:{type:"number"},y0:{type:"number"},dir:{type:"string"},align:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.width,n=t.height,a=t.size,o=t.lineSpacing,i=t.i,r=t.dir,c=t.align,s=t.position,u=t.x0,l=t.y0;return Object(Tt.a)(P.a.mark((function t(){var p,d,m,f;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(p=Bt(u,"end"===c),d=Bt(l,"right"===s),m=Nt(e,n,p,d,r),f=Rt(a*o*("left"===s?1:-1),r,!0);i>0;--i)m=Dt(m,f);return t.next=7,{x0:m.x,y0:m.y,dir:r,align:c};case 7:case"end":return t.stop()}}),t)})))()}}]),n}(wt),Ht=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"ActiveA",{width:{type:"number"},height:{type:"number"},i:{type:"number"},angle:{defaultVal:-.2,min:-1,max:1},dir:{defaultVal:"horizontal",type:"string",controlType:"select",options:["horizontal","vertical"]},x0:{defaultVal:.35,min:.25,max:.5},y0:{defaultVal:.25,min:.15,max:.4}},{x0:{type:"number"},y0:{type:"number"},dir:{type:"string"},rotate:{type:"number"},align:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.width,n=t.height,a=t.i,o=t.angle,i=t.dir,r=t.x0,c=t.y0;return Object(Tt.a)(P.a.mark((function t(){var s,u,l,p,d;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Bt(r,1===a),u=Bt(c,1===a),l=Nt(e,n,s,u,i),p=l.x,d=l.y,t.next=5,{x0:p,y0:d,dir:i,rotate:o*Math.PI/2,align:"middle"};case 5:case"end":return t.stop()}}),t)})))()}}]),n}(wt),Ut=n(108),_t=n.n(Ut),Xt=function(t,e,n){var a=t.x,o=t.y,i=e.x,r=e.y,c=n.x,s=n.y,u=Math.abs((r-o)*c-(i-a)*s+i*o-r*a)/Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2)),l=Math.atan2(r-o,i-a);return Math.abs(u/Math.sin(l+Math.PI/4))/Math.sqrt(2)},Kt=function(t,e,n){for(var a=e.map((function(t){return function(t,e){var n=t.x,a=t.y,o=t.r,i=e.x,r=e.y;return Math.max(Math.abs(i-n),Math.abs(r-a))-o}(t,n)})).reduce((function(t,e){return Math.min(t,e)}),1e5),o=0;o<t.length;++o){var i=t[o],r=t[(o+1)%t.length],c=Xt(i,r,n);c<a&&(a=c)}return a},Qt=function(t,e){for(var n=e.tries,a=e.width,o=e.height,i=e.maxR,r=e.minR,c=void 0===r?0:r,s=[],u=t.map((function(t){return[t.x,t.y]})),l=0;l<n;++l){var p=At(0,a),d=At(0,o);if(_t()([p,d],u)){var m=Math.min(i,Kt(t,s,{x:p,y:d}));m<=c||s.push({x:p,y:d,r:m})}}return s},Yt=function(t,e){e.debug;var n=e.angle,a=e.scale,o=[];for(t=t.sort((function(t,e){return t.x+t.y-(e.x+e.y)}));t.length>0;){var i=[];i.push(t.splice(0,1)[0]);for(var r=function(){var e=i[i.length-1],o=e.x,r=e.y,c=e.r,s=Object(Ot.a)(t).map((function(t,e){return Object(lt.a)(Object(lt.a)({},t),{},{i:e})})).map((function(t){var e=t.x,i=t.y;return{x:e,y:i,r:t.r,i:t.i,s:Math.abs(Math.atan2(-(i-r),e-o))/n,d:(e-o)/c/a}})).filter((function(t){return t.s<1})).map((function(t){var e=t.d,n=t.s,a=Object(D.a)(t,["d","s"]);return Object(lt.a)(Object(lt.a)({},a),{},{k:n+e})})).sort((function(t,e){return t.k-e.k}));if(0===s.length)return"break";i.push(t.splice(s[0].i,1)[0])};;){if("break"===r())break}o.push(i)}return o.sort((function(t,e){return Object(c.a)(t,1)[0].y-Object(c.a)(e,1)[0].y})).reduce((function(t,e){return[].concat(Object(Ot.a)(t),Object(Ot.a)(e))}),[])},Zt=[It,Wt,qt,Jt,Ht,function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"ActiveB",{width:{type:"number"},height:{type:"number"},text:{type:"string"},size:{type:"number"},dimension:{type:"dimension"},tries:{defaultVal:1e4,min:100,max:5e4,step:100},minR:{defaultVal:.78,min:0,max:1},sort:{defaultVal:!0},sortAngle:{defaultVal:.2,min:0,max:.5},sortScale:{defaultVal:3,min:0,max:10}},{i:{type:"number"},text:{type:"string"},x0:{type:"number"},y0:{type:"number"},size:{type:"number"},align:{type:"string"}})}return Object(dt.a)(n,[{key:"worker",value:function(t){var e=t.width,n=t.height,a=t.text,o=t.tries,i=t.size,r=t.minR,c=t.sort,s=t.sortAngle,u=t.sortScale,l=t.dimension;return Object(Tt.a)(P.a.mark((function t(){var p,d,m,f,h,b,v,y,x;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=a.split(/\s+/).join(""),p=[{x:e*l.x0,y:n*l.y0},{x:e*l.x1,y:n*l.y0},{x:e*l.x1,y:n*l.y1},{x:e*l.x0,y:n*l.y1}],d=Qt(p,{tries:o,width:e,height:n,maxR:i,minR:i*r}),m=Lt()(d,{count:Math.min(d.length,a.length)}),f=c?Yt(m,{angle:s*Math.PI,scale:u}):m,h=0;case 6:if(!(h<f.length)){t.next=13;break}return b=f[h],v=b.x,y=b.y,x=b.r,t.next=10,{i:h,text:a[h],x0:v,y0:y,size:2*x,align:"middle"};case 10:++h,t.next=6;break;case 13:case"end":return t.stop()}}),t)})))()}}]),n}(wt)],$t=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Uniform",{min:{defaultVal:-.5,min:-1,max:1},max:{defaultVal:.5,min:-1,max:1}},{val:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.min,a=e.max,t.next=3,{val:n+Math.random()*(a-n)};case 3:case"end":return t.stop()}}),t)}))}]),n}(wt),te=function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Step",{i:{defaultVal:0},start:{defaultVal:0,min:-1,max:1},step:{defaultVal:.1,min:-1,max:1}},{val:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.i,a=e.start,o=e.step,t.next=3,{val:a+n*o};case 3:case"end":return t.stop()}}),t)}))}]),n}(wt),ee=[function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Scatter",{cond:{type:"number"},thres:{type:"number"},val:{type:"number"}},{lt:{type:"number"},gt:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.cond,a=e.thres,o=e.val,!(n<=a)){t.next=6;break}return t.next=4,{lt:o};case 4:t.next=8;break;case 6:return t.next=8,{gt:o};case 8:case"end":return t.stop()}}),t)}))}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Gather",{cond:{type:"number"},thres:{type:"number"},lt:{defaultVal:0},gt:{defaultVal:0}},{val:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.cond,a=e.thres,o=e.lt,i=e.gt,!(n<=a)){t.next=6;break}return t.next=4,{val:o};case 4:t.next=8;break;case 6:return t.next=8,{val:i};case 8:case"end":return t.stop()}}),t)}))}]),n}(wt),function(t){Object(mt.a)(n,t);var e=Object(ft.a)(n);function n(){return Object(pt.a)(this,n),e.call(this,"Gather10",{ind:{defaultVal:0,min:0,max:9},n0:{defaultVal:0},n1:{defaultVal:0},n2:{defaultVal:0},n3:{defaultVal:0},n4:{defaultVal:0},n5:{defaultVal:0},n6:{defaultVal:0},n7:{defaultVal:0},n8:{defaultVal:0},n9:{defaultVal:0}},{val:{type:"number"}})}return Object(dt.a)(n,[{key:"worker",value:P.a.mark((function t(e){var n,a,o,i,r,c,s,u,l,p,d,m;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ind,a=e.n0,o=e.n1,i=e.n2,r=e.n3,c=e.n4,s=e.n5,u=e.n6,l=e.n7,p=e.n8,d=e.n9,m=[a,o,i,r,c,s,u,l,p,d],t.next=4,{val:m[n]};case 4:case"end":return t.stop()}}),t)}))}]),n}(wt)],ne=[$t,te].concat(Object(Ot.a)(ee)),ae=[Et].concat(Object(Ot.a)(zt),Object(Ot.a)(St),Object(Ot.a)(Ft),Object(Ot.a)(Zt),Object(Ot.a)(ne)),oe=Object(s.a)({buttons:{position:"absolute",right:16,bottom:16}});var ie=function(t){var e=t.setStep,n=t.defaults,i=t.onUpdate,r=t.name,s=t.next,u=t.prev,l=oe(),d=Object(a.useCallback)((function(){e(s)}),[e,s]),f=Object(a.useCallback)((function(){e(u)}),[e,u]),h=Object(a.useState)(null),b=Object(c.a)(h,2),v=b[0],y=b[1],x=Object(a.useMemo)((function(){return v?new nt.c.NodeEditor("dcdc@0.1.0",v):null}),[v]),g=Object(a.useRef)(i);Object(a.useEffect)((function(){g.current=i}),[i]),Object(a.useEffect)((function(){x&&Object(A.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x.use(at.a),x.use(ot.d,{component:kt}),x.use(it.a),ae.forEach((function(t){return x.register(new t)})),!n){t.next=7;break}return t.next=7,x.fromJSON(n);case 7:x.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(A.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,x.toJSON();case 3:t.t1=t.sent,t.t0.current.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))()}),[x,n]);var k=Object(a.useCallback)(Object(A.a)(P.a.mark((function t(){var e,n,a;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.toJSON();case 4:e=t.sent,n=JSON.stringify(e),a=new Blob([n],{type:"application/json"}),Object(rt.saveAs)(a,"".concat(r,".json"));case 8:case"end":return t.stop()}}),t)}))),[x,r]),O=Object(a.useCallback)(function(){var t=Object(A.a)(P.a.mark((function t(e){var n,a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x){t.next=2;break}return t.abrupt("return");case 2:return n=e[0],t.next=5,Object(ut.readAsText)(n);case 5:return a=t.sent,o=JSON.parse(a),t.next=9,x.fromJSON(o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[x]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:y,style:{position:"absolute",left:0,top:0,width:"100vw",height:"100vh"}}),o.a.createElement(p.a,{container:!0,spacing:2,classes:{root:l.buttons},justify:"flex-end"},o.a.createElement(p.a,{item:!0},o.a.createElement(st.a,{fileTypes:[".json"],handleFiles:O},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span"},"\u4e0a\u4f20"))),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:k},"\u4e0b\u8f7d")),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:f},"\u4e0a\u4e00\u6b65")),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:d},"\u4e0b\u4e00\u6b65"))))};var re=n(199),ce=n.n(re),se=[{name:"Color set",type:"folder",children:[{name:"Text color",type:"color",path:"textColor"},{name:"Background color",type:"color",path:"backgroundColor"}]},{name:"Type",type:"folder",children:[{name:"Font family",type:"string",path:"fontFamily"},{name:"Font weight",type:"number",path:"fontWeight",min:100,max:900,step:100},{name:"Font size",type:"number",path:"size"},{name:"Letter spacing",type:"number",path:"letterSpacing"},{name:"Maximum split",type:"number",path:"splitMax"},{name:"Size randomness",type:"number",path:"sizeRandom"},{name:"Rotate randomness",type:"number",path:"rotateRandom"}]},{name:"Layout",type:"folder",children:[{name:"Type A",type:"folder",children:[{name:"Enabled",type:"boolean",path:"modes.a.enabled"},{name:"Minimum distance",type:"number",path:"modes.a.minDist",step:.01},{name:"Maximum distance",type:"number",path:"modes.a.maxDist",step:.01}]},{name:"Type B",type:"folder",children:[{name:"Enabled",type:"boolean",path:"modes.b.enabled"},{name:"Line spacing",type:"number",path:"modes.b.lineSpacing",step:.01}]},{name:"Type C",type:"folder",children:[{name:"Enabled",type:"boolean",path:"modes.c.enabled"},{name:"Minimum angle",type:"number",path:"modes.c.minAngle",step:.01},{name:"Maximum angle",type:"number",path:"modes.c.maxAngle",step:.01}]},{name:"Type D",type:"folder",children:[{name:"Enabled",type:"boolean",path:"modes.d.enabled"},{name:"Minimum distance",type:"number",path:"modes.d.minDist",step:.01},{name:"Maximum distance",type:"number",path:"modes.d.maxDist",step:.01}]},{name:"Type E",type:"folder",children:[{name:"Enabled",type:"boolean",path:"modes.e.enabled"},{name:"Minimum radius",type:"number",path:"modes.e.minR",min:0,max:1,step:.01},{name:"Scale",type:"number",path:"modes.e.scale",step:.01}]}]},{name:"Pattern",type:"folder",children:[{name:"Shape",type:"string",path:"pattern.shape"},{name:"Graphic color",type:"color",path:"pattern.color"},{name:"Center",type:"boolean",path:"pattern.center.enabled"},{name:"Follow",type:"boolean",path:"pattern.follow.enabled"},{name:"Random",type:"boolean",path:"pattern.random.enabled"}]}],ue=n(27),le=n(137),pe=function(){function t(e){Object(pt.a)(this,t),this.id=e,this.components={}}return Object(dt.a)(t,[{key:"register",value:function(t){this.components[t.name]=t}},{key:"abort",value:function(){var t=Object(A.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"process",value:function(){var t=Object(A.a)(P.a.mark((function t(e,n){var a,o,i,r,s,u,l,p,d,m,f,h,b,v,y,x,g,k,O,j,w,E,z,M,S,C,T,V,F,N,A;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.nodes,o={inputNodes:{},inputs:{}},i=Object(I.a)(Z.toPairs(a)),t.prev=3,i.s();case 5:if((r=i.n()).done){t.next=32;break}s=Object(c.a)(r.value,2),u=s[1],l=u.id,p=u.inputs,o.inputNodes[l]=[],o.inputs[l]={},d=o.inputNodes[l],m=o.inputs[l],f=Object(I.a)(Z.toPairs(p)),t.prev=11,f.s();case 13:if((h=f.n()).done){t.next=22;break}if(b=Object(c.a)(h.value,2),v=b[0],0!==(y=b[1].connections).length){t.next=17;break}return t.abrupt("continue",20);case 17:x=Object(c.a)(y,1),g=x[0],k=g.node,O=g.output,d.includes(k)||d.push(k),m[v]={id:k,key:O};case 20:t.next=13;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(11),f.e(t.t0);case 27:return t.prev=27,f.f(),t.finish(27);case 30:t.next=5;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(3),i.e(t.t1);case 37:return t.prev=37,i.f(),t.finish(37);case 40:t.prev=40,(j=[]).push({values:{},processed:[],unprocessed:Z.toPairs(a).map((function(t){var e=Object(c.a)(t,2);e[0];return e[1].id}))});case 43:if(0===j.length){t.next=81;break}w=j.splice(0,1),E=Object(c.a)(w,1),z=E[0],M=this.run(a,o,z,n),S=!0,C=!1,t.prev=48,V=Object(le.a)(M);case 50:return t.next=52,V.next();case 52:return F=t.sent,S=F.done,t.next=56,F.value;case 56:if(N=t.sent,S){t.next=63;break}A=N,j.push(A);case 60:S=!0,t.next=50;break;case 63:t.next=69;break;case 65:t.prev=65,t.t2=t.catch(48),C=!0,T=t.t2;case 69:if(t.prev=69,t.prev=70,S||null==V.return){t.next=74;break}return t.next=74,V.return();case 74:if(t.prev=74,!C){t.next=77;break}throw T;case 77:return t.finish(74);case 78:return t.finish(69);case 79:t.next=43;break;case 81:t.next=86;break;case 83:t.prev=83,t.t3=t.catch(40),console.log(t.t3);case 86:case"end":return t.stop()}}),t,this,[[3,34,37,40],[11,24,27,30],[40,83],[48,65,69,79],[70,,74,78]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"findNode",value:function(t,e){return Z.toPairs(t).map((function(t){var e=Object(c.a)(t,2);e[0];return e[1]})).find((function(t){return t.id===e}))}},{key:"run",value:function(t,e,n,a){var o=this,i=n.processed,r=n.unprocessed,s=n.values;return Object(Tt.a)(P.a.mark((function n(){var u,l,p,d,m,f,h,b,v,y,x,g,k,O,j,w,E,z,M,S,C,T,V;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=e.inputNodes,l=e.inputs,void 0!==(p=r.find((function(t){return u[t].every((function(t){return t in s}))})))){n.next=4;break}throw new Error("no reachable node");case 4:if(d=o.findNode(t,p)){n.next=7;break}throw new Error("unable to find node");case 7:m=d.name,f=d.data,h=Z.clone(f),b=Object(I.a)(Z.toPairs(l[p]));try{for(b.s();!(v=b.n()).done;)y=Object(c.a)(v.value,2),x=y[0],g=y[1],k=g.id,O=g.key,h[x]=s[k][O]}catch(F){b.e(F)}finally{b.f()}j=o.components[m],w=j.worker.call(j,h,d,a),E=!0,z=!1,n.prev=15,S=Object(le.a)(w);case 17:return n.next=19,Object(Ct.a)(S.next());case 19:return C=n.sent,E=C.done,n.next=23,Object(Ct.a)(C.value);case 23:if(T=n.sent,E){n.next=31;break}return V=T,n.next=28,{processed:[].concat(Object(Ot.a)(i),[p]),unprocessed:r.filter((function(t){return t!==p})),values:Object(lt.a)(Object(lt.a)({},s),{},Object(ue.a)({},p,V))};case 28:E=!0,n.next=17;break;case 31:n.next=37;break;case 33:n.prev=33,n.t0=n.catch(15),z=!0,M=n.t0;case 37:if(n.prev=37,n.prev=38,E||null==S.return){n.next=42;break}return n.next=42,Object(Ct.a)(S.return());case 42:if(n.prev=42,!z){n.next=45;break}throw M;case 45:return n.finish(42);case 46:return n.finish(37);case 47:case"end":return n.stop()}}),n,null,[[15,33,37,47],[38,,42,46]])})))()}}]),t}(),de=function(){var t=Object(A.a)(P.a.mark((function t(e,n){var a,o,i,r,c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=new pe("dcdc@0.1.0"),o=Object(I.a)(ae);try{for(o.s();!(i=o.n()).done;)r=i.value,a.register(new r)}catch(s){o.e(s)}finally{o.f()}return c={inputs:n,outputs:{}},t.next=6,a.process(e,c);case 6:return t.abrupt("return",c.outputs);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),me=n(29),fe=n.n(me),he=n(132),be=n.n(he),ve=n(82),ye=n.n(ve),xe=n(73),ge=n.n(xe),ke=P.a.mark(Ce),Oe=P.a.mark(Ve),je=P.a.mark(Fe),we=P.a.mark(Ie),Ee=P.a.mark(Ne),ze=P.a.mark(Pe),Me=P.a.mark(We),Se=function(t,e,n){for(var a=0,o=0;o<t.length;++o)a+=e[o]*(1+n);return a-=e[0]*n/2,a-=e[t.length-1]*n/2};function Ce(t){var e,n,a,o,i,r,c,s,u,l,p,d,m,f,h,b,v,y,x,g,k,O,j,w,E,z,M,S;return P.a.wrap((function(C){for(;;)switch(C.prev=C.next){case 0:if(e=t.text,n=t.x0,a=t.y0,o=t.size,i=t.dir,r=t.align,c=t.spacing,s=t.ignoreWhitespaces,u=t.alignBaseline,l=t.patternType,p=t.ctx,d=t.currentTime,m=t.start,f=t.end,h=t.params,s&&(e=e.split(/\s+/).join("")),b=n,v=a,y=new Array(e.length).fill(o),x=Se(e,y,c),"middle"!==r){C.next=13;break}C.t0=i,C.next="horizontal"===C.t0?9:"vertical"===C.t0?11:13;break;case 9:return b-=x/2,C.abrupt("break",13);case 11:return v-=x/2,C.abrupt("break",13);case 13:if("end"!==r){C.next=21;break}C.t1=i,C.next="horizontal"===C.t1?17:"vertical"===C.t1?19:21;break;case 17:return b-=x,C.abrupt("break",21);case 19:return v-=x,C.abrupt("break",21);case 21:C.t2=i,C.next="horizontal"===C.t2?24:"vertical"===C.t2?26:28;break;case 24:return b+=y[0]/2,C.abrupt("break",28);case 26:return v+=y[0]/2,C.abrupt("break",28);case 28:"follow"===l&&(g=b,k=v,O=b+("horizontal"===i?x:0),j=v+("vertical"===i?x:0),w=fe.a.float(0,1),Ge({ctx:p,currentTime:d,start:m,end:f,params:h,x0:g*(1-w)+O*w,y0:k*(1-w)+j*w,size:1.5*h.size})),E=0;case 30:if(!(E<e.length)){C.next=46;break}return z=e[E],M=b,S=u&&"horizontal"===i?v-(y[E]-o)/2:v,C.next=36,{i:E,ch:z,x0:M,y0:S,size:y[E]};case 36:C.t3=i,C.next="horizontal"===C.t3?39:"vertical"===C.t3?41:43;break;case 39:return b+=(y[E]+y[E+1])*(1+c)/2,C.abrupt("break",43);case 41:return v+=(y[E]+y[E+1])*(1+c)/2,C.abrupt("break",43);case 43:++E,C.next=30;break;case 46:case"end":return C.stop()}}),ke)}function Te(t){var e=t.ctx,n=t.ch,a=t.x0,o=t.y0,i=t.size,r=t.rotate,c=t.color,s=t.fontFamily,u=t.fontWeight;e.textBaseline="middle",e.textAlign="center",e.fillStyle=c,e.font="".concat(u," ").concat(i,"px '").concat(s,"'"),e.save(),e.translate(a,o),e.rotate(r*Math.PI),e.fillText(n,0,0),e.restore()}function Ve(t){var e,n,a,o,i,r,c,s;return P.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=t.text,n=t.parts,a=t.randomness,o=e.length/n,i=[0].concat(Object(Ot.a)(new Array(n-1).fill(0).map((function(){return 2*(Math.random()-.5)*a}))),[0]),r=0;case 4:if(!(r<n)){u.next=12;break}return c=Math.round(r*o+i[r]),s=Math.round((r+1)*o+i[r+1]),u.next=9,{parts:n,i:r,text:e.substring(c,s)};case 9:++r,u.next=4;break;case 12:case"end":return u.stop()}}),Oe)}function Fe(t){var e,n,a,o,i,r,c,s,u;return P.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e=t.width,n=t.height,a=t.i,o=t.parts,i=t.dist,r=t.dir,c=Nt(e,n,.5,(Pt(o,a)-.5)*i+.5,r),s=c.x,u=c.y,l.next=4,{x0:s,y0:u,dir:r,align:"middle"};case 4:case"end":return l.stop()}}),je)}function Ie(t){var e,n,a,o,i,r,c,s,u,l,p,d,m,f;return P.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:e=t.text,n=t.rows,a=t.cols,o=t.dist,i=t.width,r=t.height,c=t.size,s=Lt()(new Array(a).fill(0).map((function(t,e){return new Array(n).fill(0).map((function(t,n){return{u:e,v:n}}))})).reduce((function(t,e){return[].concat(Object(Ot.a)(t),Object(Ot.a)(e))}),[]),{count:Math.min(n*a,e.length)}).sort((function(t,e){var n=t.u,a=t.v,o=e.u,i=e.v;return i===a?n-o:a-i})),u=0;case 3:if(!(u<s.length)){h.next=12;break}return l=s[u],p=l.u,d=l.v,m=i/2+(p-(a-1)/2)*o*c,f=r/2+(d-(n-1)/2)*o*c,h.next=9,{text:e[u],x0:m,y0:f,align:"middle"};case 9:++u,h.next=3;break;case 12:case"end":return h.stop()}}),we)}function Ne(t){var e,n,a,o,i,r,c,s,u,l,p,d,m,f;return P.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:for(e=t.width,n=t.height,a=t.size,o=t.lineSpacing,i=t.i,r=t.dir,c=t.align,s=t.position,u=t.x0,l=t.y0,p=Bt(u,"end"===c),d=Bt(l,"right"===s),m=Nt(e,n,p,d,r),f=Rt(a*o*("left"===s?1:-1),r,!0);i>0;--i)m=Dt(m,f);return h.next=8,{x0:m.x,y0:m.y,dir:r,align:c};case 8:case"end":return h.stop()}}),Ee)}function Pe(t){var e,n,a,o,i,r,c,s,u,l,p,d;return P.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return e=t.width,n=t.height,a=t.i,o=t.angle,i=t.dir,r=t.x0,c=t.y0,s=Bt(r,1===a),u=Bt(c,1===a),l=Nt(e,n,s,u,i),p=l.x,d=l.y,m.next=6,{x0:p,y0:d,dir:i,rotate:o*Math.PI/2,align:"middle"};case 6:case"end":return m.stop()}}),ze)}var Ae=function(t,e,n){var a=t.x,o=t.y,i=e.x,r=e.y,c=n.x,s=n.y,u=Math.abs((r-o)*c-(i-a)*s+i*o-r*a)/Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2)),l=Math.atan2(r-o,i-a);return Math.abs(u/Math.sin(l+Math.PI/4))/Math.sqrt(2)},De=function(t,e,n){for(var a=e.map((function(t){return function(t,e){var n=t.x,a=t.y,o=t.r,i=e.x,r=e.y;return Math.max(Math.abs(i-n),Math.abs(r-a))-o}(t,n)})).reduce((function(t,e){return Math.min(t,e)}),1e5),o=0;o<t.length;++o){var i=t[o],r=t[(o+1)%t.length],c=Ae(i,r,n);c<a&&(a=c)}return a},Re=function(t,e){for(var n=e.tries,a=e.width,o=e.height,i=e.maxR,r=e.minR,c=void 0===r?0:r,s=[],u=t.map((function(t){return[t.x,t.y]})),l=0;l<n;++l){var p=fe.a.float(0,a),d=fe.a.float(0,o);if(_t()([p,d],u)){var m=Math.min(i,De(t,s,{x:p,y:d}));m<=c||s.push({x:p,y:d,r:m})}}return s},Be=function(t,e){e.debug;var n=e.angle,a=e.scale,o=[];for(t=t.sort((function(t,e){return t.x+t.y-(e.x+e.y)}));t.length>0;){var i=[];i.push(t.splice(0,1)[0]);for(var r=function(){var e=i[i.length-1],o=e.x,r=e.y,c=e.r,s=Object(Ot.a)(t).map((function(t,e){return Object(lt.a)(Object(lt.a)({},t),{},{i:e})})).map((function(t){var e=t.x,i=t.y;return{x:e,y:i,r:t.r,i:t.i,s:Math.abs(Math.atan2(-(i-r),e-o))/n,d:(e-o)/c/a}})).filter((function(t){return t.s<1})).map((function(t){var e=t.d,n=t.s,a=Object(D.a)(t,["d","s"]);return Object(lt.a)(Object(lt.a)({},a),{},{k:n+e})})).sort((function(t,e){return t.k-e.k}));if(0===s.length)return"break";i.push(t.splice(s[0].i,1)[0])};;){if("break"===r())break}o.push(i)}return o.sort((function(t,e){return Object(c.a)(t,1)[0].y-Object(c.a)(e,1)[0].y})).reduce((function(t,e){return[].concat(Object(Ot.a)(t),Object(Ot.a)(e))}),[])};function We(t){var e,n,a,o,i,r,c,s,u,l,p,d,m,f,h,b,v,y,x;return P.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:e=t.width,n=t.height,a=t.text,o=t.tries,i=t.size,r=t.minR,c=t.sort,s=t.sortAngle,u=t.sortScale,l=t.dimension,a=a.split(/\s+/).join(""),p=[{x:e*l.x0,y:n*l.y0},{x:e*l.x1,y:n*l.y0},{x:e*l.x1,y:n*l.y1},{x:e*l.x0,y:n*l.y1}],d=Re(p,{tries:o,width:e,height:n,maxR:i,minR:i*r}),m=Lt()(d,{count:Math.min(d.length,a.length)}),f=c?Be(m,{angle:s*Math.PI,scale:u}):m,h=0;case 7:if(!(h<f.length)){g.next=14;break}return b=f[h],v=b.x,y=b.y,x=b.r,g.next=11,{i:h,text:a[h],x0:v,y0:y,size:2*x,align:"middle"};case 11:++h,g.next=7;break;case 14:case"end":return g.stop()}}),Me)}function Ge(t){var e=t.ctx,n=t.x0,a=t.y0,o=t.currentTime,i=t.start,r=t.end,c=t.duration,s=void 0===c?.5:c,u=t.params,l=t.size,p=1*o,d=ge()(.22,1,.36,1),m=ge()(.64,0,.78,0),f=0;f=o<i?0:o<i+s?d((o-i)/s):o<r-s?1:o<r?1-m(1-(r-o)/s):0,e.save(),e.fillStyle=u.pattern.color,e.translate(n,a);var h=f*l/2;switch(e.scale(h,h),"line"!==u.pattern.shape&&e.rotate(p),u.pattern.shape){case"square":case"triangle":case"pentagon":var b={square:4,triangle:3,pentagon:5}[u.pattern.shape];e.beginPath(),e.moveTo(1,0);for(var v=0;v<b;++v){var y=2*Math.PI/b*(v+1);e.lineTo(Math.cos(y),Math.sin(y))}e.fill();break;case"circle":e.beginPath(),e.arc(0,0,1,0,2*Math.PI),e.fill();break;case"line":e.beginPath(),e.moveTo(1.5,-.2),e.lineTo(1.5,.2),e.lineTo(-1.5,.2),e.lineTo(-1.5,-.2),e.fill()}e.restore()}function Le(t){var e=t.start,n=t.end,a=t.lyric,o=t.currentTime,i=t.duration,r=void 0===i?.5:i,c=t.chi,s=t.ctx,u=t.ch,l=t.x0,p=t.y0,d=t.rotate,m=t.size,f=t.params,h=t.outEffect,b=t.inEffect,v=c*(n-r-e)/a.length+e,y=v-r,x=n-r,g=x+r;if(o<y);else if(o<v){var k=(o-y)/(v-y);switch(b){case"fade":var O=k;Te({ctx:s,ch:u,x0:l,y0:p,size:m,rotate:d,color:ye()(f.textColor).alpha(O).string(),fontFamily:f.fontFamily,fontWeight:f.fontWeight});break;case"blink":var j=k<.2?1:(k-.2)/.8;Te({ctx:s,ch:u,x0:l,y0:p,size:m,rotate:d,color:ye()(f.textColor).alpha(j).string(),fontFamily:f.fontFamily,fontWeight:f.fontWeight});break;case"zoom":Te({ctx:s,ch:u,x0:l,y0:p,size:m*ge()(.22,1,.36,1)(k),rotate:d,color:f.textColor,fontFamily:f.fontFamily,fontWeight:f.fontWeight});break;case"slide":var w=1-ge()(.22,1,.36,1)(k);Te({ctx:s,ch:u,x0:l+0*m*w,y0:p+-1*m*w,size:m,rotate:d,color:f.textColor,fontFamily:f.fontFamily,fontWeight:f.fontWeight})}}else if(o<x)Te({ctx:s,ch:u,x0:l,y0:p,size:m,rotate:d,color:f.textColor,fontFamily:f.fontFamily,fontWeight:f.fontWeight});else if(o<g){var E=(o-x)/(g-x);switch(h){case"fade":var z=1-E;Te({ctx:s,ch:u,x0:l,y0:p,size:m,rotate:d,color:ye()(f.textColor).alpha(z).string(),fontFamily:f.fontFamily,fontWeight:f.fontWeight});break;case"blink":var M=1-(E<.2?1:(E-.2)/.8);Te({ctx:s,ch:u,x0:l,y0:p,size:m,rotate:d,color:ye()(f.textColor).alpha(M).string(),fontFamily:f.fontFamily,fontWeight:f.fontWeight});break;case"zoom":Te({ctx:s,ch:u,x0:l,y0:p,size:m*(1-ge()(.64,0,.78,0)(E)),rotate:d,color:f.textColor,fontFamily:f.fontFamily,fontWeight:f.fontWeight})}}}fe.a.patch();var qe=function(t){var e=t.width,n=t.height,a=t.seed,o=t.ctx,i=t.params,r=t.lyric,c=t.start,s=t.end,u=t.currentTime;if(0!==r.length){var l=be()("".concat(a));fe.a.use(l);var p=Z.keys(i.modes).filter((function(t){return i.modes[t].enabled}));if(0!==p.length){var d=Lt()(p)[0],m=Lt()(["fade","blink","zoom","slide"])[0],f=Lt()(["fade","blink","zoom"])[0],h=Lt()(["center","follow","random"].filter((function(t){return i.pattern[t].enabled})))[0];switch(h){case"center":Ge({ctx:o,currentTime:u,start:c,end:s,params:i,x0:e/2,y0:n/2,size:2*i.size});break;case"follow":if(-1!==["a","b","c"].indexOf(d))break;case"random":for(var b=fe.a.int(7,16),v=0;v<b;++v){var y=fe.a.float(0,1)*e,x=fe.a.float(0,1)*n,g=fe.a.float(.4,1)*i.size;Ge({ctx:o,x0:y,y0:x,currentTime:u,start:c,end:s,params:i,size:g})}}switch(d){case"a":var k,O=Math.max(fe.a.int(1,i.splitMax),Math.ceil(r.length/12)),j=Lt()(["horizontal","vertical"])[0],w=Ve({text:r,parts:O,randomness:0}),E=0,z=Object(I.a)(w);try{for(z.s();!(k=z.n()).done;){var M,S=k.value,C=S.i,T=S.text,V=Fe({width:e,height:n,i:C,parts:O,dist:fe.a.float(i.modes.a.minDist,i.modes.a.maxDist),dir:j}),F=Object(I.a)(V);try{for(F.s();!(M=F.n()).done;){var N,P=M.value,A=P.x0,D=P.y0,R=P.dir,B=P.align,W=Ce({text:T,x0:A,y0:D,size:i.size,dir:R,align:B,spacing:i.letterSpacing,ignoreWhitespaces:!0,alignBaseline:!1,ctx:o,patternType:h,currentTime:u,start:c,end:s,params:i}),G=Object(I.a)(W);try{for(G.s();!(N=G.n()).done;){var L=N.value;Le({start:c,end:s,lyric:r,currentTime:u,chi:E,ctx:o,ch:L.ch,x0:L.x0,y0:L.y0,rotate:0,size:L.size,params:i,inEffect:m,outEffect:f}),++E}}catch(pe){G.e(pe)}finally{G.f()}}}catch(pe){F.e(pe)}finally{F.f()}}}catch(pe){z.e(pe)}finally{z.f()}break;case"b":var q,J=Math.max(fe.a.int(1,i.splitMax),Math.ceil(r.length/12)),H=Lt()(["horizontal","vertical"])[0],U=Lt()(["begin","end"])[0],_=Lt()(["left","right"])[0],X=Ve({text:r,parts:J,randomness:0}),K=0,Q=Object(I.a)(X);try{for(Q.s();!(q=Q.n()).done;){var Y,$=q.value,tt=$.i,et=$.text,nt=Ne({width:e,height:n,size:i.size,lineSpacing:i.modes.b.lineSpacing,i:tt,dir:H,align:U,position:_,x0:.2,y0:.25}),at=Object(I.a)(nt);try{for(at.s();!(Y=at.n()).done;){var ot,it=Y.value,rt=it.x0,ct=it.y0,st=it.dir,ut=it.align,lt=Ce({text:et,x0:rt,y0:ct,size:i.size,dir:st,align:ut,spacing:i.letterSpacing,ignoreWhitespaces:!0,alignBaseline:!1,ctx:o,patternType:h,currentTime:u,start:c,end:s,params:i}),pt=Object(I.a)(lt);try{for(pt.s();!(ot=pt.n()).done;){var dt=ot.value;Le({start:c,end:s,lyric:r,currentTime:u,chi:K,ctx:o,ch:dt.ch,x0:dt.x0,y0:dt.y0,rotate:0,size:dt.size,params:i,inEffect:m,outEffect:f}),++K}}catch(pe){pt.e(pe)}finally{pt.f()}}}catch(pe){at.e(pe)}finally{at.f()}}}catch(pe){Q.e(pe)}finally{Q.f()}break;case"c":var mt,ft=Lt()(["horizontal","vertical"])[0],ht=fe.a.float(i.modes.c.minAngle,i.modes.c.maxAngle),bt=Ve({text:r,parts:2,randomness:0}),vt=0,yt=Object(I.a)(bt);try{for(yt.s();!(mt=yt.n()).done;){var xt,gt=mt.value,kt=gt.i,Ot=gt.text,jt=Pe({width:e,height:n,i:kt,dir:ft,angle:ht,x0:.2,y0:.25}),wt=Object(I.a)(jt);try{for(wt.s();!(xt=wt.n()).done;){var Et,zt=xt.value,Mt=zt.x0,St=zt.y0,Ct=zt.dir,Tt=zt.align,Vt=zt.rotate,Ft=Ce({text:Ot,x0:Mt,y0:St,size:i.size,dir:Ct,align:Tt,spacing:i.letterSpacing,ignoreWhitespaces:!0,alignBaseline:!1,ctx:o,patternType:h,currentTime:u,start:c,end:s,params:i}),It=Object(I.a)(Ft);try{for(It.s();!(Et=It.n()).done;){var Nt=Et.value;Le({start:c,end:s,lyric:r,currentTime:u,chi:vt,ctx:o,ch:Nt.ch,x0:Nt.x0,y0:Nt.y0,rotate:Vt,size:Nt.size,params:i,inEffect:m,outEffect:f}),++vt}}catch(pe){It.e(pe)}finally{It.f()}}}catch(pe){wt.e(pe)}finally{wt.f()}}}catch(pe){yt.e(pe)}finally{yt.f()}break;case"d":var Pt,At,Dt=0;do{r.length>20?(Pt=4,At=5):(Pt=fe.a.int(2,4),At=fe.a.int(2,5))}while(!(r.length>20||Pt*At>=r.length));var Rt,Bt=Ie({text:r,rows:Pt,cols:At,dist:fe.a.float(i.modes.d.minDist,i.modes.d.maxDist),width:e,height:n,size:i.size}),Wt=Object(I.a)(Bt);try{for(Wt.s();!(Rt=Wt.n()).done;){var Gt,qt=Rt.value,Jt=qt.text,Ht=qt.x0,Ut=qt.y0,_t=qt.align,Xt=Ce({text:Jt,x0:Ht,y0:Ut,size:i.size,dir:"horizontal",align:_t,spacing:0,ignoreWhitespaces:!0,alignBaseline:!1}),Kt=Object(I.a)(Xt);try{for(Kt.s();!(Gt=Kt.n()).done;){var Qt=Gt.value;Le({start:c,end:s,lyric:r,currentTime:u,chi:Dt,ctx:o,ch:Qt.ch,x0:Qt.x0,y0:Qt.y0,rotate:0,size:Qt.size,params:i,inEffect:m,outEffect:f}),++Dt}}catch(pe){Kt.e(pe)}finally{Kt.f()}}}catch(pe){Wt.e(pe)}finally{Wt.f()}break;case"e":var Yt,Zt=We({text:r,width:e,height:n,tries:5e3,size:i.size,minR:i.modes.e.minR,sort:!0,sortAngle:.2,sortScale:3,dimension:{x0:.2,x1:.8,y0:.15,y1:.85}}),$t=Object(I.a)(Zt);try{for($t.s();!(Yt=$t.n()).done;){var te,ee=Yt.value,ne=ee.i,ae=ee.text,oe=ee.x0,ie=ee.y0,re=ee.size,ce=ee.align,se=Ce({text:ae,x0:oe,y0:ie,size:re*i.modes.e.scale,dir:"horizontal",align:ce,spacing:0,ignoreWhitespaces:!0,alignBaseline:!1}),ue=Object(I.a)(se);try{for(ue.s();!(te=ue.n()).done;){var le=te.value;Le({start:c,end:s,lyric:r,currentTime:u,chi:ne,ctx:o,ch:le.ch,x0:le.x0,y0:le.y0,rotate:0,size:le.size,params:i,inEffect:m,outEffect:f})}}catch(pe){ue.e(pe)}finally{ue.f()}}}catch(pe){$t.e(pe)}finally{$t.f()}}}}},Je=Object(s.a)({root:{position:"absolute",left:0,top:0,right:0,bottom:0},side:{position:"absolute",top:0,right:0,padding:4,width:345,height:"100%",overflow:"auto",boxSizing:"border-box"},canvasContainer:{position:"absolute",top:0,left:0,width:"calc(100vw - 345px)",height:"calc(100vh - 195px)",backgroundColor:"#222",overflow:"hidden"},canvas:{position:"absolute",top:"50%",left:"50%"},bottom:{position:"absolute",left:0,bottom:0,height:195,width:"calc(100vw - 345px)",padding:"20px 30px 40px 30px",boxSizing:"border-box"},sections:{position:"relative",height:16},section:{position:"absolute",top:0,bottom:0,border:"1px solid #121212"},bottomInner:{height:"100%"},title:{lineHeight:2.5,fontWeight:300,paddingLeft:16}});var He={SongSelection:g,FetchData:function(t){var e=t.id,n=t.setData,i=Object(D.a)(t,["id","setData"]),r=Object(a.useMemo)(Object(A.a)(P.a.mark((function t(){var a,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://dcdcapi.herokuapp.com/song/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:o=t.sent,n(o);case 7:case"end":return t.stop()}}),t)}))),[e,n]);return o.a.createElement(G,Object.assign({},i,{action:r}))},FetchFont:function(t){var e=t.data.lrc,n=t.moodboard,i=n.fontName,r=n.fontWeight,c=Object(D.a)(t,["data","moodboard"]),s=Object(a.useMemo)(Object(A.a)(P.a.mark((function t(){var n,a,o,c,s,u,l,p,d,m,f,h;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=B.a.parse(e),a=n.lyrics,o=new Set,c=Object(I.a)(a);try{for(c.s();!(s=c.n()).done;){u=s.value.content,l=Object(I.a)(u);try{for(l.s();!(p=l.n()).done;)d=p.value,o.add(d)}catch(b){l.e(b)}finally{l.f()}}}catch(b){c.e(b)}finally{c.f()}return t.next=6,fetch("https://dcdcapi.herokuapp.com/font",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({font:i,weight:r,glyphs:Array.from(o).join("")})});case 6:return m=t.sent,t.next=9,m.arrayBuffer();case 9:return f=t.sent,h=new FontFace(i,f,{weight:r}),t.next=13,h.load();case 13:document.fonts.add(h);case 14:case"end":return t.stop()}}),t)}))),[i,e,r]);return o.a.createElement(G,Object.assign({},c,{action:s}))},Moodboard:F,Segmentation:et,InitialValues:function(t){var e=t.initial,n=t.setInitial,a=t.setStep,i=t.next,r=t.prev;return o.a.createElement(ie,{setStep:a,defaults:e,onUpdate:n,name:"initial",next:i,prev:r})},Generation:function(t){var e=t.moodboard,n=t.data,i=t.data,r=i.song,s=i.artist,u=i.album.al_name,l=i.sections,d=i.featuress.duration_s,f=i.url,h=i.lrc,b=t.initialRef.current,v=t.setStep,y=t.prev,x=Je(),g=Object(a.useMemo)((function(){var t=B.a.parse(h).lyrics;t.sort((function(t,e){return t.timestamp-e.timestamp})),t=t.map((function(e,n){var a=e.timestamp,o=Object(D.a)(e,["timestamp"]);return Object(lt.a)({start:a,end:n===t.length-1?d:t[n+1].timestamp},o)}));var e,n=Object(I.a)(t);try{var a=function(){var t=e.value,n=t.start,a=t.end;t.section=l.map((function(t,e){var o=t.start,i=t.duration;return{idx:e,len:Math.max(0,Math.min(a,o+i)-Math.max(n,o))}})).sort((function(t,e){return-t.len+e.len}))[0].idx};for(n.s();!(e=n.n()).done;)a()}catch(o){n.e(o)}finally{n.f()}return t}),[h,d,l]),k=Object(a.useState)(null),j=Object(c.a)(k,2),w=j[0],E=j[1];Object(a.useEffect)((function(){Promise.all(l.map((function(t,a){return de(b,{moodboard:e,data:n,idx:a,section:t})}))).then(E)}),[n,e,b,l]);var z=Object(a.useState)(null),M=Object(c.a)(z,2),S=M[0],C=M[1],T=Object(a.useMemo)((function(){return function t(e,n){var a=e.name,i=e.path,r=e.type,c=e.children,s=Object(D.a)(e,["name","path","type","children"]);switch(r){case"folder":return o.a.createElement(ht.c,Object.assign({key:n,title:a,closed:!1},s),c.map(t));case"string":return o.a.createElement(ht.f,Object.assign({key:n,path:i,label:a},s));case"color":return o.a.createElement(ht.b,Object.assign({key:n,path:i,label:a},s));case"number":return o.a.createElement(ht.d,Object.assign({key:n,path:i,label:a},s));case"boolean":return o.a.createElement(ht.a,Object.assign({key:n,path:i,label:a},s));default:return null}}}),[]),V=Object(a.useMemo)((function(){return new Audio(f)}),[f]),F=Object(a.useState)(0),N=Object(c.a)(F,2),P=N[0],A=N[1],R=Object(a.useState)(!1),W=Object(c.a)(R,2),G=W[0],q=W[1];Object(a.useEffect)((function(){if(V){var t=function(){return A(V.currentTime)},e=function(){return q(!0)},n=function(){return q(!1)};return V.addEventListener("timeupdate",t),V.addEventListener("play",e),V.addEventListener("pause",n),function(){V.removeEventListener("timeupdate",t),V.removeEventListener("play",e),V.removeEventListener("pause",n)}}}),[V]);var H,_=Object(a.useCallback)((function(t,e){V.currentTime=e}),[V]),K=Object(a.useCallback)((function(){return V.play()}),[V]),Q=Object(a.useCallback)((function(){return V.pause()}),[V]),Y=Object(a.useMemo)((function(){for(var t=0;t<l.length;++t){var e=l[t],n=e.start,a=e.duration;if(P<n+a)return t}return l.length-1}),[P,l]),tt=Object(a.useState)((new Date).getTime()),et=Object(c.a)(tt,2),nt=et[0],at=et[1],ot=Object(a.useCallback)((function(){at((function(){return(new Date).getTime()}))}),[]),it=Object(a.useCallback)((function(){if(w&&S){var t=V.currentTime;S.width=1920,S.height=1080;var e=Math.min(S.parentNode.clientWidth/S.width,S.parentNode.clientHeight/S.height);S.style.transform="scale(".concat(e,")"),S.style.marginLeft="".concat(-960,"px"),S.style.marginTop="".concat(-540,"px");var n=S.getContext("2d");n.fillStyle=w[Y].backgroundColor,n.fillRect(0,0,1920,1080),g.forEach((function(e,a){var o=e.start,i=e.end,r=e.content;o-1<=t&&i+1>=t&&qe({width:1920,height:1080,ctx:n,lyric:r,currentTime:t,start:o,end:i,seed:nt+a,params:w[Y]})}))}}),[S,w,Y,g,V,nt]);return H=it,Object(a.useEffect)((function(){var t=!0;return requestAnimationFrame((function e(){H&&H(),t&&requestAnimationFrame(e)})),function(){t=!1}}),[H]),o.a.createElement("div",{className:x.root},o.a.createElement("div",{className:x.canvasContainer},o.a.createElement("canvas",{className:x.canvas,ref:C})),o.a.createElement("div",{className:x.side},o.a.createElement(O.a,{color:"textPrimary",variant:"h6",classes:{root:x.title}},"\u6bb5\u843d ",Y+1),w&&o.a.createElement(ht.g,{data:w[Y],onUpdate:function(t){t=Object(lt.a)(Object(lt.a)({},n),t),E((function(e){var n=Z.cloneDeep(e);return n[Y]=t,n}))},style:{position:"relative",backgroundColor:"#1A1A1A",right:0,left:0,width:"100%"}},se.map(T))),o.a.createElement("div",{className:x.bottom},o.a.createElement(p.a,{container:!0,direction:"column",justify:"space-between",classes:{root:x.bottomInner}},o.a.createElement(p.a,{item:!0,container:!0},o.a.createElement(p.a,{item:!0,xs:5},o.a.createElement(O.a,{color:"textSecondary"},r," / ",s," - ",u.substring(0,10))),o.a.createElement(p.a,{item:!0,xs:!0,container:!0,justify:"center",spacing:4},o.a.createElement(p.a,{item:!0},G?o.a.createElement(U.a,{style:{color:X.a[100],cursor:"pointer"},onClick:Q}):o.a.createElement(J.a,{style:{color:X.a[100],cursor:"pointer"},onClick:K})),o.a.createElement(p.a,{item:!0},o.a.createElement(ce.a,{style:{color:X.a[100],cursor:"pointer"}}))),o.a.createElement(p.a,{item:!0,xs:5,container:!0,justify:"flex-end",spacing:2},o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:function(){return v(y)}},"\u4e0a\u4e00\u6b65")),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"outlined",color:"primary",onClick:ot},"\u6362\u4e2a\u6548\u679c")),o.a.createElement(p.a,{item:!0},o.a.createElement(m.a,{variant:"outlined",color:"primary"},"\u4e0b\u8f7d\u89c6\u9891")))),o.a.createElement(p.a,{item:!0,container:!0,direction:"column",spacing:0},o.a.createElement(p.a,{item:!0},o.a.createElement(O.a,{color:"textPrimary",variant:"body2"},o.a.createElement($,{time:P}),"\xa0/\xa0",o.a.createElement($,{time:d}))),o.a.createElement(p.a,{item:!0},o.a.createElement(L.a,{value:P,onChange:_,max:d,step:.01})),o.a.createElement(p.a,{item:!0},o.a.createElement("div",{className:x.sections},l.map((function(t,e){var n=t.start,a=t.climax,i=e===l.length-1?d:l[e+1].start;return o.a.createElement("div",{key:"section-".concat(e),className:x.section,style:{left:"".concat(n/d*100,"%"),right:"".concat(100*(1-i/d),"%"),backgroundColor:0===a?"#03DAC5":"#F2994A",opacity:e===Y?1:.2}})}))))))))}},Ue={SongSelection:"FetchData",FetchData:"Moodboard",Moodboard:"FetchFont",FetchFont:"Segmentation",Segmentation:"InitialValues",InitialValues:"Generation"},_e={Segmentation:"Moodboard",InitialValues:"Segmentation",Generation:"InitialValues"},Xe=n(200),Ke=n(201),Qe=Object(l.a)({palette:{primary:{main:"#BB86FC"},secondary:{main:"#A0A0A0"},type:"dark"}}),Ye=Object(s.a)({root:{backgroundColor:"#121212",overflow:"hidden",height:"100vh"}}),Ze=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=Object(a.useMemo)((function(){return localStorage[e]?JSON.parse(localStorage[e]):t}),[t,e]),i=Object(a.useRef)(o),r=Object(a.useCallback)((function(t){i.current=t,setTimeout((function(){t===i.current&&(localStorage[e]=JSON.stringify(t),console.log("Data saved!"))}),n)}),[e,n]);return[o,r,i]};var $e=function(){var t=Ye(),e=Object(a.useState)("SongSelection"),n=Object(c.a)(e,2),i=n[0],r=n[1],s=He[i],l=Object(a.useState)(""),p=Object(c.a)(l,2),d=p[0],m=p[1],f=Object(a.useState)({}),h=Object(c.a)(f,2),b=h[0],v=h[1],y=Object(a.useState)(null),x=Object(c.a)(y,2),g=x[0],k=x[1],O=Object(a.useState)({}),j=Object(c.a)(O,2),w=j[0],E=j[1],z=Ze(Xe,"initial"),M=Object(c.a)(z,3),S=M[0],C=M[1],T=M[2],V=Ze(Ke,"generation"),F=Object(c.a)(V,3),I=F[0],N=F[1],P=F[2],A={next:Ue[i],prev:_e[i],step:i,setStep:r,id:d,setId:m,error:g,setError:k,data:b,setData:v,moodboard:w,setMoodboard:E,initial:S,setInitial:C,initialRef:T,generation:I,setGeneration:N,generationRef:P};return o.a.createElement(u.a,{theme:Qe},o.a.createElement("div",{className:t.root},o.a.createElement(s,A)))};r.a.render(o.a.createElement($e,null),document.querySelector("#root"))},99:function(t,e,n){t.exports=n.p+"static/media/logo-colored.9176ce0d.svg"}},[[208,1,2]]]);
//# sourceMappingURL=main.20c7918c.chunk.js.map